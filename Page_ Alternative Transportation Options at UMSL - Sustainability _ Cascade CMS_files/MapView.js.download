// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.32/esri/copyright.txt for details.
//>>built
require({cache:{"esri/views/View2D":function(){define("require ../chunks/tslib.es6 ../Viewpoint ../core/Collection ../core/CollectionFlattener ../core/Error ../core/has ../core/Logger ../core/maybe ../core/reactiveUtils ../core/workers/workers ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../core/accessorSupport/ensureType ../geometry/Polygon ../geometry/projection ../layers/support/TileInfo ./BreakpointsOwner ./DOMContainer ./PopupView ./View ./Viewport2DMixin ./2d/AnimationManager ./2d/layerViewModuleImportUtils ./2d/tiling/TileInfoView ./2d/tiling/TileKey ./2d/tiling/TileQueue ./2d/tiling/TileStrategy ./2d/viewpointUtils ./2d/layers/features/support/TileStore ./2d/layers/support/util ./2d/support/clippingUtils ./2d/support/highlightOptionsUtils ./2d/support/hitTestUtils ./2d/support/screenshotUtils ./2d/support/Timeline ./navigation/Navigation ./navigation/NavigationActionMap ./support/HighlightOptions ./support/screenUtils ./support/WebGLRequirements ./ui/DefaultUI ./ui/2d/DefaultUI2D ../webmap/utils ../webmap/background/ColorBackground".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u,h,f,w,v,y,x,m,z,B,A,D,F,I,S,T,U,L,O,W,C,E,N,X,J,G,M,V,Z,ca,ia,ea,H,K){async function P(){const [,{GraphicsView2D:Q,GraphicContainer:aa,LabelManager:da,MapViewNavigation:ka,MagnifierView2D:la,GridView2D:na,Stage:ra}]=await Promise.all([new Promise((oa,pa)=>b(["./2d/webglDeps"],oa,pa)),new Promise((oa,pa)=>b(["./2d/mapViewDeps"],oa,pa))]);Y=Q;ba=aa;fa=da;ma=ka;ha=la;ja=na;R=ra}let R,Y,ba,fa,ma,ha,ja;u=class extends A.Viewport2DMixin(x.BreakpointsOwner(z.PopupView(m.DOMContainer(B)))){constructor(Q){super(Q);
this.stage=this._gridView=this._magnifierView=null;this._resolveWhenReady=[];this.rootLayerViews=new t({getCollections:()=>[this.basemapView?.baseLayerViews,this.layerViews,this.basemapView?.referenceLayerViews],getChildrenFunction:()=>null});this.labelManager=this.graphicsView=this.featuresTilingScheme=null;this.navigation=new G({actionMap:new M({dragTertiary:"none"})});this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!0,labelsAnimationTime:125,labelCollisionsEnabled:!0};this.supersampleScreenshotsEnabled=
!0;this.supportsGround=!1;this.floors=new c;this.map=this.grid=null;this.spatialReferenceLocked=!1;this.timeline=new J.Timeline;this.type="2d";this.view2dType=null;this.ui=new ea;this.test={takeScreenshot:async aa=>X.takeRawScreenshot(this._getScreenshotView(aa),aa)};this.padding={top:0,right:0,bottom:0,left:0};e.initialize()}destroy(){this.layerViewManager.clear();this._set("preconditionsReady",!1);this.frameTask=q.destroyMaybe(this.frameTask);this.goToManager.destroy();this.rootLayerViews.destroy();
this.inputManager.destroy();this._set("inputManager",null)}get graphicsTileStore(){return new O(this.featuresTilingScheme)}get constraintsInfo(){const Q=this.defaultsFromMap?.tileInfo,aa=this.spatialReference;return{lods:Q?.spatialReference?.equals(aa)?Q.lods:null,spatialReference:aa}}get initialExtentRequired(){if(!this.stateManager)return!1;const {scale:Q,constraints:aa,center:da,viewpoint:ka,extent:la}=this;let na=this.zoom;if(this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties?.viewpoint||
la)return!1;aa?.effectiveLODs||(na=-1);return da&&(0!==Q||-1!==na)||null!=ka?.targetGeometry&&("extent"===ka.targetGeometry.type||ka.scale)?!1:!0}get defaultsFromMapSettings(){return{required:{extent:!1,heightModelInfo:!1,tileInfo:!0},requiresExtentInSpatialReference:this.spatialReferenceLocked}}get scheduler(){return this.frameTask.scheduler}get typeSpecificPreconditionsReady(){const Q=this._getDefaultViewpoint();return Q?v.isLoadedOrLoadFor(Q.targetGeometry.spatialReference,this.spatialReference):
!1}get background(){return H.isWebMap(this.map)?this.map.initialViewProperties.background:null}set background(Q){this._override("background",Q)}get center(){return this.stateManager?.center??null}set center(Q){this.stateManager.center=Q}get highlightOptions(){return E.getDefaultHighlightOptions(this)}set highlightOptions(Q){E.setDefaultHighlightOptions(this,Q)}get padding(){return this.stateManager?.padding}set padding(Q){this.stateManager&&(this.stateManager.padding=Q)}get rendering(){return this.stage?.renderRequested??
!1}get resolution(){return this.stateManager.resolution??0}get scale(){return this.stateManager?.scale??0}set scale(Q){this.stateManager&&(this.stateManager.scale=Q)}get tileInfo(){return this.featuresTilingScheme?.tileInfo}get updating(){const Q=!(!this.magnifier.visible||null===this.magnifier.position||!this._magnifierView?.updatingHandles.updating),aa=!this.destroyed&&(!this.layerViewManager||!this.labelManager||!this.graphicsView||!0===this.layerViewManager.updating||!0===this.labelManager.updating||
!0===this.graphicsView.updating||this.allLayerViews.some(da=>!da.destroyed&&!("layerViews"in da)&&!0===da.updating)||Q);if(p("esri-2d-log-updating")){const da=this.allLayerViews.reduce((ka,la)=>({...ka,[`${la.layer.id}(${la.layer.type})`]:!la.destroyed&&!("layerViews"in la)&&la.updating}),{});console.log(`Updating MapView: ${aa}\n-> Null LayerViewManager: ${!this.layerViewManager}\n-> Null LabelManager: ${!this.labelManager}\n-> Null GraphicsView: ${!this.graphicsView}\n-> layerViewManager.updating: ${this.layerViewManager?.updating}\n-> labelManager.updating: ${this.labelManager?.updating}\n-> graphicsView.updating: ${this.graphicsView?.updating}\n-> allLayerViews: ${JSON.stringify(da)}\n-> updatingMagnifier: ${Q}\n`)}return aa}get visibleArea(){const Q=
this.stateManager.visibleArea;return Q?new w({rings:[Q.map(aa=>[aa[0],aa[1]])],spatialReference:this.spatialReference}):Q}get zoom(){return this.stateManager.zoom??-1}set zoom(Q){this.stateManager.zoom=Q}get navigating(){return this.mapViewNavigation?.interacting??!1}async hitTest(Q,aa){return N.hitTest(this,Q,aa)}async takeScreenshot(Q){return X.takeScreenshot(this._getScreenshotView(Q),Q)}toMap(Q){if(!this.ready)return null;Q=Z.isSupportedScreenPointEvent(Q)?Z.createScreenPointFromSupportedEvent(this,
Q):Q;return this.stateManager.toMap(Q)}toScreen(Q,aa){return this.stateManager.toScreen(Q,aa)}whenLayerView(Q){return super.whenLayerView(Q)}graphicChanged(Q){this.graphicsView&&this.graphicsView.graphicUpdateHandler(Q)}whenReady(){return new Promise(Q=>{this.ready?Q(this):this._resolveWhenReady.push(Q)})}forceDOMReadyCycle(){this.forceReadyCycle()}getDefaultSpatialReference(){return this.map&&"initialViewProperties"in this.map&&this.map.initialViewProperties.spatialReference||this.defaultsFromMap?.spatialReference||
null}getDefaultTimeZone(){return H.isWebMap(this.map)?this.map.initialViewProperties.timeZone:null}getDefaultTimeExtent(){return H.isWebMap(this.map)?this.map.initialViewProperties.timeExtent:null}hasLayerViewModule(Q){return F.layerView2DImporter.hasLayerViewModule(Q)}importLayerView(Q){return F.layerView2DImporter.importLayerView(Q)}pixelSizeAt(){return this.ready?this.resolution:(g.getLogger(this).error("#pixelSizeAt()","Map view cannot be used before it is ready"),null)}async popupHitTest(Q){const aa=
this.toMap(Q),da=await this.hitTest(Q),ka=this.allLayerViews.toArray().filter(qa=>qa.clips.every(sa=>C.clipContainsPoint(this,sa,Q,aa))).reverse(),la=new globalThis.Map(ka.map(qa=>[qa.layer.uid,qa])),na=[];let ra=0,oa=0;for(;ra<da.results.length||oa<ka.length;){var pa=da.results.at(ra);if(pa&&"graphic"!==pa.type){++ra;continue}const qa=la.get((pa?.layer??pa?.graphic.layer)?.uid);(!pa||qa)&&oa<ka.length&&ka.at(oa)!==qa?(pa=ka.at(oa),"fetchPopupFeaturesAtLocation"in pa&&na.push({mapPoint:aa,layerView:pa}),
++oa):pa&&(na.push({graphic:pa.graphic,layerView:qa}),++ra)}return{hits:na,location:aa}}requestUpdate(){this.ready&&this.frameTask.requestUpdate()}async validate(){let Q=ca.check(this.type);p("safari")&&9>p("safari")&&(Q=new n("mapview:browser-not-supported","This browser is not supported by MapView (Safari \x3c 9)",{type:"safari",requiredVersion:9,detectedVersion:p("safari")}));if(null!=Q)throw g.getLogger(this).warn("#validate()",Q.message),Q;}loadAsyncDependencies(){return P()}_getDefaultViewpoint(){const {constraints:Q,
initialExtent:aa,map:da,padding:ka,size:la}=this;if(!Q)return null;var na=da&&"initialViewProperties"in da?da.initialViewProperties:void 0;const ra=this.stateManager.getUserStartupOptions(this.size);var oa=na?.viewpoint;const pa=oa?.targetGeometry?.extent??aa;var qa=pa?.center;na=oa?.rotation??0;oa=oa?.scale||pa&&L.extentToScale(pa,[la[0]-ka.left-ka.right,la[1]-ka.top-ka.bottom]);qa=ra.center??qa;oa=ra.scale??oa;return qa&&oa?new l({targetGeometry:qa,scale:oa,rotation:ra.rotation??na}):null}_startup(){this.timeline.begin("MapView Startup");
var Q=this._getDefaultViewpoint();this.stateManager.startup(Q,this.size,this.spatialReference,this.defaultsFromMap.extent?.center);this.graphics.owner=this;const aa=new R(this.surface,{canvas:this.renderCanvas,contextOptions:{disabledExtensions:this.deactivatedWebGLExtensions,debugWebGLExtensions:this.debugWebGLExtensions},renderingOptions:this.renderingOptions,timeline:this.timeline});this.stage=aa;this._magnifierView=new ha;this._magnifierView.magnifier=this.magnifier;this._gridView=new ja;Q=new fa({view:this});
this._set("labelManager",Q);Q=new D({view:this});this._set("animationManager",Q);Q=new ma({view:this,animationManager:Q});this._set("mapViewNavigation",Q);this._setupSpatialReferenceDependentProperties();this.addHandles([this.rootLayerViews.on("change",()=>this._updateStageChildren()),aa.on("webgl-error",da=>this.fatalError=da.error),d.watch(()=>this.stationary,da=>aa.stationary=da,d.syncAndInitial),d.watch(()=>this.background,da=>{aa.backgroundColor=da?.color;this._magnifierView.backgroundColor=
da?.color},d.syncAndInitial),d.watch(()=>this.magnifier,da=>this._magnifierView.magnifier=da,d.syncAndInitial),d.watch(()=>this.grid,da=>this._gridView.grid=da,d.syncAndInitial),d.watch(()=>this.renderingOptions,da=>aa.renderingOptions=da,d.syncAndInitial),d.watch(()=>this.highlights.items.map(da=>({name:da.name,options:{fillColor:da.color,haloColor:da.haloColor,fillOpacity:da.fillOpacity,haloOpacity:da.haloOpacity,haloWidth:da.haloWidth,haloBlur:da.haloBlur}})),()=>{aa.highlightGradient=W.createOrReuseHighlightGradient(aa.highlightGradient,
this.highlights.items)},d.syncAndInitial),d.watch(()=>this.state.id,()=>aa.state=this.state,d.syncAndInitial)],"map-view");this._updateStageChildren();Q=this._resolveWhenReady;this._resolveWhenReady=[];Q.forEach(da=>da(this));this.timeline.end("MapView Startup");this.frameTask.start();this._set("ready",!0)}_teardown(){this._destroySpatialReferenceDependentProperties();this.removeHandles("map-view");this.mapViewNavigation.destroy();this._set("mapViewNavigation",null);this.animation=null;this.animationManager.destroy();
this._set("animationManager",null);this.layerViewManager.clear();this.labelManager.destroy();this._magnifierView.destroy();this._gridView.destroy();this.stage.destroy();this.stage=null;this._set("graphicsView",null);this._gridView=this._magnifierView=null;this._set("labelManager",null);this._set("mapViewNavigation",null);this.graphics.owner=null;this.frameTask.stop();this.stationaryManager.clear();this._set("ready",!1);this.stateManager.teardown()}_updateStageChildren(){this.stage.removeAllChildren();
this.rootLayerViews.forEach(Q=>{this.stage.addChild(Q.container)});this.stage.addChild(this.graphicsView.container);this.stage.addChild(this._magnifierView);this.stage.addChild(this._gridView)}_setupSpatialReferenceDependentProperties(){var Q=new I(y.create({spatialReference:this.spatialReference,size:512,numLODs:36}));this._set("featuresTilingScheme",Q);Q=new Y({view:this,graphics:this.graphics,requestUpdateCallback:()=>this.requestUpdate(),container:new ba(Q)});this._set("graphicsView",Q)}_destroySpatialReferenceDependentProperties(){const Q=
this.graphicsView;this._set("graphicsView",null);Q.destroy();this._set("featuresTilingScheme",null)}_getScreenshotView(Q){const {allLayerViews:aa,padding:da,size:ka,stage:la}=this;return{allLayerViews:aa,backgroundColor:Q?.ignoreBackground?null:this.background?.color,padding:da,size:ka,stage:la}}_spatialReferenceChanged(Q){if(this.ready){this.frameTask.stop();for(const aa of this.allLayerViews)aa.processDetach();this._destroySpatialReferenceDependentProperties();this.stateManager.changeSpatialReference(Q);
this.stage.state=this.state;this._setupSpatialReferenceDependentProperties();for(const aa of this.allLayerViews)aa.processAttach();this.frameTask.requestFrame();this.frameTask.start();this._updateStageChildren()}}};u.type="2d";a.__decorate([k.property({constructOnly:!0})],u.prototype,"deactivatedWebGLExtensions",void 0);a.__decorate([k.property({constructOnly:!0})],u.prototype,"debugWebGLExtensions",void 0);a.__decorate([k.property({readOnly:!0})],u.prototype,"featuresTilingScheme",void 0);a.__decorate([k.property({readOnly:!0})],
u.prototype,"graphicsTileStore",null);a.__decorate([k.property()],u.prototype,"graphicsView",void 0);a.__decorate([k.property()],u.prototype,"constraintsInfo",null);a.__decorate([k.property()],u.prototype,"initialExtentRequired",null);a.__decorate([k.property()],u.prototype,"labelManager",void 0);a.__decorate([k.property({type:G,nonNullable:!0})],u.prototype,"navigation",void 0);a.__decorate([k.property({constructOnly:!0})],u.prototype,"renderCanvas",void 0);a.__decorate([k.property()],u.prototype,
"renderingOptions",void 0);a.__decorate([k.property({constructOnly:!0})],u.prototype,"supersampleScreenshotsEnabled",void 0);a.__decorate([k.property({readOnly:!0})],u.prototype,"supportsGround",void 0);a.__decorate([k.property()],u.prototype,"defaultsFromMapSettings",null);a.__decorate([k.property({readOnly:!0})],u.prototype,"typeSpecificPreconditionsReady",null);a.__decorate([k.property({type:K})],u.prototype,"background",null);a.__decorate([k.property()],u.prototype,"center",null);a.__decorate([k.property({type:c})],
u.prototype,"floors",void 0);a.__decorate([k.property()],u.prototype,"grid",void 0);a.__decorate([k.property({type:V})],u.prototype,"highlightOptions",null);a.__decorate([k.property()],u.prototype,"map",void 0);a.__decorate([k.property()],u.prototype,"padding",null);a.__decorate([k.property({readOnly:!0})],u.prototype,"rendering",null);a.__decorate([k.property({readOnly:!0})],u.prototype,"resolution",null);a.__decorate([k.property()],u.prototype,"scale",null);a.__decorate([k.property({constructOnly:!0})],
u.prototype,"spatialReferenceLocked",void 0);a.__decorate([k.property({readOnly:!0})],u.prototype,"tileInfo",null);a.__decorate([k.property({type:J.Timeline,readOnly:!0})],u.prototype,"timeline",void 0);a.__decorate([k.property({readOnly:!0})],u.prototype,"type",void 0);a.__decorate([k.property({readOnly:!0})],u.prototype,"updating",null);a.__decorate([k.property({readOnly:!0})],u.prototype,"view2dType",void 0);a.__decorate([k.property({readOnly:!0})],u.prototype,"visibleArea",null);a.__decorate([k.property()],
u.prototype,"zoom",null);a.__decorate([k.property({readOnly:!0})],u.prototype,"navigating",null);a.__decorate([k.property(),r.cast(Q=>Q instanceof ia?Q:f.ensureClass(ea,Q))],u.prototype,"ui",void 0);return u=a.__decorate([h.subclass("esri.views.View2D")],u)})},"esri/layers/support/TileInfo":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/unitUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../geometry/Point ../../geometry/SpatialReference ../../geometry/support/aaBoundingRect ../../geometry/support/spatialReferenceUtils ../../geometry/support/webMercatorUtils ./LOD ./TileKey".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u,h,f,w,v){var y;a=new a.JSONMap({PNG:"png",PNG8:"png8",PNG24:"png24",PNG32:"png32",JPEG:"jpg",JPG:"jpg",DIB:"dib",TIFF:"tiff",EMF:"emf",PS:"ps",PDF:"pdf",GIF:"gif",SVG:"svg",SVGZ:"svgz",Mixed:"mixed",MIXED:"mixed",LERC:"lerc",LERC2D:"lerc2d",RAW:"raw",pbf:"pbf"});l=y=class extends l{static create(x={}){const {resolutionFactor:m=1,scales:z,size:B=256,spatialReference:A=r.WebMercator,numLODs:D=24}=x;if(!h.isValid(A)){x=[];if(z)for(var F=0;F<z.length;F++){var I=z[F];
x.push(new w({level:F,scale:I,resolution:I}))}else for(F=5E-4,I=D-1;0<=I;I--)x.unshift(new w({level:I,scale:F,resolution:F})),F*=2;return new y({dpi:96,lods:x,origin:new k(0,0,A),size:[B,B],spatialReference:A})}F=h.getInfo(A);x=x.origin?new k({x:x.origin.x,y:x.origin.y,spatialReference:A}):F?new k({x:F.origin[0],y:F.origin[1],spatialReference:A}):new k({x:0,y:0,spatialReference:A});F=1/(39.37*c.getMetersPerUnitForSR(A)*96);I=[];if(z)for(var S=0;S<z.length;S++){var T=z[S];I.push(new w({level:S,scale:T,
resolution:T*F}))}else{var U=h.isGeographic(A)?512/B*5.916575275917094E8:256/B*5.91657527591555E8;S=Math.ceil(D/m);I.push(new w({level:0,scale:U,resolution:U*F}));for(T=1;T<S;T++)U/=2**m,I.push(new w({level:T,scale:U,resolution:U*F}))}return new y({dpi:96,lods:I,origin:x,size:[B,B],spatialReference:A})}constructor(x){super(x);this.dpi=96;this.spatialReference=this.size=this.origin=this.format=null}get isWrappable(){const {spatialReference:x,origin:m}=this;if(x&&m){const z=h.getInfo(x);return x.isWrappable&&
!!z&&Math.abs(z.origin[0]-m.x)<=z.dx}return!1}readOrigin(x,m){return k.fromJSON({spatialReference:m.spatialReference,...x})}set lods(x){const m=[],z=this._levelToLOD={};x&&x.forEach(B=>{m.push(B.scale);z[B.level]=B});this._set("scales",m);this._set("lods",x);this._initializeUpsampleLevels()}readSize(x,m){return[m.cols,m.rows]}writeSize(x,m){m.cols=x[0];m.rows=x[1]}zoomToScale(x){const m=this.scales;if(0>=x)return m[0];if(x>=m.length-1)return m[m.length-1];const z=Math.floor(x);return m[z]/(m[z]/m[z+
1])**(x-z)}scaleToZoom(x){const m=this.scales,z=m.length-1;let B=0;for(;B<z;B++){const A=m[B],D=m[B+1];if(A<=x)break;if(D===x)return B+1;if(A>x&&D<x)return B+Math.log(A/x)/Math.log(A/D)}return B}tileAt(x,m,z,B){var A=this.lodAt(x);if(!A)return null;let D;if("number"===typeof m)D=m,m=z;else{if(h.equals(m.spatialReference,this.spatialReference))D=m.x,m=m.y;else{B=f.project(m,this.spatialReference);if(null==B)return null;D=B.x;m=B.y}B=z}z=A.resolution*this.size[0];A=A.resolution*this.size[1];B||=new v.TileKey(null,
0,0,0,u.create());B.level=x;B.row=Math.floor((this.origin.y-m)/A+.001);B.col=Math.floor((D-this.origin.x)/z+.001);this.updateTileInfo(B);return B}updateTileInfo(x,m=y.ExtrapolateOptions.NONE){var z=this.lodAt(x.level);z||m!==y.ExtrapolateOptions.POWER_OF_TWO||(m=this.lods[this.lods.length-1],m.level<x.level&&(z=m));if(z){var B=x.level-z.level;m=z.resolution*this.size[0]/2**B;z=z.resolution*this.size[1]/2**B;x.id=`${x.level}/${x.row}/${x.col}`;x.extent||(x.extent=u.create());x.extent[0]=this.origin.x+
x.col*m;x.extent[1]=this.origin.y-(x.row+1)*z;x.extent[2]=x.extent[0]+m;x.extent[3]=x.extent[1]+z}}upsampleTile(x){const m=this._upsampleLevels[x.level];if(!m||-1===m.parentLevel)return!1;x.level=m.parentLevel;x.row=Math.floor(x.row/m.factor+.001);x.col=Math.floor(x.col/m.factor+.001);this.updateTileInfo(x);return!0}getTileBounds(x,m){var z=this.lodAt(m.level);if(null==z)return null;var {resolution:B}=z;z=B*this.size[0];B*=this.size[1];x[0]=this.origin.x+m.col*z;x[1]=this.origin.y-(m.row+1)*B;x[2]=
x[0]+z;x[3]=x[1]+B;return x}lodAt(x){return this._levelToLOD?.[x]??null}clone(){return y.fromJSON(this.write({}))}getCompatibleForVTL(x){if(this.size[0]!==this.size[1]||256===this.size[0]&&512===x)return null;const m=(512===this.size[0]&&256===x?-1:0)+(this.spatialReference.isGeographic?1:0);if(this.size[0]===x&&0===m)return this;const z=[],B=this.lods.length-m;for(let A=0;A<B;A++){const D=A+m,{scale:F,resolution:I}=0<=D?this.lods[D]:{scale:2*this.lods[0].scale,resolution:2*this.lods[0].resolution};
z.push(new w({level:A,scale:F,resolution:I}))}return new y({size:[x,x],dpi:this.dpi,format:this.format,compressionQuality:this.compressionQuality,origin:this.origin,spatialReference:this.spatialReference,lods:z})}_initializeUpsampleLevels(){const x=this.lods;this._upsampleLevels=[];let m=null;for(let z=0;z<x.length;z++){const B=x[z];this._upsampleLevels[B.level]={parentLevel:m?m.level:-1,factor:m?m.resolution/B.resolution:0};m=B}}};b.__decorate([t.property({type:Number,json:{write:!0}})],l.prototype,
"compressionQuality",void 0);b.__decorate([t.property({type:Number,json:{write:!0}})],l.prototype,"dpi",void 0);b.__decorate([t.property({type:String,json:{read:a.read,write:a.write,origins:{"web-scene":{read:!1,write:!1}}}})],l.prototype,"format",void 0);b.__decorate([t.property({readOnly:!0})],l.prototype,"isWrappable",null);b.__decorate([t.property({type:k,json:{write:!0}})],l.prototype,"origin",void 0);b.__decorate([q.reader("origin")],l.prototype,"readOrigin",null);b.__decorate([t.property({type:[w],
value:null,json:{write:!0}})],l.prototype,"lods",null);b.__decorate([t.property({readOnly:!0})],l.prototype,"scales",void 0);b.__decorate([t.property({cast:x=>Array.isArray(x)?x:"number"===typeof x?[x,x]:[256,256]})],l.prototype,"size",void 0);b.__decorate([q.reader("size",["rows","cols"])],l.prototype,"readSize",null);b.__decorate([e.writer("size",{cols:{type:n.Integer},rows:{type:n.Integer}})],l.prototype,"writeSize",null);b.__decorate([t.property({type:r,json:{write:!0}})],l.prototype,"spatialReference",
void 0);l=y=b.__decorate([d.subclass("esri.layers.support.TileInfo")],l);(function(x){x=x.ExtrapolateOptions||(x.ExtrapolateOptions={});x[x.NONE=0]="NONE";x[x.POWER_OF_TWO=1]="POWER_OF_TWO"})(l||={});return l})},"esri/layers/support/LOD":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,l,c,t,
n,p){var g;a=g=class extends a{constructor(q){super(q);this.cols=null;this.level=0;this.origin=this.levelValue=null;this.resolution=0;this.rows=null;this.scale=0}clone(){return new g({cols:this.cols,level:this.level,levelValue:this.levelValue,resolution:this.resolution,rows:this.rows,scale:this.scale})}};b.__decorate([l.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],a.prototype,"cols",void 0);b.__decorate([l.property({type:c.Integer,json:{write:!0}})],
a.prototype,"level",void 0);b.__decorate([l.property({type:String,json:{write:!0}})],a.prototype,"levelValue",void 0);b.__decorate([l.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],a.prototype,"origin",void 0);b.__decorate([l.property({type:Number,json:{write:!0}})],a.prototype,"resolution",void 0);b.__decorate([l.property({json:{write:!0,origins:{"web-document":{read:!1,write:!1},"portal-item":{read:!1,write:!1}}}})],a.prototype,"rows",void 0);
b.__decorate([l.property({type:Number,json:{write:!0}})],a.prototype,"scale",void 0);return a=g=b.__decorate([p.subclass("esri.layers.support.LOD")],a)})},"esri/layers/support/TileKey":function(){define(["exports"],function(b){class a{constructor(l,c,t,n,p){this.id=l;this.level=c;this.row=t;this.col=n;this.extent=p}}b.TileKey=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/BreakpointsOwner":function(){define("exports ../chunks/tslib.es6 ../core/ArrayPool ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,l,c,t,n,p,g,q){function d(r,u){return u?e[r].valueToClassName[u].split(" "):[]}const e={widthBreakpoint:{getValue(r){const u=r.viewSize[0];r=r.breakpoints;const h=this.values;return u<=r.xsmall?h.xsmall:u<=r.small?h.small:u<=r.medium?h.medium:u<=r.large?h.large:h.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-width-xsmall esri-view-width-less-than-small esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",
small:"esri-view-width-small esri-view-width-greater-than-xsmall esri-view-width-less-than-medium esri-view-width-less-than-large esri-view-width-less-than-xlarge",medium:"esri-view-width-medium esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-less-than-large esri-view-width-less-than-xlarge",large:"esri-view-width-large esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-less-than-xlarge",
xlarge:"esri-view-width-xlarge esri-view-width-greater-than-xsmall esri-view-width-greater-than-small esri-view-width-greater-than-medium esri-view-width-greater-than-large"}},heightBreakpoint:{getValue(r){const u=r.viewSize[1];r=r.breakpoints;const h=this.values;return u<=r.xsmall?h.xsmall:u<=r.small?h.small:u<=r.medium?h.medium:u<=r.large?h.large:h.xlarge},values:{xsmall:"xsmall",small:"small",medium:"medium",large:"large",xlarge:"xlarge"},valueToClassName:{xsmall:"esri-view-height-xsmall esri-view-height-less-than-small esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",
small:"esri-view-height-small esri-view-height-greater-than-xsmall esri-view-height-less-than-medium esri-view-height-less-than-large esri-view-height-less-than-xlarge",medium:"esri-view-height-medium esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-less-than-large esri-view-height-less-than-xlarge",large:"esri-view-height-large esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-less-than-xlarge",
xlarge:"esri-view-height-xlarge esri-view-height-greater-than-xsmall esri-view-height-greater-than-small esri-view-height-greater-than-medium esri-view-height-greater-than-large"}},orientation:{getValue(r){r=r.viewSize;const u=this.values;return r[1]>=r[0]?u.portrait:u.landscape},values:{portrait:"portrait",landscape:"landscape"},valueToClassName:{portrait:"esri-view-orientation-portrait",landscape:"esri-view-orientation-landscape"}}},k={xsmall:544,small:768,medium:992,large:1200};b.BreakpointsOwner=
r=>{r=class extends r{constructor(...u){super(...u);this.heightBreakpoint=this.widthBreakpoint=this.orientation=null;this.breakpoints=k}initialize(){this.addHandles(c.watch(()=>[this.breakpoints,this.size],()=>this._updateClassNames(),c.initial))}destroy(){this.destroyed||this._removeActiveClassNames()}set breakpoints(u){var h=this._get("breakpoints");u!==h&&(h=u,h&&h.xsmall<h.small&&h.small<h.medium&&h.medium<h.large||(u=JSON.stringify(k,null,2),console.warn("provided breakpoints are not valid, using defaults:"+
u),u=k),this._set("breakpoints",{...u}))}_updateClassNames(){if(this.container){var u=l.acquire(),h=l.acquire(),f=!1,w;for(w in e){const v=this[w],y=e[w].getValue({viewSize:this.size,breakpoints:this.breakpoints});v!==y&&(f=!0,this[w]=y,d(w,v).forEach(x=>h.push(x)),d(w,y).forEach(x=>u.push(x)))}f&&(this._applyClassNameChanges(u,h),l.release(u),l.release(h))}}_applyClassNameChanges(u,h){const f=this.container;f&&(h.forEach(w=>f.classList.remove(w)),u.forEach(w=>f.classList.add(w)))}_removeActiveClassNames(){const u=
this.container;if(u)for(var h in e)d(h,this[h]).forEach(f=>u.classList.remove(f))}};a.__decorate([t.property()],r.prototype,"breakpoints",null);a.__decorate([t.property()],r.prototype,"orientation",void 0);a.__decorate([t.property()],r.prototype,"widthBreakpoint",void 0);a.__decorate([t.property()],r.prototype,"heightBreakpoint",void 0);return r=a.__decorate([q.subclass("esri.views.BreakpointsOwner")],r)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/DOMContainer":function(){define("exports ../chunks/tslib.es6 ../core/domUtils ../core/events ../core/handleUtils ../core/Logger ../core/maybe ../core/reactiveUtils ../core/scheduling ../core/accessorSupport/decorators/property ../core/has ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./overlay/ViewOverlay".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u){function h(w){w&&(w.textContent="",w.parentNode&&w.parentNode.removeChild(w))}const f=[0,0];b.DOMContainer=w=>{w=class extends w{constructor(...v){super(...v);this._freqInfo={freq:16,time:750};this._overlayRenderTaskHandle=null;this.height=0;this.position=this.overlay=this.messagesCommon=null;this.resizing=!1;this.surface=this.root=null;this.suspended=!0;this.userContent=this.ui=null;this.width=0;this.widthBreakpoint=null;this.addHandles([g.watch(()=>this.cursor,
y=>{const {surface:x}=this;x&&x.setAttribute("data-cursor",y)}),g.watch(()=>this.navigating,y=>{const {surface:x}=this;x&&x.setAttribute("data-navigating",y.toString())})])}initialize(){this.addHandles([g.watch(()=>this.ui,(v,y)=>this._handleUIChange(v,y),g.initial),this.on("focus",()=>this.notifyChange("focused")),this.on("blur",()=>this.notifyChange("focused"))])}destroy(){this.destroyed||(this.ui?.destroy(),this.container=null)}get container(){return this._get("container")??null}set container(v){var y=
this._get("container");const x=l.byId(v);x||"string"!==typeof v||n.getLogger(this).error("#container",`element with id '${v}' not found`);if(y!==x)if(this._stopMeasuring(),y&&(y.classList.remove("esri-view"),this._overlayRenderTaskHandle&&(this._overlayRenderTaskHandle.remove(),this._overlayRenderTaskHandle=null),this.overlay&&(this.overlay.destroy(),this._set("overlay",null)),this.root&&(h(this.root),this._set("root",null)),this.userContent&&(l.reparent(this.userContent,y),h(this.userContent),this._set("userContent",
null))),x){x.classList.add("esri-view");v=document.createElement("div");v.className="esri-view-user-storage";l.reparent(x,v);x.appendChild(v);this._set("userContent",v);v=document.createElement("div");v.className="esri-view-root";x.insertBefore(v,x.firstChild);this._set("root",v);y=document.createElement("div");y.className="esri-view-surface";y.setAttribute("role","application");y.tabIndex=0;v.appendChild(y);this._set("surface",y);var m=new u;v.appendChild(m.surface);this._set("overlay",m);this.addHandles(g.watch(()=>
m.needsRender,z=>{this._overlayRenderTaskHandle=z&&!this._overlayRenderTaskHandle?q.addFrameTask({render:()=>this.overlay?.render()}):p.removeMaybe(this._overlayRenderTaskHandle)}));this.forceDOMReadyCycle();this._set("container",x);this._startMeasuring()}else this._set("width",0),this._set("height",0),this._set("position",null),this._set("suspended",!0),this._set("surface",null),this._set("container",null)}get focused(){const v=document.activeElement===this.surface;return document.hasFocus()&&v}get size(){return[this.width,
this.height]}blur(){this.surface?.blur()}focus(){this.surface?.focus()}pageToContainer(v,y,x){const m=this.position;v-=m?m[0]:0;y-=m?m[1]:0;x?(x[0]=v,x[1]=y):x=[v,y];return x}containerToPage(v,y,x){const m=this.position;v+=m?m[0]:0;y+=m?m[1]:0;x?(x[0]=v,x[1]=y):x=[v,y];return x}_handleUIChange(v,y){this.removeHandles("ui");y&&y!==v&&y.destroy();v&&(v.view=this,this.addHandles(g.watch(()=>this.root,x=>{if(x){const m=document.createElement("div");x.appendChild(m);x=m}else x=null;v.container=x},g.initial),
"ui"));this._set("ui",v)}_stopMeasuring(){this.removeHandles("measuring");this._get("resizing")&&this._set("resizing",!1)}_startMeasuring(){const v=this._freqInfo;v.freq=16;v.time=750;const y=q.addFrameTask({prepare:z=>{const B=this._measure(),A=this._freqInfo;A.time+=z.deltaTime;B&&(A.freq=16,this._get("resizing")||this._set("resizing",!0));A.time<A.freq||(A.time=0,this._position()||B?A.freq=16:A.freq=Math.min(750,2*A.freq),!B&&512<=A.freq&&(y.pause(),this._get("resizing")&&this._set("resizing",
!1)))}}),x=new ResizeObserver(z=>{v.freq=16;v.time=750;y.resume()});null!=this.container&&x.observe(this.container);const m=t.makeHandle(()=>x.disconnect());this.addHandles([c.on(window,"resize",()=>{v.freq=16;v.time=750;y.resume()}),m,y],"measuring");this._measure();this._position()}_measure(){var v=this.container;const y=v?v.clientWidth:0;v=v?v.clientHeight:0;if(0===y||0===v)return this.suspended||this._set("suspended",!0),!1;const x=this.width,m=this.height;if(y===x&&v===m)return this.suspended&&
this._set("suspended",!1),!1;this._set("width",y);this._set("height",v);this.suspended&&this._set("suspended",!1);this.emit("resize",{oldWidth:x,oldHeight:m,width:y,height:v});return!0}_position(){var v=this.container;const y=this.position;var x;if(x=v)x=(v.ownerDocument||window.document).defaultView,v=v.getBoundingClientRect(),f[0]=v.left+(x?.pageXOffset??0),f[1]=v.top+(x?.pageYOffset??0),x=f;v=x;return v?y&&v[0]===y[0]&&v[1]===y[1]?!1:(this._set("position",[v[0],v[1]]),!0):!1}forceDOMReadyCycle(){}};
a.__decorate([d.property()],w.prototype,"container",null);a.__decorate([d.property({readOnly:!0})],w.prototype,"focused",null);a.__decorate([d.property({readOnly:!0})],w.prototype,"height",void 0);a.__decorate([d.property()],w.prototype,"messagesCommon",void 0);a.__decorate([d.property({type:u})],w.prototype,"overlay",void 0);a.__decorate([d.property({readOnly:!0})],w.prototype,"position",void 0);a.__decorate([d.property({readOnly:!0})],w.prototype,"resizing",void 0);a.__decorate([d.property({readOnly:!0})],
w.prototype,"root",void 0);a.__decorate([d.property({value:null,readOnly:!0})],w.prototype,"size",null);a.__decorate([d.property({readOnly:!0})],w.prototype,"surface",void 0);a.__decorate([d.property({readOnly:!0})],w.prototype,"suspended",void 0);a.__decorate([d.property({nonNullable:!0})],w.prototype,"ui",void 0);a.__decorate([d.property({readOnly:!0})],w.prototype,"userContent",void 0);a.__decorate([d.property({readOnly:!0})],w.prototype,"width",void 0);a.__decorate([d.property()],w.prototype,
"widthBreakpoint",void 0);return w=a.__decorate([r.subclass("esri.views.DOMContainer")],w)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/overlay/ViewOverlay":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/support/UpdatingHandles ../../libs/maquette/projection ../../libs/maquette/projector".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e){a=class extends a{constructor(){super(...arguments);this.items=new l;this._watchUpdatingTracking=new q.UpdatingHandles;this._callbacks=new Map;this._projector=e.createProjector();this._hiddenProjector=e.createProjector()}get needsRender(){return 0<this.items.length}get updating(){return this._watchUpdatingTracking?.updating??!1}initialize(){const k=document.createElement("div");k.className="esri-overlay-surface";this._set("surface",k);this._hiddenSurface=document.createElement("div");
this._hiddenSurface.setAttribute("style","visibility: hidden;");k.appendChild(this._hiddenSurface);this._watchUpdatingTracking.addOnCollectionChange(()=>this.items,r=>{for(const u of r.added){const h=()=>u.render();this._callbacks.set(u,h);this._projector.append(this.surface,h)}for(const u of r.removed)r=this._projector.detach(this._callbacks.get(u)),this.surface.removeChild(r.domNode),this._callbacks.delete(u)})}addItem(k){this.items.add(k)}removeItem(k){this.items.remove(k)}destroy(){this.items.removeAll();
this._callbacks.forEach(k=>this._projector.detach(k));this._projector=this._callbacks=null;this._watchUpdatingTracking.destroy()}render(){this._projector.renderNow()}computeBoundingRect(k){const r=this._hiddenSurface,u=this._hiddenProjector;let h;const f=()=>h=k.render();u.append(r,f);u.renderNow();const w={left:0,top:0,right:0,bottom:0};if(h?.domNode){const v=h.domNode.getBoundingClientRect();w.left=v.left;w.top=v.top;w.right=v.right;w.bottom=v.bottom}for(u.detach(f);r.firstChild;)r.removeChild(r.firstChild);
return w}overlaps(k,r){k=this.computeBoundingRect(k);r=this.computeBoundingRect(r);return Math.max(k.left,r.left)<=Math.min(k.right,r.right)&&Math.max(k.top,r.top)<=Math.min(k.bottom,r.bottom)}get hasVisibleItems(){return this.items.some(k=>k.visible)}async prepare(){await document.fonts.load(this._fontString()).catch(()=>{})}renderCanvas(k,r){const u=!!r?.disableDecorations;if(this.items.some(f=>f.visible&&!(u&&f.isDecoration))){var h=k.getContext("2d");h.save();h.font=this._fontString();this.items.forEach(f=>
{u&&f.isDecoration||(h.save(),f.renderCanvas(h),h.restore())});h.restore()}}_fontString(){return`10px ${getComputedStyle(this.surface).fontFamily}`}};b.__decorate([c.property({readOnly:!0})],a.prototype,"surface",void 0);b.__decorate([c.property({readOnly:!0})],a.prototype,"items",void 0);b.__decorate([c.property({readOnly:!0})],a.prototype,"needsRender",null);b.__decorate([c.property({readOnly:!0})],a.prototype,"_watchUpdatingTracking",void 0);b.__decorate([c.property({readOnly:!0})],a.prototype,
"updating",null);return a=b.__decorate([g.subclass("esri.views.overlay.ViewOverlay")],a)})},"esri/views/PopupView":function(){define("require exports ../chunks/tslib.es6 ../core/asyncUtils ../core/Error ../core/has ../core/Logger ../core/promiseUtils ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./input/InputManager".split(" "),function(b,a,l,c,t,n,p,g,q,d,e,k,r){function u(v){return null!=v&&"open"in v&&"declaredClass"in
v}function h(v){return null!=v&&"declaredClass"in v&&"dockOptions"in v}const f=v=>Object.freeze(Object.defineProperty({__proto__:null,default:v},Symbol.toStringTag,{value:"Module"}));class w{constructor(v){this.layerView=v;this._resolver=g.createResolver();this.graphics=[]}get promise(){return this._resolver.promise}resolve(v){const {layerView:y,graphics:x,_resolver:m}=this;if(!y)return m.resolve(x),m.promise;let z;y.fetchPopupFeaturesFromGraphics(x,v).catch(B=>{z=B;return null}).then(B=>{B?m.resolve(B):
m.reject(z)});return m.promise}}a.PopupView=v=>{v=class extends v{constructor(){super(...arguments);this._popupSetupTask=null;this.popup={};this.popupEnabled=!0}initialize(){this.addHandles([q.watch(()=>[this.ui,this.popup],([y,x],m)=>{if(m){const [z,B]=m;z&&u(B)&&(B.view=null,h(B)&&z.remove(B,"popup"))}y&&u(x)&&(x.view=this,h(x)&&y.add(x,{key:"popup",position:"manual",internal:!0}))},q.initial),this.on("click",y=>{this.popup&&this.popupEnabled&&("mouse"!==y.pointerType||0===y.button)&&(u(this.popup)?
this.popup.viewModel.handleViewClick(y):y.async(async()=>{await this.setupPopup();u(this.popup)&&!this.destroyed&&this.ready&&this.popupEnabled&&this.popup.viewModel.handleViewClick(y)}))},r.ViewEventPriorities.WIDGET)]);q.whenOnce(()=>this.ready&&this.popupEnabled&&!this.updating).then(()=>{new Promise((y,x)=>b(["../widgets/Popup"],m=>y(f(m)),x))})}destroy(){this.destroyed||this.closePopup()}async openPopup(y){if(u(this.popup))return this.popup.open(y);try{await this.setupPopup(),this.popup?this.popup.open(y):
p.getLogger(this).error(new t("view:null-popup","Popup is null and can't be opened"))}catch{}}closePopup(){this._popupSetupTask?.abort();u(this.popup)&&this.popup.close()}async fetchPopupFeatures(y,x){await this.when();return this._popupHitsToFeatures(await this._getPopupHits(y,x),x)}async setupPopup(){this._popupSetupTask?.abort();if(this.popup&&!u(this.popup))return this._popupSetupTask=c.createTask(async y=>{const {default:x}=await new Promise((m,z)=>b(["../widgets/Popup"],B=>m(f(B)),z));g.throwIfAborted(y);
this.popup&&!u(this.popup)&&(y=this.popup,delete y.open,delete y.close,this.popup=new x(y))}),this._popupSetupTask.promise}async _popupHitsToFeatures({location:y,hits:x},m){const z=[],B=[];let A=!1;const D=g.wrapAbortWithTimeout(m,n("popup-view-fetch-timeout")??5E3);m=F=>{const I=B.at(-1);I&&I.layerView===F&&!A?F=I:(F=new w(F),B.push(F),z.push(F.promise));return F};for(const F of x)"graphic"in F?(m(F.layerView).graphics.push(F.graphic),A=!1):(z.push(F.layerView.fetchPopupFeaturesAtLocation(F.mapPoint,
D)),A=!0);B.map(F=>F.resolve(D));x=g.allSettledValues(z).then(F=>F.filter(I=>!!I).flat());return{pendingFeatures:z,allGraphicsPromise:x,location:y}}async _getPopupHits(y,x){const {hits:m,location:z}=await this.popupHitTest(y);g.throwIfAborted(x);y=[];for(const B of m)if("graphic"in B){if(this._isValidPopupGraphic(B.graphic,x)){const A=this._isValidPopupGraphicsLayerView(B.layerView)?B.layerView:void 0;y.push({graphic:B.graphic,layerView:A})}}else this._isValidPopupLocationLayerView(B.layerView)&&
y.push({mapPoint:B.mapPoint,layerView:B.layerView});return{hits:y,location:z}}_isValidPopupGraphic(y,x){return y&&!!y.getEffectivePopupTemplate(x?.defaultPopupTemplateEnabled)}_isValidPopupGraphicsLayerView(y){return!y||(!("layer"in y)||!y.suspended)&&"fetchPopupFeaturesFromGraphics"in y}_isValidPopupLocationLayerView(y){return(!("layer"in y)||!y.suspended)&&"fetchPopupFeaturesAtLocation"in y}};l.__decorate([d.property()],v.prototype,"popup",void 0);l.__decorate([d.property()],v.prototype,"popupEnabled",
void 0);return v=l.__decorate([k.subclass("esri.views.PopupView")],v)};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/Viewport2DMixin":function(){define("exports ../chunks/tslib.es6 ../Viewpoint ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./2d/FrameTask ./2d/GoToManager ./2d/MapViewConstraints ./2d/ViewStateManager ./2d/input/MapViewInputManager ./2d/support/StationaryManager ./input/ViewEvents".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u,h,f){b.Viewport2DMixin=w=>{w=class extends w{constructor(...v){super(...v);this.fullOpacity=1;this.stateManager=new r.ViewStateManager({constraints:new k({view:this})});this.goToManager=new e.GoToManager({view:this});this.stationaryManager=new h.StationaryManager;this.mapViewNavigation=null;this.renderingOptions={samplingMode:"dynamic",edgeLabelsVisible:!1,labelsAnimationTime:0,labelCollisionsEnabled:!1};this.frameTask=new d(this);this.inputManager=new u({view:this});
this.viewEvents=new f.ViewEvents(this);this.padding={top:0,right:0,bottom:0,left:0};this.addHandles([c.watch(()=>this.viewpoint,()=>this.stationaryManager.flip(),c.sync),this.on("resize",y=>this.stateManager.resize(y.width,y.height))])}get constraintsInfo(){return{lods:null,spatialReference:null}}get extent(){return this.stateManager?.extent??null}set extent(v){this.stateManager.extent=v}get state(){return this.stateManager.state}get interacting(){return this.navigating}get stationary(){return!this.animation&&
!this.navigating&&!this.resizing&&this.stationaryManager.stationary}set animation(v){var y=this._get("animation");v!==y&&(y&&y.stop(),v!==this.animationManager.animation&&this.animationManager.stop(),!v||v.isFulfilled()?this._set("animation",null):(this._set("animation",v),y=()=>{this.destroyed||v!==this._get("animation")||(this._set("animation",null),this.frameTask?.requestFrame())},v.when(y,y)))}get constraints(){return this.stateManager?.constraints}set constraints(v){v.view=this;const y=this.stateManager.constraints;
this.stateManager.constraints=v;y?.destroy()}get padding(){return this.stateManager?.padding}set padding(v){this.stateManager&&(this.stateManager.padding=v)}get resizeAlign(){return this.stateManager.resizeAlign}set resizeAlign(v){this.stateManager.resizeAlign=v}get rotation(){return this.stateManager.rotation??0}set rotation(v){const {rotationEnabled:y}=this.constraints;this.constraints.rotationEnabled=!0;this.stateManager.rotation=v;this.constraints.rotationEnabled=y}get viewpoint(){return this.stateManager.viewpoint??
null}set viewpoint(v){this.stateManager.viewpoint=v;this.frameTask.requestFrame()}on(v,y,x,m){return(x=this.inputManager&&this.viewEvents.on(v,y,x,m))?x:super.on(v,y)}hasEventListener(v){return super.hasEventListener(v)||this.viewEvents.hasHandler(v)}goTo(v,y){return this.goToManager.goTo(v,y)}};a.__decorate([t.property({readOnly:!0})],w.prototype,"animationManager",void 0);a.__decorate([t.property({readOnly:!0})],w.prototype,"fullOpacity",void 0);a.__decorate([t.property()],w.prototype,"stateManager",
void 0);a.__decorate([t.property()],w.prototype,"constraintsInfo",null);a.__decorate([t.property()],w.prototype,"extent",null);a.__decorate([t.property()],w.prototype,"goToManager",void 0);a.__decorate([t.property({readOnly:!0})],w.prototype,"state",null);a.__decorate([t.property({readOnly:!0})],w.prototype,"mapViewNavigation",void 0);a.__decorate([t.property()],w.prototype,"renderingOptions",void 0);a.__decorate([t.property({readOnly:!0})],w.prototype,"interacting",null);a.__decorate([t.property()],
w.prototype,"stationary",null);a.__decorate([t.property()],w.prototype,"animation",null);a.__decorate([t.property({type:k})],w.prototype,"constraints",null);a.__decorate([t.property({readOnly:!0})],w.prototype,"inputManager",void 0);a.__decorate([t.property()],w.prototype,"padding",null);a.__decorate([t.property()],w.prototype,"resizeAlign",null);a.__decorate([t.property()],w.prototype,"rotation",null);a.__decorate([t.property({readOnly:!0})],w.prototype,"viewEvents",void 0);a.__decorate([t.property({type:l})],
w.prototype,"viewpoint",null);return w=a.__decorate([q.subclass("esri.views.Viewport2DMixin")],w)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/FrameTask":function(){define("../../core/promiseUtils ../../core/reactiveUtils ../../core/scheduling ./PaddedViewState ../support/RenderState ../support/Scheduler".split(" "),function(b,a,l,c,t,n){class p{constructor(g){this.view=g;this._updateParameters=this._frameTaskHandle=this._stationaryHandle=null;this._updateRequested=
!1;this._scheduler=n.newScheduler();this._schedulerHandle=a.when(()=>this._scheduler.updating,()=>this.requestFrame());this.stationary=!0;this.prepare=()=>{this._updateParameters&&(this._updateParameters.state=this.view.state,this._updateParameters.stationary=this.view.stationary,this._updateParameters.pixelRatio=window.devicePixelRatio,this._updateParameters.renderingOptions=this.view.renderingOptions,this._updateParameters.targetState.copy(this.view.state),null==this.view.animation?.target||b.isPromiseLike(this.view.animation.target)||
(this._updateParameters.targetState.viewpoint=this.view.animation.target))};this.update=q=>{this._updateRequested=!1;if(!this.view?.destroyed){var {allLayerViews:d,graphicsView:e,labelManager:k,state:{id:r}}=this.view;d?.forEach(this._updateLayerView,this);null!=k&&(k.lastUpdateId!==r&&(k.viewChange(),k.lastUpdateId=r),k.updateRequested&&k.processUpdate(this._updateParameters));null!=e&&(e.lastUpdateId!==r&&(e.viewChange(),e.lastUpdateId=r),e.updateRequested&&e.processUpdate(this._updateParameters));
this.view.graphicsTileStore?.setViewState(this._updateParameters.state);this._scheduler.state=this.view.animation?t.RenderState.ANIMATING:this.view.interacting?t.RenderState.INTERACTING:t.RenderState.IDLE;this._scheduler.frame(q)||this._updateRequested||this._scheduler.state!==t.RenderState.IDLE||this._frameTaskHandle?.pause()}}}destroy(){this.stop();this._schedulerHandle.remove();this._scheduler.destroy()}get scheduler(){return this._scheduler}start(){if(!this._frameTaskHandle){var g=this.view;this.stationary=
g.stationary;this._updateParameters={state:g.state,targetState:new c,pixelRatio:window.devicePixelRatio,stationary:this.stationary,renderingOptions:g.renderingOptions};this._stationaryHandle=a.watch(()=>g.stationary,q=>{this.stationary=q;this.requestFrame()});this._frameTaskHandle=l.addFrameTask(this);this.requestUpdate()}}stop(){this._frameTaskHandle&&(this._updateRequested=!1,this._stationaryHandle?.remove(),this._frameTaskHandle.remove(),this._updateParameters=this._stationaryHandle=this._frameTaskHandle=
null,this.stationary=!0)}requestUpdate(){this._updateRequested||(this._updateRequested=!0,this.requestFrame())}requestFrame(){this._frameTaskHandle&&this._frameTaskHandle.resume()}_updateLayerView(g){if(g.attached){var q=this.view.state,d=g.lastUpdateId;if(null==d||!this.stationary&&!g.moving)g.moving=!0;d!==q.id&&g.viewChange();this.stationary&&g.moving&&(g.moving=!1,g.moveEnd());g.lastUpdateId=q.id;g.updateRequested&&g.processUpdate(this._updateParameters);"layerViews"in g&&g.layerViews?.forEach(this._updateLayerView,
this)}else this.requestUpdate()}}return p})},"esri/views/2d/PaddedViewState":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/libs/gl-matrix-2/math/vec2 ../../core/libs/gl-matrix-2/factories/vec2f64 ./viewpointUtils ./ViewState".split(" "),function(b,a,l,c,t,n,p,g,q,d,e,k){var r,u;let h=r=class extends a{constructor(){super(...arguments);
this.bottom=this.right=this.top=this.left=0}clone(){return new r({left:this.left,top:this.top,right:this.right,bottom:this.bottom})}};b.__decorate([c.property()],h.prototype,"left",void 0);b.__decorate([c.property()],h.prototype,"top",void 0);b.__decorate([c.property()],h.prototype,"right",void 0);b.__decorate([c.property()],h.prototype,"bottom",void 0);h=r=b.__decorate([g.subclass("esri.views.2d.PaddedViewState.Padding")],h);a=u=class extends k{constructor(...f){super(...f);this.paddedViewState=
new k;this._updateContent=(()=>{const w=d.create();return()=>{var v=this._get("size");const y=this._get("padding");if(v&&y){var x=this.paddedViewState;q.set(w,y.left+y.right,y.top+y.bottom);q.subtract(w,v,w);q.copy(x.size,w);if(v=x.viewpoint)this.viewpoint=v}}})();this.addHandles(l.watch(()=>[this.size,this.padding],()=>this._updateContent(),l.sync));this.padding=new h;this.size=[0,0]}set padding(f){this._set("padding",f||new h)}set viewpoint(f){if(f){let w=this.paddedViewState.viewpoint=f;const v=
this._get("padding");v&&(w=e.addPadding(f.clone(),f,this._get("size"),v));const {targetGeometry:y,rotation:x,scale:m}=w,{x:z,y:B,spatialReference:A}=y;f=this._viewpoint2D;f.center[0]=z;f.center[1]=B;f.rotation=x;f.scale=m;f.spatialReference=A;this._update()}}clone(){return new u({padding:this.padding.clone(),size:this.size.slice(),viewpoint:this.paddedViewState.viewpoint.clone(),pixelRatio:this.pixelRatio})}};b.__decorate([c.property()],a.prototype,"paddedViewState",void 0);b.__decorate([c.property({type:h})],
a.prototype,"padding",null);b.__decorate([c.property()],a.prototype,"viewpoint",null);return a=u=b.__decorate([g.subclass("esri.views.2d.PaddedViewState")],a)})},"esri/core/libs/gl-matrix-2/math/vec2":function(){define(["exports","./common"],function(b,a){function l(J,G){J[0]=G[0];J[1]=G[1];return J}function c(J,G,M){J[0]=G;J[1]=M;return J}function t(J,G,M){J[0]=G[0]+M[0];J[1]=G[1]+M[1];return J}function n(J,G,M){J[0]=G[0]-M[0];J[1]=G[1]-M[1];return J}function p(J,G,M){J[0]=G[0]*M[0];J[1]=G[1]*M[1];
return J}function g(J,G,M){J[0]=G[0]/M[0];J[1]=G[1]/M[1];return J}function q(J,G){J[0]=Math.ceil(G[0]);J[1]=Math.ceil(G[1]);return J}function d(J,G){J[0]=Math.floor(G[0]);J[1]=Math.floor(G[1]);return J}function e(J,G,M){J[0]=Math.min(G[0],M[0]);J[1]=Math.min(G[1],M[1]);return J}function k(J,G,M){J[0]=Math.max(G[0],M[0]);J[1]=Math.max(G[1],M[1]);return J}function r(J,G){J[0]=Math.round(G[0]);J[1]=Math.round(G[1]);return J}function u(J,G,M){J[0]=G[0]*M;J[1]=G[1]*M;return J}function h(J,G,M,V){J[0]=
G[0]+M[0]*V;J[1]=G[1]+M[1]*V;return J}function f(J,G){const M=G[0]-J[0];J=G[1]-J[1];return Math.sqrt(M*M+J*J)}function w(J,G){const M=G[0]-J[0];J=G[1]-J[1];return M*M+J*J}function v(J){const G=J[0];J=J[1];return Math.sqrt(G*G+J*J)}function y(J){const G=J[0];J=J[1];return G*G+J*J}function x(J,G){J[0]=-G[0];J[1]=-G[1];return J}function m(J,G){J[0]=1/G[0];J[1]=1/G[1];return J}function z(J,G){var M=G[0];const V=G[1];M=M*M+V*V;0<M&&(M=1/Math.sqrt(M),J[0]=G[0]*M,J[1]=G[1]*M);return J}function B(J,G){return J[0]*
G[0]+J[1]*G[1]}function A(J,G,M){G=G[0]*M[1]-G[1]*M[0];J[0]=J[1]=0;J[2]=G;return J}function D(J,G,M,V){const Z=G[0];G=G[1];J[0]=Z+V*(M[0]-Z);J[1]=G+V*(M[1]-G);return J}function F(J,G=1){const M=2*a.RANDOM()*Math.PI;J[0]=Math.cos(M)*G;J[1]=Math.sin(M)*G;return J}function I(J,G,M){const V=G[0];G=G[1];J[0]=M[0]*V+M[2]*G;J[1]=M[1]*V+M[3]*G;return J}function S(J,G,M){const V=G[0];G=G[1];J[0]=M[0]*V+M[2]*G+M[4];J[1]=M[1]*V+M[3]*G+M[5];return J}function T(J,G,M){const V=G[0];G=G[1];J[0]=M[0]*V+M[3]*G+M[6];
J[1]=M[1]*V+M[4]*G+M[7];return J}function U(J,G,M){const V=G[0];G=G[1];J[0]=M[0]*V+M[4]*G+M[12];J[1]=M[1]*V+M[5]*G+M[13];return J}function L(J,G,M,V){const Z=G[0]-M[0];G=G[1]-M[1];const ca=Math.sin(V);V=Math.cos(V);J[0]=Z*V-G*ca+M[0];J[1]=Z*ca+G*V+M[1];return J}function O(J,G){var M=J[0];J=J[1];const V=G[0];G=G[1];let Z=M*M+J*J;0<Z&&(Z=1/Math.sqrt(Z));let ca=V*V+G*G;0<ca&&(ca=1/Math.sqrt(ca));M=(M*V+J*G)*Z*ca;return 1<M?0:-1>M?Math.PI:Math.acos(M)}function W(J){return"vec2("+J[0]+", "+J[1]+")"}function C(J,
G){return J[0]===G[0]&&J[1]===G[1]}function E(J,G){const M=J[0];J=J[1];const V=G[0];G=G[1];const Z=a.getEpsilon();return Math.abs(M-V)<=Z*Math.max(1,Math.abs(M),Math.abs(V))&&Math.abs(J-G)<=Z*Math.max(1,Math.abs(J),Math.abs(G))}function N(J,G,M,V,Z){let ca=G[0]-M[0];M=G[1]-M[1];Z=(V[0]*ca+V[1]*M)*(Z-1);ca=V[0]*Z;M=V[1]*Z;J[0]=G[0]+ca;J[1]=G[1]+M;return J}const X=Object.freeze(Object.defineProperty({__proto__:null,add:t,angle:O,ceil:q,copy:l,cross:A,dist:f,distance:f,div:g,divide:g,dot:B,equals:E,
exactEquals:C,floor:d,inverse:m,len:v,length:v,lerp:D,max:k,min:e,mul:p,multiply:p,negate:x,normalize:z,projectAndScale:N,random:F,rotate:L,round:r,scale:u,scaleAndAdd:h,set:c,sqrDist:w,sqrLen:y,squaredDistance:w,squaredLength:y,str:W,sub:n,subtract:n,transformMat2:I,transformMat2d:S,transformMat3:T,transformMat4:U},Symbol.toStringTag,{value:"Module"}));b.add=t;b.angle=O;b.ceil=q;b.copy=l;b.cross=A;b.dist=f;b.distance=f;b.div=g;b.divide=g;b.dot=B;b.equals=E;b.exactEquals=C;b.floor=d;b.inverse=m;b.len=
v;b.length=v;b.lerp=D;b.max=k;b.min=e;b.mul=p;b.multiply=p;b.negate=x;b.normalize=z;b.projectAndScale=N;b.random=F;b.rotate=L;b.round=r;b.scale=u;b.scaleAndAdd=h;b.set=c;b.sqrDist=w;b.sqrLen=y;b.squaredDistance=w;b.squaredLength=y;b.str=W;b.sub=n;b.subtract=n;b.transformMat2=I;b.transformMat2d=S;b.transformMat3=T;b.transformMat4=U;b.vec2=X;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/vec2f64":function(){define(["exports"],function(b){function a(){return[0,
0]}function l(w){return[w[0],w[1]]}function c(w,v){return[w,v]}function t(w,v){return[w,v]}function n(w,v=[0,0]){const y=Math.min(2,w.length);for(let x=0;x<y;++x)v[x]=w[x];return v}function p(w,v){return new Float64Array(w,v,2)}function g(){return[0,0]}function q(){return[1,1]}function d(){return[1,0]}function e(){return[0,1]}const k=[0,0],r=[1,1],u=[1,0],h=[0,1],f=Object.freeze(Object.defineProperty({__proto__:null,ONES:r,UNIT_X:u,UNIT_Y:h,ZEROS:k,clone:l,create:a,createView:p,freeze:t,fromArray:n,
fromValues:c,ones:q,unitX:d,unitY:e,zeros:g},Symbol.toStringTag,{value:"Module"}));b.ONES=r;b.UNIT_X=u;b.UNIT_Y=h;b.ZEROS=k;b.clone=l;b.create=a;b.createView=p;b.freeze=t;b.fromArray=n;b.fromValues=c;b.ones=q;b.unitX=d;b.unitY=e;b.vec2f64=f;b.zeros=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/viewpointUtils":function(){define("exports ../../Viewpoint ../../core/Collection ../../core/mathUtils ../../core/unitUtils ../../core/libs/gl-matrix-2/math/common ../../core/libs/gl-matrix-2/math/mat2d ../../core/libs/gl-matrix-2/factories/mat2df64 ../../core/libs/gl-matrix-2/math/vec2 ../../core/libs/gl-matrix-2/factories/vec2f64 ../../geometry/Extent ../../geometry/Geometry ../../geometry/Point ../../geometry/projection ../../geometry/SpatialReference ../../geometry/support/normalizeUtils ../../geometry/support/spatialReferenceUtils".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u,h,f,w){function v(H,K){return K.type?q.set(H,K.x,K.y):q.copy(H,K)}function y(H,K,P=0){var R=H.width,Y=H.height;0!==P&&(R=c.deg2rad(P),P=Math.abs(Math.cos(R)),Y=Math.abs(Math.sin(R)),R=H.width*P+H.height*Y,Y=H.width*Y+H.height*P);return Math.max(R/Math.max(1,K[0]),Y/Math.max(1,K[1]))*I(H.spatialReference)}async function x(H,K,P,R){if(!H||Array.isArray(H)&&!H.length)return null;l.isCollection(H)&&(H=H.toArray());if(Array.isArray(H)&&H.length&&"object"===typeof H[0]){var Y=
H.every(aa=>"attributes"in aa);var ba=H.some(aa=>!aa.geometry),fa=H;if(Y&&ba&&K&&K.allLayerViews){Y=new Map;for(var ma of H)H=ma.layer,ba=Y.get(H)||[],fa=ma.attributes[H.objectIdField],null!=fa&&ba.push(fa),Y.set(H,ba);const aa=[];Y.forEach((da,ka)=>{const la=K.allLayerViews?.find(na=>na.layer.id===ka.id);if(la&&"queryFeatures"in la){const na=ka.createQuery();na.objectIds=da;na.returnGeometry=!0;aa.push(la.queryFeatures(na))}});ma=await Promise.all(aa);H=[];for(var ha of ma)if(ha&&ha.features&&ha.features.length)for(var ja of ha.features)null!=
ja.geometry&&H.push(ja.geometry);fa=H}for(var Q of fa)R=await x(Q,K,P,R);return R}if(Array.isArray(H)&&2===H.length&&"number"===typeof H[0]&&"number"===typeof H[1])Y=new r(H);else if(H instanceof k)Y=H;else if("geometry"in H)if(H.geometry)Y=H.geometry;else if(H.layer){const aa=H.layer;(ha=K.allLayerViews?.find(da=>da.layer.id===aa.id))&&"queryFeatures"in ha&&(ja=aa.createQuery(),ja.objectIds=[H.attributes[aa.objectIdField]],ja.returnGeometry=!0,Y=(await ha.queryFeatures(ja))?.features?.[0]?.geometry)}if(null==
Y)return null;switch(Y.type){case "point":ha=new e({xmin:Y.x,ymin:Y.y,xmax:Y.x,ymax:Y.y,spatialReference:Y.spatialReference});break;case "extent":case "multipoint":case "polygon":case "polyline":ha=f.getDenormalizedExtent(Y);break;default:ha=Y.extent}if(!ha)return null;u.isLoaded()||u.canProjectWithoutEngine(ha.spatialReference,P)||await u.load();ha=u.project(ha,P);if(!ha)return null;R?(ja=ha.center,Q=ja.clone(),Q.x=f.getClosestDenormalizedXToReference(ja.x,R.center.x,P),Q.x!==ja.x&&ha.centerAt(Q),
R=R.union(ha)):R=ha;return R}function m(H){if(H&&(!Array.isArray(H)||"number"!==typeof H[0])&&("object"===typeof H||Array.isArray(H)&&"object"===typeof H[0])){if("layer"in H&&null!=H.layer?.minScale&&null!=H.layer.maxScale){var K=H.layer;return{min:K.minScale,max:K.maxScale}}if(Array.isArray(H)&&H.length&&H.every(P=>"layer"in P)){let P=K=0;for(const R of H)H=R.layer,H?.minScale&&H.maxScale&&(K=H.minScale<K?H.minScale:K,P=H.maxScale>P?H.maxScale:P);return K&&P?{min:K,max:P}:null}}}function z(H,K){const P=
H.wkid?H:H.spatialReference||h.WGS84;return w.equals(P,K)||P.imageCoordinateSystem||K.imageCoordinateSystem?H:u.project(H,K)}function B(H,K){const P=H.targetGeometry,R=K.targetGeometry;P.x=R.x;P.y=R.y;P.spatialReference=R.spatialReference;H.scale=K.scale;H.rotation=K.rotation;return H}function A(H,K,P){return P?q.set(H,.5*(K[0]-P.right+P.left),.5*(K[1]-P.bottom+P.top)):q.scale(H,K,.5)}function D(H){return H.scale*F(H.targetGeometry?.spatialReference)}function F(H){return w.isValid(H)?1/(39.37*t.getMetersPerUnitForSR(H)*
96):1}function I(H){return w.isValid(H)?39.37*t.getMetersPerUnitForSR(H)*96:1}function S(H){return(H=w.getInfo(H))?H.valid[1]-H.valid[0]:0}const T=180/Math.PI,U=function(){const H=d.create();return function(K,P,R){const Y=P.targetGeometry;v(H,Y);P=.5*D(P);K.xmin=H[0]-P*R[0];K.ymin=H[1]-P*R[1];K.xmax=H[0]+P*R[0];K.ymax=H[1]+P*R[1];K.spatialReference=Y.spatialReference;return K}}(),L=function(){const H=d.create();return function(K,P,R){return q.sub(K,q.scale(K,P,.5),A(H,P,R))}}(),O=function(){const H=
g.create(),K=d.create();return function(P,R,Y,ba){const fa=D(R);R=n.toRadian(R.rotation)||0;q.set(K,fa,fa);p.fromScaling(H,K);p.rotate(H,H,R);p.translate(H,H,L(K,Y,ba));p.translate(H,H,[0,ba.top-ba.bottom]);return q.set(P,H[4],H[5])}}(),W=function(){const H=d.create(),K=d.create(),P=d.create();return function(R,Y,ba,fa,ma,ha){q.negate(H,Y);q.scale(K,ba,.5*ha);q.set(P,1/fa*ha,-1/fa*ha);p.fromTranslation(R,K);ma&&p.rotate(R,R,ma);p.scale(R,R,P);p.translate(R,R,H);return R}}(),C=function(){const H=d.create();
return function(K,P,R,Y){const ba=D(P),fa=n.toRadian(P.rotation)||0;v(H,P.targetGeometry);return W(K,H,R,ba,fa,Y)}}(),E=function(){const H=d.create();return function(K,P,R,Y){const ba=D(P);v(H,P.targetGeometry);return W(K,H,R,ba,0,Y)}}(),N=function(){const H=d.create(),K=d.create(),P=[0,0,0];return function(R,Y,ba){q.subtract(H,R,Y);q.normalize(H,H);q.subtract(K,R,ba);q.normalize(K,K);q.cross(P,H,K);R=Math.acos(q.dot(H,K)/(q.length(H)*q.length(K)))*T;0>P[2]&&(R=-R);isNaN(R)&&(R=0);return R}}(),X=
function(){const H=d.create();return function(K,P,R,Y){const ba=K.targetGeometry;B(K,P);O(H,P,R,Y);ba.x+=H[0];ba.y+=H[1];return K}}(),J=function(){return function(H,K,P){B(H,K);K=H.targetGeometry;K.x=P.x;K.y=P.y;K.spatialReference=P.spatialReference;return H}}(),G=function(){const H=d.create();return function(K,P,R,Y,ba){ba||="center";q.sub(H,R,Y);q.scale(H,H,.5);R=H[0];Y=H[1];switch(ba){case "center":q.set(H,0,0);break;case "left":q.set(H,-R,0);break;case "top":q.set(H,0,Y);break;case "right":q.set(H,
R,0);break;case "bottom":q.set(H,0,-Y);break;case "top-left":q.set(H,-R,Y);break;case "bottom-left":q.set(H,-R,-Y);break;case "top-right":q.set(H,R,Y);break;case "bottom-right":q.set(H,R,-Y)}ea(K,P,H);return K}}(),M=function(){const H=d.create();return function(K,P,R,Y,ba){B(K,P);isNaN(R)||0===R||(ca(H,Y,P,ba),K.scale=P.scale*R,ia(H,H,K,ba),ea(K,K,q.set(H,H[0]-Y[0],Y[1]-H[1])));return K}}(),V=function(){const H=d.create();return function(K,P,R,Y,ba,fa){B(K,P);isNaN(R)||0===R||(ca(H,ba,P,fa),K.scale=
P.scale*R,K.rotation+=Y,ia(H,H,K,fa),ea(K,K,q.set(H,H[0]-ba[0],ba[1]-H[1])));return K}}(),Z=function(){const H=d.create(),K=d.create();return function(P,R,Y,ba,fa,ma,ha){L(K,ma,ha);q.add(H,fa,K);return ba?V(P,R,Y,ba,H,ma):M(P,R,Y,H,ma)}}(),ca=function(){const H=g.create();return function(K,P,R,Y){var ba=q.transformMat2d;C(H,R,Y,1);R=p.invert(H,H);return ba.call(q,K,P,R)}}(),ia=function(){const H=g.create();return function(K,P,R,Y){return q.transformMat2d(K,P,C(H,R,Y,1))}}(),ea=function(){const H=
d.create(),K=g.create();return function(P,R,Y){B(P,R);const ba=D(R),fa=P.targetGeometry;p.fromRotation(K,n.toRadian(R.rotation)||0);p.scale(K,K,d.fromValues(ba,ba));q.transformMat2d(H,Y,K);fa.x+=H[0];fa.y+=H[1];return P}}();b.addPadding=X;b.angleBetween=N;b.centerAt=J;b.copy=B;b.create=async function(H,K){if(!H||!K)return new a({targetGeometry:new r,scale:0,rotation:0});var P=K.spatialReference;const {constraints:R,padding:Y,viewpoint:ba,size:fa}=K,ma=[Y?fa[0]-Y.left-Y.right:fa[0],Y?fa[1]-Y.top-Y.bottom:
fa[1]];let ha=null;H instanceof a?ha=H:H.viewpoint?ha=H.viewpoint:H.target&&"esri.Viewpoint"===H.target.declaredClass&&(ha=H.target);let ja=null;ha?.targetGeometry?ja=ha.targetGeometry:H instanceof e?ja=H:H instanceof k?ja=await x(H,K,P):H&&(ja=await x(H.center,K,P)||await x(H.target,K,P)||await x(H,K,P));!ja&&ba?.targetGeometry?ja=ba.targetGeometry:!ja&&K.extent&&(ja=K.extent);P||(P=K.spatialReference||K.extent||ja,P=P.wkid?P:P.spatialReference||h.WGS84);u.isLoaded()||w.equals(ja.spatialReference,
P)||u.canProjectWithoutEngine(ja.spatialReference,P)||await u.load();var Q=z(ja,P);Q="center"in Q?Q.center:Q;!1!==K.pickClosestTarget&&"point"===Q.type&&"point"===ba.targetGeometry?.type&&(Q.x=f.getClosestDenormalizedXToReference(Q.x,ba.targetGeometry.x,Q.spatialReference));K=0;ha?K=ha.rotation:H.hasOwnProperty("rotation")?K=H.rotation:ba&&(K=ba.rotation);let aa=0;aa=null!=ha?.targetGeometry&&"point"===ha.targetGeometry.type?ha.scale:"scale"in H&&H.scale?H.scale:"zoom"in H&&-1!==H.zoom&&R&&R.effectiveLODs?
R.zoomToScale(H.zoom):Array.isArray(ja)||"point"===ja.type||"extent"===ja.type&&0===ja.width&&0===ja.height?ba.scale:y(z(ja.extent,P),ma,K);if(H=m(H.target??H))H.min&&H.min<aa?aa=H.min:H.max&&H.max>aa&&(aa=H.max);H=new a({targetGeometry:Q,scale:aa,rotation:K});R&&(H=R.fit(H),R.constrainByGeometry(H),R.rotationEnabled||(H.rotation=ba.rotation));return H};b.extentToScale=y;b.getAnchor=A;b.getExtent=U;b.getMatrix=W;b.getPaddingMapTranslation=O;b.getPaddingScreenTranslation=L;b.getResolution=D;b.getResolutionToScaleFactor=
I;b.getScaleToResolutionFactor=F;b.getTransform=C;b.getTransformNoRotation=E;b.getWorldScreenWidth=function(H,K){return Math.round(S(H)/K)};b.getWorldWidth=S;b.padAndScaleAndRotateBy=Z;b.resize=G;b.rotateBy=function(H,K,P){B(H,K);H.rotation+=P;return H};b.rotateTo=function(H,K,P){B(H,K);H.rotation=P;return H};b.scaleAndRotateBy=V;b.scaleTo=function(H,K,P){B(H,K);H.scale=P;return H};b.setExtent=function(H,K,P,R,Y){J(H,K,P.center);H.scale=y(P,R);Y?.constraints?.constrain(H);return H};b.toMap=ca;b.toScreen=
ia;b.translateBy=ea;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat2d":function(){define(["exports","./common"],function(b,a){function l(A,D){A[0]=D[0];A[1]=D[1];A[2]=D[2];A[3]=D[3];A[4]=D[4];A[5]=D[5];return A}function c(A){A[0]=1;A[1]=0;A[2]=0;A[3]=1;A[4]=0;A[5]=0;return A}function t(A,D,F,I,S,T,U){A[0]=D;A[1]=F;A[2]=I;A[3]=S;A[4]=T;A[5]=U;return A}function n(A,D){const F=D[0],I=D[1],S=D[2],T=D[3],U=D[4];D=D[5];let L=F*T-I*S;if(!L)return null;
L=1/L;A[0]=T*L;A[1]=-I*L;A[2]=-S*L;A[3]=F*L;A[4]=(S*D-T*U)*L;A[5]=(I*U-F*D)*L;return A}function p(A){return A[0]*A[3]-A[1]*A[2]}function g(A,D,F){const I=D[0],S=D[1],T=D[2],U=D[3],L=D[4];D=D[5];const O=F[0],W=F[1],C=F[2],E=F[3],N=F[4];F=F[5];A[0]=I*O+T*W;A[1]=S*O+U*W;A[2]=I*C+T*E;A[3]=S*C+U*E;A[4]=I*N+T*F+L;A[5]=S*N+U*F+D;return A}function q(A,D,F){const I=D[0],S=D[1],T=D[2],U=D[3],L=D[4];D=D[5];const O=Math.sin(F);F=Math.cos(F);A[0]=I*F+T*O;A[1]=S*F+U*O;A[2]=I*-O+T*F;A[3]=S*-O+U*F;A[4]=L;A[5]=D;
return A}function d(A,D,F){const I=D[1],S=D[2],T=D[3],U=D[4],L=D[5],O=F[0];F=F[1];A[0]=D[0]*O;A[1]=I*O;A[2]=S*F;A[3]=T*F;A[4]=U;A[5]=L;return A}function e(A,D,F){const I=D[0],S=D[1],T=D[2],U=D[3],L=D[4];D=D[5];const O=F[0];F=F[1];A[0]=I;A[1]=S;A[2]=T;A[3]=U;A[4]=I*O+T*F+L;A[5]=S*O+U*F+D;return A}function k(A,D){const F=Math.sin(D);D=Math.cos(D);A[0]=D;A[1]=F;A[2]=-F;A[3]=D;A[4]=0;A[5]=0;return A}function r(A,D){A[0]=D[0];A[1]=0;A[2]=0;A[3]=D[1];A[4]=0;A[5]=0;return A}function u(A,D){A[0]=1;A[1]=0;
A[2]=0;A[3]=1;A[4]=D[0];A[5]=D[1];return A}function h(A){return"mat2d("+A[0]+", "+A[1]+", "+A[2]+", "+A[3]+", "+A[4]+", "+A[5]+")"}function f(A){return Math.sqrt(A[0]**2+A[1]**2+A[2]**2+A[3]**2+A[4]**2+A[5]**2+1)}function w(A,D,F){A[0]=D[0]+F[0];A[1]=D[1]+F[1];A[2]=D[2]+F[2];A[3]=D[3]+F[3];A[4]=D[4]+F[4];A[5]=D[5]+F[5];return A}function v(A,D,F){A[0]=D[0]-F[0];A[1]=D[1]-F[1];A[2]=D[2]-F[2];A[3]=D[3]-F[3];A[4]=D[4]-F[4];A[5]=D[5]-F[5];return A}function y(A,D,F){A[0]=D[0]*F;A[1]=D[1]*F;A[2]=D[2]*F;
A[3]=D[3]*F;A[4]=D[4]*F;A[5]=D[5]*F;return A}function x(A,D,F,I){A[0]=D[0]+F[0]*I;A[1]=D[1]+F[1]*I;A[2]=D[2]+F[2]*I;A[3]=D[3]+F[3]*I;A[4]=D[4]+F[4]*I;A[5]=D[5]+F[5]*I;return A}function m(A,D){return A[0]===D[0]&&A[1]===D[1]&&A[2]===D[2]&&A[3]===D[3]&&A[4]===D[4]&&A[5]===D[5]}function z(A,D){const F=A[0],I=A[1],S=A[2],T=A[3],U=A[4];A=A[5];const L=D[0],O=D[1],W=D[2],C=D[3],E=D[4];D=D[5];const N=a.getEpsilon();return Math.abs(F-L)<=N*Math.max(1,Math.abs(F),Math.abs(L))&&Math.abs(I-O)<=N*Math.max(1,Math.abs(I),
Math.abs(O))&&Math.abs(S-W)<=N*Math.max(1,Math.abs(S),Math.abs(W))&&Math.abs(T-C)<=N*Math.max(1,Math.abs(T),Math.abs(C))&&Math.abs(U-E)<=N*Math.max(1,Math.abs(U),Math.abs(E))&&Math.abs(A-D)<=N*Math.max(1,Math.abs(A),Math.abs(D))}const B=Object.freeze(Object.defineProperty({__proto__:null,add:w,copy:l,determinant:p,equals:z,exactEquals:m,frob:f,fromRotation:k,fromScaling:r,fromTranslation:u,identity:c,invert:n,mul:g,multiply:g,multiplyScalar:y,multiplyScalarAndAdd:x,rotate:q,scale:d,set:t,str:h,sub:v,
subtract:v,translate:e},Symbol.toStringTag,{value:"Module"}));b.add=w;b.copy=l;b.determinant=p;b.equals=z;b.exactEquals=m;b.frob=f;b.fromRotation=k;b.fromScaling=r;b.fromTranslation=u;b.identity=c;b.invert=n;b.mat2d=B;b.mul=g;b.multiply=g;b.multiplyScalar=y;b.multiplyScalarAndAdd=x;b.rotate=q;b.scale=d;b.set=t;b.str=h;b.sub=v;b.subtract=v;b.translate=e;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat2df64":function(){define(["exports"],function(b){function a(){return[1,
0,0,1,0,0]}function l(g){return[g[0],g[1],g[2],g[3],g[4],g[5]]}function c(g,q,d,e,k,r){return[g,q,d,e,k,r]}function t(g,q){return new Float64Array(g,q,6)}const n=a(),p=Object.freeze(Object.defineProperty({__proto__:null,IDENTITY:n,clone:l,create:a,createView:t,fromValues:c},Symbol.toStringTag,{value:"Module"}));b.IDENTITY=n;b.clone=l;b.create=a;b.createView=t;b.fromValues=c;b.mat2df64=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/ViewState":function(){define("../../chunks/tslib.es6 ../../Viewpoint ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/libs/gl-matrix-2/math/common ../../core/libs/gl-matrix-2/math/mat2d ../../core/libs/gl-matrix-2/factories/mat2df32 ../../core/libs/gl-matrix-2/factories/mat2df64 ../../core/libs/gl-matrix-2/math/mat3 ../../core/libs/gl-matrix-2/factories/mat3f32 ../../core/libs/gl-matrix-2/math/vec2 ../../core/libs/gl-matrix-2/factories/vec2f32 ../../core/libs/gl-matrix-2/factories/vec2f64 ../../core/libs/gl-matrix-2/types/vec2 ../../geometry/Extent ../../geometry/Point ../../geometry/support/normalizeUtils ./viewpointUtils".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u,h,f,w,v,y,x,m,z){var B;const A=[0,0];l=B=class extends l{constructor(D){super(D);this._viewpoint2D={center:w.create(),rotation:0,scale:0,spatialReference:void 0};this.center=[0,0];this.extent=new y;this.id=0;this.inverseTransform=k.create();this.scale=this.rotation=this.resolution=0;this.transform=k.create();this.transformNoRotation=k.create();this.displayMat3=u.create();this.displayViewMat3=u.create();this.viewMat3=u.create();this.viewMat2d=e.create();this.worldScreenWidth=
0;this.size=[0,0]}set pixelRatio(D){this._set("pixelRatio",D);this._update()}set size(D){this._set("size",D);this._update()}set viewpoint(D){if(D){const F=this._viewpoint2D,I=D.targetGeometry;F.center[0]=I.x;F.center[1]=I.y;F.rotation=D.rotation;F.scale=D.scale;F.spatialReference=I.spatialReference}this._update()}get visibleArea(){const [D,F]=this.size,I=this.toMap([0,0],0,0),S=this.toMap([0,0],0,F),T=this.toMap([0,0],D,F),U=this.toMap([0,0],D,0);return[I,S,T,U]}copy(D){const F=this.size,I=this.viewpoint;
I&&F?(this.viewpoint=z.copy(I,D.viewpoint),this._set("size",h.copy(F,D.size))):(this.viewpoint=D.viewpoint.clone(),this._set("size",[D.size[0],D.size[1]]));this._set("pixelRatio",D.pixelRatio);return this}clone(){return new B({size:this.size,viewpoint:this.viewpoint.clone(),pixelRatio:this.pixelRatio})}toMap(D,F,I){if(v.isVec2(F))return h.transformMat2d(D,F,this.inverseTransform);A[0]=F;A[1]=I;return h.transformMat2d(D,A,this.inverseTransform)}toScreen(D,F,I){if(v.isVec2(F))return h.transformMat2d(D,
F,this.transform);A[0]=F;A[1]=I;return h.transformMat2d(D,A,this.transform)}toScreenNoRotation(D,F,I){if(v.isVec2(F))return h.transformMat2d(D,F,this.transformNoRotation);A[0]=F;A[1]=I;return h.transformMat2d(D,A,this.transformNoRotation)}wrapMapCoordinate(D,F){h.copy(D,F);[F]=F;const [I]=this.center,{extent:S,spatialReference:T}=this;let {xmin:U,xmax:L}=S;if(T.isWrappable){const O=z.getWorldWidth(T)/2;U=Math.max(U,I-O);L=Math.min(L,I+O)}if(F<U||F>L)D[0]=m.getClosestDenormalizedXToReference(F,I,T);
return D}getScreenTransform(D,F){const {center:I}=this._viewpoint2D,S=this._get("pixelRatio")||1,T=this._get("size");z.getMatrix(D,I,T,F,0,S);return D}_update(){const {center:D,spatialReference:F,scale:I,rotation:S}=this._viewpoint2D,T=this._get("pixelRatio")||1,U=this._get("size"),L=new a({targetGeometry:new x(D[0],D[1],F),scale:I,rotation:S});this._set("viewpoint",L);if(U&&F&&I){this.resolution=z.getResolution(L);this.rotation=S;this.scale=I;this.spatialReference=F;h.copy(this.center,D);r.set(this.displayMat3,
0!==U[0]?2/U[0]:0,0,0,0,0!==U[1]?-2/U[1]:0,0,-1,1,1);var O=r.identity(this.viewMat3),W=f.fromValues(U[0]/2,U[1]/2),C=f.fromValues(-U[0]/2,-U[1]/2),E=q.toRadian(S);r.translate(O,O,W);r.rotate(O,O,E);r.translate(O,O,C);r.multiply(this.displayViewMat3,this.displayMat3,O);O=d.fromTranslation(this.viewMat2d,W);d.rotate(O,O,E);d.translate(O,O,C);z.getExtent(this.extent,L,U);z.getTransform(this.transform,L,U,T);d.invert(this.inverseTransform,this.transform);z.getTransformNoRotation(this.transformNoRotation,
L,U,T);this.worldScreenWidth=z.getWorldScreenWidth(this.spatialReference,this.resolution);this._set("id",this.id+1);this.notifyChange("visibleArea");return this}}};b.__decorate([c.property({readOnly:!0})],l.prototype,"id",void 0);b.__decorate([c.property({value:1,json:{write:!0}})],l.prototype,"pixelRatio",null);b.__decorate([c.property({json:{write:!0}})],l.prototype,"size",null);b.__decorate([c.property()],l.prototype,"spatialReference",void 0);b.__decorate([c.property({type:a,json:{write:!0}})],
l.prototype,"viewpoint",null);b.__decorate([c.property({readOnly:!0})],l.prototype,"visibleArea",null);return l=B=b.__decorate([g.subclass("esri.views.2d.ViewState")],l)})},"esri/core/libs/gl-matrix-2/factories/mat2df32":function(){define(["exports"],function(b){function a(){const q=new Float32Array(6);q[0]=1;q[3]=1;return q}function l(q){const d=new Float32Array(6);d[0]=q[0];d[1]=q[1];d[2]=q[2];d[3]=q[3];d[4]=q[4];d[5]=q[5];return d}function c(q,d,e,k,r,u){const h=new Float32Array(6);h[0]=q;h[1]=
d;h[2]=e;h[3]=k;h[4]=r;h[5]=u;return h}function t(q,d){return new Float32Array(q,d,6)}function n(q,d,e,k){const r=d[k];d=d[k+1];q[k]=e[0]*r+e[2]*d+e[4];q[k+1]=e[1]*r+e[3]*d+e[5]}function p(q,d,e,k=0,r=0,u=2){for(r=r||d.length/u;k<r;k++)n(q,d,e,k*u)}const g=Object.freeze(Object.defineProperty({__proto__:null,clone:l,create:a,createView:t,fromValues:c,transform:n,transformMany:p},Symbol.toStringTag,{value:"Module"}));b.clone=l;b.create=a;b.createView=t;b.fromValues=c;b.mat2df32=g;b.transform=n;b.transformMany=
p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/math/mat3":function(){define(["exports","./common"],function(b,a){function l(C,E){C[0]=E[0];C[1]=E[1];C[2]=E[2];C[3]=E[4];C[4]=E[5];C[5]=E[6];C[6]=E[8];C[7]=E[9];C[8]=E[10];return C}function c(C,E){C[0]=E[0];C[1]=E[1];C[2]=E[2];C[3]=E[3];C[4]=E[4];C[5]=E[5];C[6]=E[6];C[7]=E[7];C[8]=E[8];return C}function t(C,E,N,X,J,G,M,V,Z,ca){C[0]=E;C[1]=N;C[2]=X;C[3]=J;C[4]=G;C[5]=M;C[6]=V;C[7]=Z;C[8]=ca;return C}function n(C){C[0]=
1;C[1]=0;C[2]=0;C[3]=0;C[4]=1;C[5]=0;C[6]=0;C[7]=0;C[8]=1;return C}function p(C,E){if(C===E){const N=E[1],X=E[2],J=E[5];C[1]=E[3];C[2]=E[6];C[3]=N;C[5]=E[7];C[6]=X;C[7]=J}else C[0]=E[0],C[1]=E[3],C[2]=E[6],C[3]=E[1],C[4]=E[4],C[5]=E[7],C[6]=E[2],C[7]=E[5],C[8]=E[8];return C}function g(C,E){const N=E[0],X=E[1],J=E[2],G=E[3],M=E[4],V=E[5],Z=E[6],ca=E[7];E=E[8];const ia=E*M-V*ca,ea=-E*G+V*Z,H=ca*G-M*Z;let K=N*ia+X*ea+J*H;if(!K)return null;K=1/K;C[0]=ia*K;C[1]=(-E*X+J*ca)*K;C[2]=(V*X-J*M)*K;C[3]=ea*K;
C[4]=(E*N-J*Z)*K;C[5]=(-V*N+J*G)*K;C[6]=H*K;C[7]=(-ca*N+X*Z)*K;C[8]=(M*N-X*G)*K;return C}function q(C,E){const N=E[0],X=E[1],J=E[2],G=E[3],M=E[4],V=E[5],Z=E[6],ca=E[7];E=E[8];C[0]=M*E-V*ca;C[1]=J*ca-X*E;C[2]=X*V-J*M;C[3]=V*Z-G*E;C[4]=N*E-J*Z;C[5]=J*G-N*V;C[6]=G*ca-M*Z;C[7]=X*Z-N*ca;C[8]=N*M-X*G;return C}function d(C){const E=C[3],N=C[4],X=C[5],J=C[6],G=C[7],M=C[8];return C[0]*(M*N-X*G)+C[1]*(-M*E+X*J)+C[2]*(G*E-N*J)}function e(C,E,N){const X=E[0],J=E[1],G=E[2],M=E[3],V=E[4],Z=E[5],ca=E[6],ia=E[7];
E=E[8];const ea=N[0],H=N[1],K=N[2],P=N[3],R=N[4],Y=N[5],ba=N[6],fa=N[7];N=N[8];C[0]=ea*X+H*M+K*ca;C[1]=ea*J+H*V+K*ia;C[2]=ea*G+H*Z+K*E;C[3]=P*X+R*M+Y*ca;C[4]=P*J+R*V+Y*ia;C[5]=P*G+R*Z+Y*E;C[6]=ba*X+fa*M+N*ca;C[7]=ba*J+fa*V+N*ia;C[8]=ba*G+fa*Z+N*E;return C}function k(C,E,N){const X=E[0],J=E[1],G=E[2],M=E[3],V=E[4],Z=E[5],ca=E[6],ia=E[7];E=E[8];const ea=N[0];N=N[1];C[0]=X;C[1]=J;C[2]=G;C[3]=M;C[4]=V;C[5]=Z;C[6]=ea*X+N*M+ca;C[7]=ea*J+N*V+ia;C[8]=ea*G+N*Z+E;return C}function r(C,E,N){const X=E[0],J=E[1],
G=E[2],M=E[3],V=E[4],Z=E[5],ca=E[6],ia=E[7];E=E[8];const ea=Math.sin(N);N=Math.cos(N);C[0]=N*X+ea*M;C[1]=N*J+ea*V;C[2]=N*G+ea*Z;C[3]=N*M-ea*X;C[4]=N*V-ea*J;C[5]=N*Z-ea*G;C[6]=ca;C[7]=ia;C[8]=E;return C}function u(C,E,N){const X=N[0],J=N[1];N=N[2];C[0]=X*E[0];C[1]=X*E[1];C[2]=X*E[2];C[3]=J*E[3];C[4]=J*E[4];C[5]=J*E[5];C[6]=N*E[6];C[7]=N*E[7];C[8]=N*E[8];return C}function h(C,E,N){const X=N[0];N=N[1];C[0]=X*E[0];C[1]=X*E[1];C[2]=X*E[2];C[3]=N*E[3];C[4]=N*E[4];C[5]=N*E[5];return C}function f(C,E){C[0]=
1;C[1]=0;C[2]=0;C[3]=0;C[4]=1;C[5]=0;C[6]=E[0];C[7]=E[1];C[8]=1;return C}function w(C,E){const N=Math.sin(E);E=Math.cos(E);C[0]=E;C[1]=N;C[2]=0;C[3]=-N;C[4]=E;C[5]=0;C[6]=0;C[7]=0;C[8]=1;return C}function v(C,E){C[0]=E[0];C[1]=0;C[2]=0;C[3]=0;C[4]=E[1];C[5]=0;C[6]=0;C[7]=0;C[8]=1;return C}function y(C,E){C[0]=E[0];C[1]=E[1];C[2]=0;C[3]=E[2];C[4]=E[3];C[5]=0;C[6]=E[4];C[7]=E[5];C[8]=1;return C}function x(C,E){var N=E[0],X=E[1],J=E[2];E=E[3];var G=N+N,M=X+X;const V=J+J;N*=G;const Z=X*G;X*=M;const ca=
J*G,ia=J*M;J*=V;G*=E;M*=E;E*=V;C[0]=1-X-J;C[3]=Z-E;C[6]=ca+M;C[1]=Z+E;C[4]=1-N-J;C[7]=ia-G;C[2]=ca-M;C[5]=ia+G;C[8]=1-N-X;return C}function m(C,E){const N=E[0],X=E[1],J=E[2],G=E[4],M=E[5],V=E[6],Z=E[8],ca=E[9];E=E[10];const ia=E*M-V*ca,ea=-E*G+V*Z,H=ca*G-M*Z;var K=N*ia+X*ea+J*H;if(!K)return null;K=1/K;C[0]=ia*K;C[1]=(-E*X+J*ca)*K;C[2]=(V*X-J*M)*K;C[3]=ea*K;C[4]=(E*N-J*Z)*K;C[5]=(-V*N+J*G)*K;C[6]=H*K;C[7]=(-ca*N+X*Z)*K;C[8]=(M*N-X*G)*K;return C}function z(C,E){const N=E[0],X=E[1],J=E[2],G=E[3],M=E[4],
V=E[5],Z=E[6],ca=E[7];var ia=E[8],ea=E[9],H=E[10],K=E[11];const P=E[12],R=E[13],Y=E[14];E=E[15];const ba=N*V-X*M,fa=N*Z-J*M,ma=N*ca-G*M,ha=X*Z-J*V,ja=X*ca-G*V,Q=J*ca-G*Z,aa=ia*R-ea*P,da=ia*Y-H*P;ia=ia*E-K*P;const ka=ea*Y-H*R;ea=ea*E-K*R;H=H*E-K*Y;K=ba*H-fa*ea+ma*ka+ha*ia-ja*da+Q*aa;if(!K)return null;K=1/K;C[0]=(V*H-Z*ea+ca*ka)*K;C[1]=(Z*ia-M*H-ca*da)*K;C[2]=(M*ea-V*ia+ca*aa)*K;C[3]=(J*ea-X*H-G*ka)*K;C[4]=(N*H-J*ia+G*da)*K;C[5]=(X*ia-N*ea-G*aa)*K;C[6]=(R*Q-Y*ja+E*ha)*K;C[7]=(Y*ma-P*Q-E*fa)*K;C[8]=
(P*ja-R*ma+E*ba)*K;return C}function B(C,E,N){C[0]=2/E;C[1]=0;C[2]=0;C[3]=0;C[4]=-2/N;C[5]=0;C[6]=-1;C[7]=1;C[8]=1;return C}function A(C){return"mat3("+C[0]+", "+C[1]+", "+C[2]+", "+C[3]+", "+C[4]+", "+C[5]+", "+C[6]+", "+C[7]+", "+C[8]+")"}function D(C){return Math.sqrt(C[0]**2+C[1]**2+C[2]**2+C[3]**2+C[4]**2+C[5]**2+C[6]**2+C[7]**2+C[8]**2)}function F(C,E,N){C[0]=E[0]+N[0];C[1]=E[1]+N[1];C[2]=E[2]+N[2];C[3]=E[3]+N[3];C[4]=E[4]+N[4];C[5]=E[5]+N[5];C[6]=E[6]+N[6];C[7]=E[7]+N[7];C[8]=E[8]+N[8];return C}
function I(C,E,N){C[0]=E[0]-N[0];C[1]=E[1]-N[1];C[2]=E[2]-N[2];C[3]=E[3]-N[3];C[4]=E[4]-N[4];C[5]=E[5]-N[5];C[6]=E[6]-N[6];C[7]=E[7]-N[7];C[8]=E[8]-N[8];return C}function S(C,E,N){C[0]=E[0]*N;C[1]=E[1]*N;C[2]=E[2]*N;C[3]=E[3]*N;C[4]=E[4]*N;C[5]=E[5]*N;C[6]=E[6]*N;C[7]=E[7]*N;C[8]=E[8]*N;return C}function T(C,E,N,X){C[0]=E[0]+N[0]*X;C[1]=E[1]+N[1]*X;C[2]=E[2]+N[2]*X;C[3]=E[3]+N[3]*X;C[4]=E[4]+N[4]*X;C[5]=E[5]+N[5]*X;C[6]=E[6]+N[6]*X;C[7]=E[7]+N[7]*X;C[8]=E[8]+N[8]*X;return C}function U(C,E){return C[0]===
E[0]&&C[1]===E[1]&&C[2]===E[2]&&C[3]===E[3]&&C[4]===E[4]&&C[5]===E[5]&&C[6]===E[6]&&C[7]===E[7]&&C[8]===E[8]}function L(C,E){const N=C[0],X=C[1],J=C[2],G=C[3],M=C[4],V=C[5],Z=C[6],ca=C[7];C=C[8];const ia=E[0],ea=E[1],H=E[2],K=E[3],P=E[4],R=E[5],Y=E[6],ba=E[7];E=E[8];const fa=a.getEpsilon();return Math.abs(N-ia)<=fa*Math.max(1,Math.abs(N),Math.abs(ia))&&Math.abs(X-ea)<=fa*Math.max(1,Math.abs(X),Math.abs(ea))&&Math.abs(J-H)<=fa*Math.max(1,Math.abs(J),Math.abs(H))&&Math.abs(G-K)<=fa*Math.max(1,Math.abs(G),
Math.abs(K))&&Math.abs(M-P)<=fa*Math.max(1,Math.abs(M),Math.abs(P))&&Math.abs(V-R)<=fa*Math.max(1,Math.abs(V),Math.abs(R))&&Math.abs(Z-Y)<=fa*Math.max(1,Math.abs(Z),Math.abs(Y))&&Math.abs(ca-ba)<=fa*Math.max(1,Math.abs(ca),Math.abs(ba))&&Math.abs(C-E)<=fa*Math.max(1,Math.abs(C),Math.abs(E))}function O(C){const E=a.getEpsilon(),N=C[0],X=C[1],J=C[2],G=C[3],M=C[4],V=C[5],Z=C[6],ca=C[7];C=C[8];return Math.abs(1-(N*N+G*G+Z*Z))<=E&&Math.abs(1-(X*X+M*M+ca*ca))<=E&&Math.abs(1-(J*J+V*V+C*C))<=E}const W=Object.freeze(Object.defineProperty({__proto__:null,
add:F,adjoint:q,copy:c,determinant:d,equals:L,exactEquals:U,frob:D,fromMat2d:y,fromMat4:l,fromQuat:x,fromRotation:w,fromScaling:v,fromTranslation:f,identity:n,invert:g,isOrthoNormal:O,mul:e,multiply:e,multiplyScalar:S,multiplyScalarAndAdd:T,normalFromMat4:z,normalFromMat4Legacy:m,projection:B,rotate:r,scale:u,scaleByVec2:h,set:t,str:A,sub:I,subtract:I,translate:k,transpose:p},Symbol.toStringTag,{value:"Module"}));b.add=F;b.adjoint=q;b.copy=c;b.determinant=d;b.equals=L;b.exactEquals=U;b.frob=D;b.fromMat2d=
y;b.fromMat4=l;b.fromQuat=x;b.fromRotation=w;b.fromScaling=v;b.fromTranslation=f;b.identity=n;b.invert=g;b.isOrthoNormal=O;b.mat3=W;b.mul=e;b.multiply=e;b.multiplyScalar=S;b.multiplyScalarAndAdd=T;b.normalFromMat4=z;b.normalFromMat4Legacy=m;b.projection=B;b.rotate=r;b.scale=u;b.scaleByVec2=h;b.set=t;b.str=A;b.sub=I;b.subtract=I;b.translate=k;b.transpose=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/mat3f32":function(){define(["exports"],function(b){function a(){const p=
new Float32Array(9);p[0]=1;p[4]=1;p[8]=1;return p}function l(p){const g=new Float32Array(9);g[0]=p[0];g[1]=p[1];g[2]=p[2];g[3]=p[3];g[4]=p[4];g[5]=p[5];g[6]=p[6];g[7]=p[7];g[8]=p[8];return g}function c(p,g,q,d,e,k,r,u,h){const f=new Float32Array(9);f[0]=p;f[1]=g;f[2]=q;f[3]=d;f[4]=e;f[5]=k;f[6]=r;f[7]=u;f[8]=h;return f}function t(p,g){return new Float32Array(p,g,9)}const n=Object.freeze(Object.defineProperty({__proto__:null,clone:l,create:a,createView:t,fromValues:c},Symbol.toStringTag,{value:"Module"}));
b.clone=l;b.create=a;b.createView=t;b.fromValues=c;b.mat3f32=n;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/factories/vec2f32":function(){define(["exports"],function(b){function a(){return new Float32Array(2)}function l(h){const f=new Float32Array(2);f[0]=h[0];f[1]=h[1];return f}function c(h,f){const w=new Float32Array(2);w[0]=h;w[1]=f;return w}function t(h,f){return new Float32Array(h,f,2)}function n(){return a()}function p(){return c(1,1)}function g(){return c(1,
0)}function q(){return c(0,1)}const d=a(),e=p(),k=g(),r=q(),u=Object.freeze(Object.defineProperty({__proto__:null,ONES:e,UNIT_X:k,UNIT_Y:r,ZEROS:d,clone:l,create:a,createView:t,fromValues:c,ones:p,unitX:g,unitY:q,zeros:n},Symbol.toStringTag,{value:"Module"}));b.ONES=e;b.UNIT_X=k;b.UNIT_Y=r;b.ZEROS=d;b.clone=l;b.create=a;b.createView=t;b.fromValues=c;b.ones=p;b.unitX=g;b.unitY=q;b.vec2f32=u;b.zeros=n;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/core/libs/gl-matrix-2/types/vec2":function(){define(["exports"],
function(b){function a(c){return c instanceof Float32Array&&2<=c.length}function l(c){return Array.isArray(c)&&2<=c.length}b.isVec2=function(c){return a(c)||l(c)};b.isVec2f32=a;b.isVec2f64=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/RenderState":function(){define(["exports"],function(b){b.RenderState=void 0;var a=b.RenderState||(b.RenderState={});a[a.ANIMATING=0]="ANIMATING";a[a.INTERACTING=1]="INTERACTING";a[a.IDLE=2]="IDLE";Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/views/support/Scheduler":function(){define("exports ../../core/Handles ../../core/has ../../core/Logger ../../core/maybe ../../core/PerformanceSampler ../../core/PooledArray ../../core/promiseUtils ../../core/reactiveUtils ../../core/signal ../../core/time ../../layers/support/PromiseQueue ./debugFlags ./RenderState ./Yield".split(" "),function(b,a,l,c,t,n,p,g,q,d,e,k,r,u,h){function f(I){return w.has(I)?w.get(I):"number"===typeof I?I:1}b.TaskPriority=void 0;(function(I){I.RESOURCE_CONTROLLER_IMMEDIATE=
"immediate";I.RESOURCE_CONTROLLER="schedule";I.SLIDE="slide";I.STREAM_DATA_LOADER="stream loader";I.ELEVATION_QUERY="elevation query";I.TERRAIN_SURFACE="terrain";I.SURFACE_GEOMETRY_UPDATES="surface geometry updates";I.LOD_RENDERER="LoD renderer";I.GRAPHICS_CORE="Graphics3D";I.I3S_CONTROLLER="I3S";I.POINT_CLOUD_LAYER="point cloud";I.FEATURE_TILE_FETCHER="feature fetcher";I.OVERLAY="overlay";I.STAGE="stage";I.GRAPHICS_DECONFLICTOR="graphics deconflictor";I.FILTER_VISIBILITY="Graphics3D filter visibility";
I.SCALE_VISIBILITY="Graphics3D scale visibility";I.FRUSTUM_VISIBILITY="Graphics3D frustum visibility";I.POINT_OF_INTEREST_FREQUENT="POI frequent";I.POINT_OF_INTEREST_INFREQUENT="POI infrequent";I.LABELER="labeler";I.FEATURE_QUERY_ENGINE="feature query";I.FEATURE_TILE_TREE="feature tile tree";I.FEATURE_TILE_TREE_ACTIVE="fast feature tile tree";I.ELEVATION_ALIGNMENT="elevation alignment";I.ELEVATION_ALIGNMENT_SCENE="elevation alignment scene";I.TEXT_TEXTURE_ATLAS="text texture atlas";I.TEXTURE_UNLOAD=
"texture unload";I.LINE_OF_SIGHT_TOOL="line of sight tool";I.LINE_OF_SIGHT_TOOL_INTERACTIVE="interactive line of sight tool";I.ELEVATION_PROFILE="elevation profile";I.SNAPPING="snapping";I.SHADOW_ACCUMULATOR="shadow accumulator";I.CLOUDS_GENERATOR="clouds generator";I.MAPVIEW_FETCH_QUEUE="mapview fetch queue";I.MAPVIEW_LAYERVIEW_UPDATE="mapview layerview update";I.MAPVIEW_VECTOR_TILE_PARSING_QUEUE="mapview vector tile parsing queue";I[I.NONE=0]="NONE";I[I.TEST_PRIO=1]="TEST_PRIO"})(b.TaskPriority||
(b.TaskPriority={}));const w=new Map([[b.TaskPriority.RESOURCE_CONTROLLER_IMMEDIATE,0],[b.TaskPriority.RESOURCE_CONTROLLER,4],[b.TaskPriority.SLIDE,0],[b.TaskPriority.STREAM_DATA_LOADER,0],[b.TaskPriority.ELEVATION_QUERY,0],[b.TaskPriority.TERRAIN_SURFACE,1],[b.TaskPriority.SURFACE_GEOMETRY_UPDATES,1],[b.TaskPriority.LOD_RENDERER,2],[b.TaskPriority.GRAPHICS_CORE,2],[b.TaskPriority.I3S_CONTROLLER,2],[b.TaskPriority.POINT_CLOUD_LAYER,2],[b.TaskPriority.FEATURE_TILE_FETCHER,2],[b.TaskPriority.CLOUDS_GENERATOR,
2],[b.TaskPriority.OVERLAY,4],[b.TaskPriority.STAGE,4],[b.TaskPriority.GRAPHICS_DECONFLICTOR,4],[b.TaskPriority.FILTER_VISIBILITY,4],[b.TaskPriority.SCALE_VISIBILITY,4],[b.TaskPriority.FRUSTUM_VISIBILITY,4],[b.TaskPriority.POINT_OF_INTEREST_FREQUENT,6],[b.TaskPriority.POINT_OF_INTEREST_INFREQUENT,30],[b.TaskPriority.LABELER,8],[b.TaskPriority.FEATURE_QUERY_ENGINE,8],[b.TaskPriority.FEATURE_TILE_TREE,16],[b.TaskPriority.FEATURE_TILE_TREE_ACTIVE,0],[b.TaskPriority.ELEVATION_ALIGNMENT,12],[b.TaskPriority.ELEVATION_ALIGNMENT_SCENE,
14],[b.TaskPriority.TEXT_TEXTURE_ATLAS,12],[b.TaskPriority.TEXTURE_UNLOAD,12],[b.TaskPriority.LINE_OF_SIGHT_TOOL,16],[b.TaskPriority.LINE_OF_SIGHT_TOOL_INTERACTIVE,0],[b.TaskPriority.SNAPPING,0],[b.TaskPriority.SHADOW_ACCUMULATOR,30],[b.TaskPriority.MAPVIEW_FETCH_QUEUE,0],[b.TaskPriority.MAPVIEW_LAYERVIEW_UPDATE,2],[b.TaskPriority.MAPVIEW_VECTOR_TILE_PARSING_QUEUE,0]]),v=e.Milliseconds(6.5),y=e.Milliseconds(1),x=e.Milliseconds(30),m=e.Milliseconds(1E3/30),z=e.Milliseconds(100);var B;(function(I){class S{get updating(){return this._updating.value}_updatingChanged(){this._updating.value=
this._tasks.some(L=>L.needsUpdate)}constructor(){this._updating=d.signal(!0);this._microTaskQueued=!1;this._frameNumber=0;this.performanceInfo={total:new n("total"),tasks:new Map};this._frameTaskTimes=new Map;this._budget=new U;this._state=u.RenderState.INTERACTING;this._tasks=new p;this._runQueue=new p;this._load=0;this._idleStateCallbacks=new p;this._debug=this._forceTask=this._idleUpdatesStartFired=!1;this._debugHandle=q.watch(()=>r.SCHEDULER_LOG_SLOW_TASKS,L=>this._debug=L,q.initial);for(const L of Object.keys(b.TaskPriority))this.performanceInfo.tasks.set(b.TaskPriority[L],
new n(b.TaskPriority[L]))}destroy(){this._tasks.toArray().forEach(L=>L.remove());this._tasks.clear();t.removeMaybe(this._debugHandle);this._microTaskQueued=!1;this._updatingChanged()}taskRunningChanged(L){this._updatingChanged();L&&0<this._budget.remaining&&!this._microTaskQueued&&(this._microTaskQueued=!0,queueMicrotask(()=>{this._microTaskQueued&&(this._microTaskQueued=!1,0<this._budget.remaining&&this._schedule()&&this._runFrame())}))}registerTask(L,O){O=new T(this,L,O);this._tasks.push(O);this._updatingChanged();
this.performanceInfo.tasks.has(L)||this.performanceInfo.tasks.set(L,new n(L));return O}registerIdleStateCallbacks(L,O){const W={idleBegin:L,idleEnd:O};this._idleStateCallbacks.push(W);this.state===u.RenderState.IDLE&&this._idleUpdatesStartFired&&W.idleBegin();const C=this;return{remove:()=>this._removeIdleStateCallbacks(W),set idleBegin(E){C._idleUpdatesStartFired&&(W.idleEnd(),C._state===u.RenderState.IDLE&&E());W.idleBegin=E},set idleEnd(E){W.idleEnd=E}}}get load(){return this._load}set state(L){this._state!==
L&&(this._state=L,this.state!==u.RenderState.IDLE&&this._idleUpdatesStartFired&&(this._idleUpdatesStartFired=!1,this._idleStateCallbacks.forAll(O=>O.idleEnd())))}get state(){return this._state}frame(L){this._startFrameTaskTimes();if(L=this._updateBudget(L)){const O=this._budget.now();this._runFrame();this._recordFrameTaskTimes(this._budget.now()-O)}else this._recordFrameTaskTimes(0);return L}_updateBudget(L){this._test&&(this._test.usedBudget=0);++this._frameNumber;let O=v,W=L.frameDuration,C=y;switch(this.state){case u.RenderState.IDLE:O=
e.Milliseconds(0);W=e.Milliseconds(Math.max(z,L.frameDuration));C=x;break;case u.RenderState.INTERACTING:W=e.Milliseconds(Math.max(m,L.frameDuration))}W=e.Milliseconds(W-L.elapsedFrameTime-O);if(this.state!==u.RenderState.IDLE&&W<y&&!this._forceTask)return this._forceTask=!0,!1;W=e.Milliseconds(Math.max(W,C));this._budget.reset(W,this.state);this._updateLoad();return this._schedule()}_runFrame(){this._microTaskQueued=this._forceTask=!1;switch(this.state){case u.RenderState.IDLE:this._idleUpdatesStartFired||
(this._idleUpdatesStartFired=!0,this._idleStateCallbacks.forAll(L=>L.idleBegin()));this._runIdle();break;case u.RenderState.INTERACTING:this._runInteracting();break;default:this._runAnimating()}this._test&&(this._test.usedBudget=this._budget.elapsed)}stopFrame(){this._budget.reset(e.Milliseconds(0),this._state);this._budget.madeProgress()}_removeIdleStateCallbacks(L){this._idleUpdatesStartFired&&L.idleEnd();this._idleStateCallbacks.removeUnordered(L)}removeTask(L){this._tasks.removeUnordered(L);this._runQueue.removeUnordered(L);
this._updatingChanged()}_updateTask(L){this._tasks.forAll(O=>{O.name===L&&O.setPriority(L)})}_getState(L){if(this._runQueue.some(W=>W.name===L))return b.TaskState.SCHEDULED;let O=b.TaskState.IDLE;this._tasks.forAll(W=>{W.name===L&&W.needsUpdate&&(1>=W.schedulePriority?O=b.TaskState.READY:O!==b.TaskState.READY&&(O=b.TaskState.WAITING))});return O}_getRuntime(L){let O=0;this._tasks.forAll(W=>{W.name===L&&(O+=W.runtime)});return O}_resetRuntimes(){this._tasks.forAll(L=>L.runtime=0)}_getRunning(){const L=
new Map;this._tasks.forAll(W=>{W.needsUpdate&&L.set(W.name,(L.get(W.name)||0)+1)});if(0===L.size)return null;let O="";L.forEach((W,C)=>{O=1<W?O+` ${W}x ${C}`:O+` ${C}`});return O}_runIdle(){this._run()}_runInteracting(){this._run()}_runAnimating(){this._run()}_updateLoad(){const L=this._tasks.reduce((O,W)=>W.needsUpdate?++O:O,0);this._load=.9*this._load+L*(1-.9)}_schedule(){this._runQueue.filterInPlace(L=>{if(L.needsUpdate)return!0;L.schedulePriority=L.basePriority;return!1});for(this._tasks.forAll(L=>
{0===L.basePriority&&L.needsUpdate&&!this._runQueue.includes(L)&&L.blockFrame!==this._frameNumber&&this._runQueue.unshift(L)});0===this._runQueue.length;){let L=!1;this._tasks.forAll(O=>{if(O.needsUpdate&&0!==O.schedulePriority&&0!==O.basePriority&&O.blockFrame!==this._frameNumber)switch(L=!0,O.schedulePriority){case 1:O.schedulePriority=0;this._runQueue.push(O);break;default:--O.schedulePriority}});if(!L)return this._updatingChanged(),!1}this._updatingChanged();return!0}_run(){do for(;0<this._runQueue.length;){var L=
this._budget.now();const O=this._runQueue.pop();this._budget.resetProgress();try{O.task.runTask(this._budget)===h.Yield&&(O.blockFrame=this._frameNumber)}catch(W){c.getLogger("esri.views.support.Scheduler").error(`Exception in task "${O.name}"`,W),O.blockFrame=this._frameNumber}!this._budget.hasProgressed&&O.blockFrame!==this._frameNumber&&O.needsUpdate&&(O.blockFrame=this._frameNumber);O.schedulePriority=O.basePriority;L=this._budget.now()-L;O.runtime+=L;this._frameTaskTimes.set(O.priority,this._frameTaskTimes.get(O.priority)+
L);if(0>=this._budget.remaining){this._updatingChanged();return}}while(this._schedule());this._updatingChanged()}_startFrameTaskTimes(){for(const L of Object.keys(b.TaskPriority))this._frameTaskTimes.set(b.TaskPriority[L],0)}_recordFrameTaskTimes(L){this._frameTaskTimes.forEach((O,W)=>this.performanceInfo.tasks.get(W).push(O));this.performanceInfo.total.push(L)}get test(){return this._test}}I.Scheduler=S;class T{get task(){return this._task.value}get updating(){return this._queue.running}constructor(L,
O,W){this._scheduler=L;this.name=O;this.runtime=this.blockFrame=0;this._queue=new k.PromiseQueue;this._handles=new a;this.schedulePriority=this._basePriority=f(O);this._task=d.signal(null!=W?W:this._queue);this._handles.add(q.when(()=>this.task.running,C=>L.taskRunningChanged(C)))}remove(){this.processQueue(A);this._scheduler.removeTask(this);this.schedule=F.schedule;this.reschedule=F.reschedule;this._handles.destroy()}get basePriority(){return this._basePriority}setPriority(L){if(this.name!==L){this.name=
L;L=f(L);if(0===this._basePriority||0!==this.schedulePriority)this.schedulePriority=L;this._basePriority=L}}get priority(){return this.name}set priority(L){this.setPriority(L)}get needsUpdate(){return this.updating||this.task.running}schedule(L,O,W){return this._queue.push(L,O,W)}reschedule(L,O,W){return this._queue.unshift(L,O,W)}processQueue(L){return this._queue.runTask(L)}}class U{constructor(){this._begin="undefined"!==typeof performance?performance.now():0;this._budget=0;this._state=u.RenderState.IDLE;
this._progressed=this._done=!1;this._enabled=!0}run(L){if(this.done)return!1;!0===L()&&this.madeProgress();return!0}get done(){return this._done}get budget(){return this._budget}madeProgress(){this._progressed=!0;return this._done=this.elapsed>=this._budget&&this._enabled}get state(){return this._state}get enabled(){return this._enabled}set enabled(L){this._enabled=L}reset(L,O){this._begin=this.now();this._budget=L;this._state=O;this.resetProgress()}get remaining(){return Math.max(this._budget-this.elapsed,
0)}now(){return performance.now()}get elapsed(){return this.now()-this._begin}resetProgress(){this._done=this._progressed=!1}get hasProgressed(){return this._progressed}}I.Budget=U})(B||={});b.TaskState=void 0;(function(I){I.SCHEDULED="s";I.READY="r";I.WAITING="w";I.IDLE="i"})(b.TaskState||(b.TaskState={}));const A=(()=>{const I=new B.Budget;I.enabled=!1;return I})();class D{remove(){}processQueue(){}schedule(I,S,T){try{if(g.isAborted(S)){const U=g.createAbortError();return T?Promise.resolve(T(U)):
Promise.reject(U)}return g.when(I(A))}catch(U){return Promise.reject(U)}}reschedule(I,S,T){return this.schedule(I,S,T)}}const F=new D;b.ImmediateTask=F;b.getTaskPriority=f;b.newScheduler=function(){return new B.Scheduler};b.noBudget=A;b.taskPriorities=w;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/layers/support/PromiseQueue":function(){define(["exports","../../core/promiseUtils","../../core/signal","../../views/support/Yield"],function(b,a,l,c){class t{constructor(){this._tasks=
[];this._runningTasks=l.signal(0)}get length(){return this._tasks.length}get running(){return 0<this._runningTasks.value}destroy(){this.cancelAll()}runTask(p){if(0===this.length)return c.Yield;for(;!p.done&&this._process(p);)p.madeProgress()}push(p,g,q){++this._runningTasks.value;return(new Promise((d,e)=>this._tasks.push(new n(d,e,p,g,q)))).finally(()=>--this._runningTasks.value)}unshift(p,g,q){++this._runningTasks.value;return(new Promise((d,e)=>this._tasks.unshift(new n(d,e,p,g,q)))).finally(()=>
--this._runningTasks.value)}_process(p){if(0===this._tasks.length)return!1;const g=this._tasks.shift();try{const q=a.isAborted(g.signal);if(q&&!g.abortCallback)g.reject(a.createAbortError());else{const d=q?g.abortCallback?.(a.createAbortError()):g.callback(p);a.isPromiseLike(d)?d.then(g.resolve,g.reject):g.resolve(d)}}catch(q){g.reject(q)}return!0}cancelAll(){const p=a.createAbortError();for(const g of this._tasks)if(g.abortCallback){const q=g.abortCallback(p);g.resolve(q)}else g.reject(p);this._tasks.length=
0}}class n{constructor(p,g,q,d,e){this.resolve=p;this.reject=g;this.callback=q;this.signal=d;this.abortCallback=e}}b.PromiseQueue=t;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/Yield":function(){define(["exports"],function(b){const a=Symbol("Yield");b.Yield=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/debugFlags":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,l,c,t,n,p){a=class extends a{constructor(){super(...arguments);this.FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES=this.SCHEDULER_LOG_SLOW_TASKS=!1}};b.__decorate([l.property()],a.prototype,"SCHEDULER_LOG_SLOW_TASKS",void 0);b.__decorate([l.property()],a.prototype,"FEATURE_SERVICE_SNAPPING_SOURCE_TILE_TREE_SHOW_TILES",void 0);a=b.__decorate([p.subclass("esri.views.support.debugFlags")],a);return new a})},"esri/views/2d/GoToManager":function(){define("exports ../../chunks/tslib.es6 ../../core/a11yUtils ../../core/Accessor ../../core/Error ../../core/Logger ../../core/promiseUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../ViewAnimation ./viewpointUtils".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u){b.GoToManager=class extends c{constructor(h){super(h);this._gotoTask=null}destroy(){this._gotoTask=null}async goTo(h,f){if(h){var w=new r;this.view.animation=w;await g.whenOnce(()=>this.view.ready,f);var v={...f,animate:f?.animate??!l.prefersReducedMotion(),animationMode:f?.animationMode??"auto"},{extent:y,spatialReference:x,size:m,viewpoint:z,constraints:B,padding:A,allLayerViews:D}=this.view;h=u.create(h,{extent:y,spatialReference:x,size:m,viewpoint:z,constraints:B,
padding:A,allLayerViews:D,pickClosestTarget:f?.pickClosestTarget??!0});w?.update(h);this._gotoTask={};return v.animate?this._gotoAnimated(h,v):this._gotoImmediate(h,v)}n.getLogger(this).error("#goTo()","target cannot be null or undefined")}_gotoImmediate(h,f){const w=this._gotoTask,v=this.view.animation;h=h.then(y=>{p.throwIfAborted(f);if(w!==this._gotoTask)throw new t("view:goto-interrupted","Goto was interrupted");this.view.viewpoint=v.target=y;v.finish()});return this._cancellableGoTo(w,v,h,f)}_gotoAnimated(h,
f){const w=this._gotoTask,v=this.view.animation;if(!v)return Promise.resolve();h=h.then(y=>{p.throwIfAborted(f);if(w!==this._gotoTask)throw new t("view:goto-interrupted","Goto was interrupted");v.update(y);this.view.animationManager.animate(v,this.view.viewpoint,f);return v.when().then(()=>{},()=>{})});return this._cancellableGoTo(w,v,h,f)}_cancellableGoTo(h,f,w,v){const y=()=>h===this._gotoTask;return p.whenOrAbort(w,v).finally(()=>{y()&&(f.done||f.stop())})}};a.__decorate([q.property({constructOnly:!0})],
b.GoToManager.prototype,"view",void 0);b.GoToManager=a.__decorate([k.subclass("esri.views.2d.GoToManager")],b.GoToManager);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/MapViewConstraints":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/Collection ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/Polygon ../../layers/support/LOD ./constraints/GeometryConstraint ./constraints/RotationConstraint ./constraints/ZoomConstraint".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u){t={base:null,key:"type",typeMap:{extent:q,polygon:d}};a=class extends a{constructor(h){super(h);this.lods=null;this.maxScale=this.minScale=0;this.maxZoom=this.minZoom=-1;this.snapToZoom=this.rotationEnabled=!0;this.customConstraints=new l}destroy(){this.view=null}get effectiveLODs(){return this._zoom.effectiveLODs}get effectiveMinScale(){return this._zoom.effectiveMinScale}get effectiveMaxScale(){return this._zoom.effectiveMaxScale}get effectiveMinZoom(){return this._zoom.effectiveMinZoom}get effectiveMaxZoom(){return this._zoom.effectiveMaxZoom}set geometry(h){h?
this._set("geometry",h):this._set("geometry",null)}get version(){return`${this._zoom?.uid}/${this._rotation?.uid}/${this._geometry?.uid}`}get _geometry(){const h=this._get("_geometry");return h&&this.geometry===h.geometry&&this.view?.constraintsInfo.spatialReference===h.spatialReference?h:new k.GeometryConstraint({geometry:this.geometry,spatialReference:this.view?.constraintsInfo.spatialReference})}get _rotation(){return new r({rotationEnabled:this.rotationEnabled})}get _zoom(){const h=this._get("_zoom"),
f=this.lods||this.view?.constraintsInfo.lods,w=this.minZoom,v=this.maxZoom,y=this.minScale,x=this.maxScale,m=this.snapToZoom;return h&&h.lods===f&&h.minZoom===w&&h.maxZoom===v&&h.minScale===y&&h.maxScale===x&&h.snapToZoom===m?h:new u({lods:f,minZoom:w,maxZoom:v,minScale:y,maxScale:x,snapToZoom:m})}canZoomInTo(h){const f=this.effectiveMaxScale;return 0===f||h>=f}canZoomOutTo(h){const f=this.effectiveMinScale;return 0===f||h<=f}constrain(h,f){this._zoom.constrain(h,f);this._rotation.constrain(h,f);
this._geometry.constrain(h,f);this.customConstraints.forEach(w=>w.constrain(h,f));return h}constrainByGeometry(h){this._geometry.constrain(h);this.customConstraints.forEach(f=>f.applyPanConstraint?.(h));return h}fit(h){return this._zoom.fit(h)}zoomToScale(h){return this._zoom.zoomToScale(h)}scaleToZoom(h){return this._zoom.scaleToZoom(h)}snapScale(h){return this._zoom.snapToClosestScale(h)}snapToNextScale(h){return this._zoom.snapToNextScale(h)}snapToPreviousScale(h){return this._zoom.snapToPreviousScale(h)}};
b.__decorate([c.property({readOnly:!0})],a.prototype,"effectiveLODs",null);b.__decorate([c.property({readOnly:!0})],a.prototype,"effectiveMinScale",null);b.__decorate([c.property({readOnly:!0})],a.prototype,"effectiveMaxScale",null);b.__decorate([c.property({readOnly:!0})],a.prototype,"effectiveMinZoom",null);b.__decorate([c.property({readOnly:!0})],a.prototype,"effectiveMaxZoom",null);b.__decorate([c.property({types:t,value:null})],a.prototype,"geometry",null);b.__decorate([c.property({type:[e]})],
a.prototype,"lods",void 0);b.__decorate([c.property()],a.prototype,"minScale",void 0);b.__decorate([c.property()],a.prototype,"maxScale",void 0);b.__decorate([c.property()],a.prototype,"minZoom",void 0);b.__decorate([c.property()],a.prototype,"maxZoom",void 0);b.__decorate([c.property()],a.prototype,"rotationEnabled",void 0);b.__decorate([c.property()],a.prototype,"snapToZoom",void 0);b.__decorate([c.property({type:l})],a.prototype,"customConstraints",void 0);b.__decorate([c.property()],a.prototype,
"view",void 0);b.__decorate([c.property({readOnly:!0})],a.prototype,"version",null);b.__decorate([c.property({type:k.GeometryConstraint,readOnly:!0})],a.prototype,"_geometry",null);b.__decorate([c.property({type:r})],a.prototype,"_rotation",null);b.__decorate([c.property({readOnly:!0,type:u})],a.prototype,"_zoom",null);return a=b.__decorate([g.subclass("esri.views.2d.MapViewConstraints")],a)})},"esri/views/2d/constraints/GeometryConstraint":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/Logger ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../geometry/projection ../../../geometry/support/contains ../../../geometry/support/near".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k){var r;b.GeometryConstraint=r=class extends c.NumericIdentifiableMixin(l){constructor(u){super(u);this.spatialReference=this.geometry=null}get normalizedGeometry(){if(null==this.geometry||!this.spatialReference)return null;if(!this.spatialReference.equals(this.geometry.spatialReference))try{return d.project(this.geometry,this.spatialReference)}catch(u){return t.getLogger(this).error("#constraints.geometry","could not project the geometry to the view's spatial reference",
{geometry:this.geometry,spatialReference:this.spatialReference,error:u}),null}return this.geometry}constrain(u,h){if(null==this.normalizedGeometry)return u;h=u.targetGeometry;if("extent"===this.normalizedGeometry.type?e.extentContainsPoint(this.normalizedGeometry,h):e.polygonContainsPoint(this.normalizedGeometry,h))return u;({coordinate:h}=k.nearestCoordinate(this.normalizedGeometry,h));if(!h)return u;u.targetGeometry=h;return u}clone(){return new r({geometry:this.geometry?.clone(),spatialReference:this.spatialReference?.clone()})}};
a.__decorate([n.property({constructOnly:!0})],b.GeometryConstraint.prototype,"geometry",void 0);a.__decorate([n.property({readOnly:!0})],b.GeometryConstraint.prototype,"normalizedGeometry",null);a.__decorate([n.property({constructOnly:!0})],b.GeometryConstraint.prototype,"spatialReference",void 0);b.GeometryConstraint=r=a.__decorate([q.subclass("esri.views.2d.constraints.GeometryConstraint")],b.GeometryConstraint);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/geometry/support/near":function(){define(["exports",
"../../core/Error","../../core/libs/gl-matrix-2/math/vec2","../Point","./coordsUtils"],function(b,a,l,c,t){b.nearestCoordinate=function(n,p){const {spatialReference:g}=p;p=[p.x,p.y];let q,d,e,k;const r=[0,0];a:{switch(n.type){case "extent":n=[[[n.xmin,n.ymin],[n.xmin,n.ymax],[n.xmax,n.ymax],[n.xmax,n.ymin],[n.xmin,n.ymin]]];break a;case "polygon":n=n.rings;break a;case "polyline":n=n.paths;break a}n=void 0}for(let f=0;f<n.length;f++){const w=n[f];for(let v=0;v<w.length-1;v++){t.projectPointOnLine(r,
p,w,v);const y=l.distance(p,r);if(null==q||y<q)q=y,d=[...r],e=f,k=v}}if(null==q||!d||null==e||null==k)throw new a("nearest-coordinate:failed","Failed to find the nearest coordinate");const [u,h]=d;return{coordinate:new c({x:u,y:h,spatialReference:g}),distance:q}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/constraints/RotationConstraint":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,l,c,t,n,p,g){var q;a=q=class extends l.NumericIdentifiableMixin(a){constructor(){super(...arguments);this.rotationEnabled=this.enabled=!0}constrain(d,e){if(!this.enabled||!e)return d;this.rotationEnabled||(d.rotation=e.rotation);return d}clone(){return new q({enabled:this.enabled,rotationEnabled:this.rotationEnabled})}};b.__decorate([c.property()],a.prototype,"enabled",void 0);b.__decorate([c.property()],a.prototype,"rotationEnabled",void 0);return a=q=b.__decorate([g.subclass("esri.views.2d.constraints.RotationConstraint")],
a)})},"esri/views/2d/constraints/ZoomConstraint":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/Identifiable ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,l,c,t,n,p,g){var q;a=q=class extends l.NumericIdentifiableMixin(a){constructor(d){super(d);this._lodByScale={};this._scales=[];this.effectiveLODs=null;this.effectiveMaxZoom=
this.effectiveMinZoom=-1;this.effectiveMaxScale=this.effectiveMinScale=0;this.lods=null;this.maxZoom=this.minZoom=-1;this.maxScale=this.minScale=0;this.snapToZoom=!0}initialize(){let {lods:d,minScale:e,maxScale:k,minZoom:r,maxZoom:u}=this,h=-1,f=-1,w=!1,v=!1;0!==e&&0!==k&&e<k&&([e,k]=[k,e]);if(d?.length){d=d.map(x=>x.clone());d.sort((x,m)=>m.scale-x.scale);d.forEach((x,m)=>x.level=m);for(const x of d){!w&&0<e&&e>=x.scale&&(h=x.level,w=!0);!v&&0<k&&k>=x.scale&&(f=y?y.level:-1,v=!0);var y=x}-1===r&&
(r=0===e?0:h);-1===u&&(u=0===k?d.length-1:f);r=Math.max(r,0);r=Math.min(r,d.length-1);u=Math.max(u,0);u=Math.min(u,d.length-1);r>u&&([r,u]=[u,r]);e=d[r].scale;k=d[u].scale;d.splice(0,r);d.splice(u-r+1,d.length);d.forEach((x,m)=>{this._lodByScale[x.scale]=x;this._scales[m]=x.scale});this._set("effectiveLODs",d);this._set("effectiveMinZoom",r);this._set("effectiveMaxZoom",u)}this._set("effectiveMinScale",e);this._set("effectiveMaxScale",k)}constrain(d,e){if(e&&d.scale===e.scale)return d;var k=this.effectiveMinScale;
const r=this.effectiveMaxScale,u=d.targetGeometry,h=e&&e.targetGeometry,f=0!==k&&d.scale>k;if(0!==r&&d.scale<r||f)k=f?k:r,e&&h&&(e=(k-e.scale)/(d.scale-e.scale),u.x=h.x+(u.x-h.x)*e,u.y=h.y+(u.y-h.y)*e),d.scale=k;this.snapToZoom&&this.effectiveLODs&&(d.scale=this._getClosestScale(d.scale));return d}fit(d){if(!this.effectiveLODs||!this.snapToZoom)return this.constrain(d,null);const e=this.scaleToZoom(d.scale);d.scale=this.zoomToScale(.99<Math.abs(e-Math.floor(e))?Math.round(e):Math.floor(e));return d}zoomToScale(d){if(!this.effectiveLODs)return 0;
d-=this.effectiveMinZoom;d=Math.max(0,d);const e=this._scales;if(0>=d)return e[0];if(d>=e.length)return e[e.length-1];const k=Math.floor(d);return e[k]+(d-k)*(e[Math.ceil(d)]-e[k])}scaleToZoom(d){if(!this.effectiveLODs)return-1;const e=this._scales;let k,r;if(d>=e[0])return this.effectiveMinZoom;if(d<=e[e.length-1])return this.effectiveMaxZoom;for(let u=0;u<e.length-1;u++){k=e[u];r=e[u+1];if(r===d)return u+this.effectiveMinZoom+1;if(k>d&&r<d)return u+this.effectiveMinZoom+1-(d-r)/(k-r)}return-1}snapToClosestScale(d){if(!this.effectiveLODs)return d;
d=this.scaleToZoom(d);return this.zoomToScale(Math.round(d))}snapToNextScale(d,e=.5){if(!this.effectiveLODs)return d*e;d=Math.round(this.scaleToZoom(d));return this.zoomToScale(d+1)}snapToPreviousScale(d,e=2){if(!this.effectiveLODs)return d*e;d=Math.round(this.scaleToZoom(d));return this.zoomToScale(d-1)}clone(){return new q({lods:this.lods,minZoom:this.minZoom,maxZoom:this.maxZoom,minScale:this.minScale,maxScale:this.maxScale})}_getClosestScale(d){if(this._lodByScale[d])return this._lodByScale[d].scale;
d=this._scales.reduce((e,k)=>Math.abs(k-d)<=Math.abs(e-d)?k:e,this._scales[0]);return this._lodByScale[d].scale}};b.__decorate([c.property({readOnly:!0})],a.prototype,"effectiveLODs",void 0);b.__decorate([c.property({readOnly:!0})],a.prototype,"effectiveMinZoom",void 0);b.__decorate([c.property({readOnly:!0})],a.prototype,"effectiveMaxZoom",void 0);b.__decorate([c.property({readOnly:!0})],a.prototype,"effectiveMinScale",void 0);b.__decorate([c.property({readOnly:!0})],a.prototype,"effectiveMaxScale",
void 0);b.__decorate([c.property()],a.prototype,"lods",void 0);b.__decorate([c.property()],a.prototype,"minZoom",void 0);b.__decorate([c.property()],a.prototype,"maxZoom",void 0);b.__decorate([c.property()],a.prototype,"minScale",void 0);b.__decorate([c.property()],a.prototype,"maxScale",void 0);b.__decorate([c.property()],a.prototype,"snapToZoom",void 0);return a=q=b.__decorate([g.subclass("esri.views.2d.constraints.ZoomConstraint")],a)})},"esri/views/2d/ViewStateManager":function(){define("exports ../../chunks/tslib.es6 ../../Viewpoint ../../core/Accessor ../../core/Error ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/screenUtils ../../core/Warning ../../core/accessorSupport/decorators/property ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../chunks/pe ../../geometry/Point ../../geometry/projection ../../geometry/support/spatialReferenceUtils ./PaddedViewState ./viewpointUtils".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u,h,f,w,v,y,x){b.ViewStateManager=class extends c{constructor(m){super(m);this.constraints=null;this.ready=!1;this.resizeAlign="center";this.addHandles([g.watch(()=>this.constraints?.version,z=>{this.constraints&&z&&this.ready&&(this.state.viewpoint=this.constraints.fit(this.state.paddedViewState.viewpoint))},g.sync)])}get center(){if(!this.ready)return this._get("center");const {center:m,spatialReference:z}=this.state.paddedViewState;this.state.commitProperty("id");
return new f({x:m[0],y:m[1],spatialReference:z})}set center(m){if(null!=m)if(this.ready){try{var z=this._project(m,this.state.spatialReference)}catch(B){p.getLogger(this).error(new t("mapview:invalid-center","could not project the value in the view's spatial reference",{input:m,error:B}));return}m=this.viewpoint;x.centerAt(m,m,z);this.viewpoint=m}else this._set("center",m)}get extent(){if(!this.ready)return this._get("extent");this.state.commitProperty("id");return this.state.paddedViewState.extent.clone()}set extent(m){if(null!=
m)if(m.width&&m.height)if(this.ready){try{var z=this._project(m,this.state.spatialReference)}catch(B){p.getLogger(this).error(new t("mapview:invalid-extent","could not project the value in the view's spatial reference",{error:B}));return}m=this.viewpoint;x.setExtent(m,m,z,this.state.size,{constraints:this.constraints});this.viewpoint=m}else this._set("extent",m),this._set("center",void 0),this._set("viewpoint",void 0),this._set("scale",void 0),this._set("zoom",void 0);else p.getLogger(this).error(new t("mapview:invalid-extent",
"invalid extent size"))}get padding(){return this.ready?this.state.padding:this._get("padding")}set padding(m){this.ready?(this.state.padding=m,this._set("padding",this.state.padding)):this._set("padding",m)}get resolution(){if(!this.ready)return 0;this.state.commitProperty("id");return this.state.resolution}get rotation(){if(!this.ready)return this._get("rotation");this.state.commitProperty("id");return this.state.rotation}set rotation(m){if(!isNaN(m))if(this.ready){var z=this.viewpoint;x.rotateTo(z,
z,m);this.viewpoint=z}else this._set("rotation",m)}get scale(){if(!this.ready)return this._get("scale");this.state.commitProperty("id");return this.state.scale}set scale(m){if(m&&!isNaN(m))if(this.ready){var z=this.viewpoint;x.scaleTo(z,z,m);this.viewpoint=z}else if(this._set("scale",m),this._set("zoom",void 0),m=this._get("extent"))this._set("extent",void 0),this._set("center",m.center)}get viewpoint(){return this.ready?this.state.paddedViewState.viewpoint.clone():this._get("viewpoint")}set viewpoint(m){if(null!=
m)if(this.ready){var z;try{var B=this._project(m,this.state.spatialReference);!m.scale||isNaN(m.scale)?z=new t("mapview:invalid-viewpoint",`invalid scale value of ${m.scale}`):null==m.targetGeometry&&(z=new t("mapview:invalid-viewpoint","geometry not defined"))}catch(A){z=new t("mapview:invalid-viewpoint","could not project the value in the view's spatial reference",{error:A})}z?p.getLogger(this).error(z):(this._scaleBeforeChangingSpatialReference=null,m=new l({targetGeometry:new f,scale:0,rotation:0}),
x.copy(m,B),this.constraints?.constrain(m,this.state.paddedViewState.viewpoint),this.state.viewpoint=m,this._set("viewpoint",m))}else this._set("viewpoint",m),this._set("extent",void 0),this._set("center",void 0),this._set("zoom",void 0),this._set("scale",void 0)}get visibleArea(){return this.ready?this.state.visibleArea:null}get zoom(){return this.ready?this.constraints?.scaleToZoom(this.scale)??-1:this._get("zoom")}set zoom(m){if(0<=m)if(this.ready)if(m=this.constraints?.zoomToScale(m)??0){var z=
this.viewpoint;x.scaleTo(z,z,m);this.viewpoint=z;this._set("zoom",this.constraints?.scaleToZoom(this.scale)??-1)}else this._set("zoom",-1);else if(this._set("zoom",m),this._set("scale",void 0),m=this._get("extent"))this._set("extent",void 0),this._set("center",m.center)}getUserStartupOptions(m){if(!m[0]&&!m[1])return{center:void 0,rotation:void 0,scale:void 0};const {padding:z,constraints:B}=this;var A=this._get("center"),D=this._get("extent");const F=this._get("scale");var I=this._get("rotation");
const S=this._get("viewpoint");var T=this._get("zoom");T=null!=T&&null!=B?B.zoomToScale(T)||void 0:void 0;let U=void 0,L=void 0,O=void 0;const W=S?.targetGeometry;"extent"===W?.type?U=W:"point"===W?.type&&(L=W,O=S?.scale);D=D??U;A=A??L??D?.center;I=I??S?.rotation;m=(F??T??O??(D&&x.extentToScale(D,[m[0]-z.left-z.right,m[1]-z.top-z.bottom])))||void 0;return{center:A,rotation:I,scale:m}}startup(m,z,B,A){const D=m.targetGeometry;try{this._project(m,B)}catch(F){p.getLogger(this).warn(new d("mapview:startup-projection-error",
"projection of initial viewpoint to the view's spatial reference, defaulting to the initial viewpoint.",{center:D.toJSON(),spatialReference:B,error:F})),m.targetGeometry=A||new f({x:0,y:0,spatialReference:B})}this.constraints?.fit(m);this._set("state",new y({padding:this.padding,size:z,viewpoint:m}));this._set("ready",!0)}teardown(){this._set("ready",!1);const {center:[m,z],spatialReference:B,rotation:A,scale:D}=this.state.paddedViewState,F=new f({x:m,y:z,spatialReference:B});this._set("viewpoint",
null);this._set("extent",null);this._set("center",F);this._set("zoom",-1);this._set("rotation",A);this._set("scale",D);this._set("state",null)}changeSpatialReference(m){const z=this.state.paddedViewState.clone();if(null==this._scaleBeforeChangingSpatialReference)this._scaleBeforeChangingSpatialReference=z.scale;else{var B=z.viewpoint.clone();B.scale=this._scaleBeforeChangingSpatialReference;z.viewpoint=B}B=z.clone();const [A,D]=z.center;var F=null;try{F=this._project(new f({x:A,y:D,spatialReference:z.spatialReference}),
m)}catch(I){h.isLoaded()||p.getLogger(this).warn(new d("mapview:spatial-reference-change","could not project the view's center to the new spatial reference",{center:F?.toJSON(),spatialReference:m,error:I}))}F||=new f({x:0,y:0,spatialReference:m});F=x.centerAt(new l({targetGeometry:new f,scale:0,rotation:0}),z.viewpoint,F);B.viewpoint=F;try{const I=[z.size[0]/2,z.size[1]/2],S=[I[0]+20,I[1]],T=z.toMap([0,0],S),{x:U,y:L}=this._project(new f({x:T[0],y:T[1],spatialReference:z.spatialReference}),m);T[0]=
U;T[1]=L;B.toScreen(T,T);const O=x.angleBetween(I,T,S),W=Math.hypot(T[0]-I[0],T[1]-I[1])/20;!Number.isFinite(W)||4<Math.abs(W)?(F.rotation=0,F.targetGeometry=new f({x:0,y:0,spatialReference:m})):(F.scale*=W,F.scale>n("mapview-srswitch-adjust-rotation-scale-threshold")?F.rotation=0:F.rotation+=Number.isFinite(O)?O:0)}catch{}this._get("constraints")?.constrain(F,void 0);this._get("state").viewpoint=F}resize(m,z){if(this.ready){var B=this.state,A=this.state.paddedViewState.viewpoint,D=this.state.paddedViewState.size.slice();
B.size=[m,z];x.resize(A,A,D,this.state.paddedViewState.size,this.resizeAlign);A=this.constraints?.constrain(A,void 0)??A;this.state.viewpoint=A}}toMap(m){if(!this.ready)return null;const [z,B]=this.state.toMap([0,0],[m.x,m.y]);return new f({x:z,y:B,spatialReference:this.state.spatialReference})}toScreen(m,z){if(!this.ready)return null;m=this._project(m,this.state.spatialReference);m=[m.x,m.y];!1!==z?.pickClosestTarget&&this.state.paddedViewState.wrapMapCoordinate(m,m);this.state.toScreen(m,m);return q.createScreenPoint(m[0],
m[1])}_project(m,z){const B=m?.targetGeometry||m;if(!z)return m;if(!B)return null;if(z.imageCoordinateSystem||B.spatialReference?.imageCoordinateSystem||v.equals(z,B.spatialReference))return m;const A=w.project(B,z);if(!A)throw new t("mapview:projection-not-possible","projecting input geometry to target spatial reference returned a null value",{geometry:B,spatialReference:z});return"esri.Viewpoint"===m?.declaredClass?(m.targetGeometry=A,m):A}};a.__decorate([e.property({type:f})],b.ViewStateManager.prototype,
"center",null);a.__decorate([e.property()],b.ViewStateManager.prototype,"constraints",void 0);a.__decorate([e.property({type:u})],b.ViewStateManager.prototype,"extent",null);a.__decorate([e.property({value:{top:0,right:0,bottom:0,left:0},cast:m=>({top:0,right:0,bottom:0,left:0,...m})})],b.ViewStateManager.prototype,"padding",null);a.__decorate([e.property()],b.ViewStateManager.prototype,"ready",void 0);a.__decorate([e.property()],b.ViewStateManager.prototype,"resizeAlign",void 0);a.__decorate([e.property({readOnly:!0})],
b.ViewStateManager.prototype,"resolution",null);a.__decorate([e.property({type:Number})],b.ViewStateManager.prototype,"rotation",null);a.__decorate([e.property({type:Number})],b.ViewStateManager.prototype,"scale",null);a.__decorate([e.property({readOnly:!0})],b.ViewStateManager.prototype,"state",void 0);a.__decorate([e.property({type:l})],b.ViewStateManager.prototype,"viewpoint",null);a.__decorate([e.property({readOnly:!0})],b.ViewStateManager.prototype,"visibleArea",null);a.__decorate([e.property()],
b.ViewStateManager.prototype,"zoom",null);b.ViewStateManager=a.__decorate([r.subclass("esri.views.2d.ViewStateManager")],b.ViewStateManager);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/MapViewInputManager":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/has ../../../core/maybe ../../../core/reactiveUtils ../../../core/accessorSupport/decorators/property ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ./handlers/DoubleClickZoom ./handlers/DoubleTapDragZoom ./handlers/DragPan ./handlers/DragRotate ./handlers/GamepadNavigation ./handlers/KeyPan ./handlers/KeyRotate ./handlers/KeyZoom ./handlers/MouseWheelZoom ./handlers/PinchAction ../../input/BrowserEventSource ../../input/InputManager ../../input/handlers/PreventContextMenu ../../input/handlers/support ../../input/recognizers/DoubleTapDrag ../../input/recognizers/Drag ../../input/recognizers/ImmediateDoubleClick ../../input/recognizers/PointerClickHoldAndDrag ../../input/recognizers/SingleAndDoubleClick".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u,h,f,w,v,y,x,m,z,B,A,D,F,I,S){var T={left:"ArrowLeft",right:"ArrowRight",up:"ArrowUp",down:"ArrowDown"},U={zoomIn:["\x3d","+"],zoomOut:["-","_"]},L={clockwise:["a","A"],counterClockwise:["d","D"],reset:["n","N"]};const O=Symbol("handles");a=class extends a{initialize(){const W=()=>this.view?.ready;this.addHandles([t.when(()=>!W(),()=>this._disconnect()),t.when(W,()=>this._connect())])}destroy(){this._disconnect()}get latestPointerType(){return this._inputManager?.latestPointerType}get latestPointerLocation(){return this._inputManager?.latestPointerLocation}get multiTouchActive(){return this._inputManager?.multiTouchActive??
!1}isModifierKeyDown(W){return this._inputManager?.isModifierKeyDown(W)??!1}_disconnect(){this.view.viewEvents.disconnect();this.removeHandles(O);this._inputManager=c.destroyMaybe(this._inputManager)}_connect(){const W=new x.BrowserEventSource(this.view.surface,this.view.input);var C=[new F.ImmediateDoubleClick,new I.PointerClickHoldAndDrag,new S.SingleAndDoubleClick,new D.Drag(this.view.navigation),new A.DoubleTapDrag];C=new m.InputManager({eventSource:W,recognizers:C});const E=new k.DragPan(this.view,
["primary"]),N=new r.DragRotate(this.view,["secondary"]);C.installHandlers("prevent-context-menu",[new z.PreventContextMenu],m.ViewEventPriorities.INTERNAL);C.installHandlers("navigation",[new y.PinchRotateAndZoom(this.view),new u.GamepadNavigation(this.view),new v.MouseWheelZoom(this.view),new d.DoubleClickZoom(this.view),new d.DoubleClickZoom(this.view,["Control"]),E,new h.KeyPan(this.view,T),new w.KeyZoom(this.view,U),new f.KeyRotate(this.view,L),N,new e.DoubleTapDragZoom(this.view,"touch")],m.ViewEventPriorities.INTERNAL);
this.view.viewEvents.connect(C);this._source=W;this._inputManager=C;this.addHandles([t.watch(()=>this.view?.navigation?.browserTouchPanEnabled,X=>{this._source&&(this._source.browserTouchPanningEnabled=!X)},t.initial),t.watch(()=>{const {actionMap:X}=this.view.navigation;return{panActions:B.getPointerActions("pan",X),rotateActions:B.getPointerActions("rotate",X)}},({panActions:X,rotateActions:J})=>{E.pointerActions=X;N.pointerActions=J},t.syncAndInitial)],O)}get test(){}};b.__decorate([n.property()],
a.prototype,"view",void 0);b.__decorate([n.property()],a.prototype,"latestPointerType",null);b.__decorate([n.property()],a.prototype,"latestPointerLocation",null);b.__decorate([n.property()],a.prototype,"multiTouchActive",null);return a=b.__decorate([q.subclass("esri.views.2d.input.MapViewInputManager")],a)})},"esri/views/2d/input/handlers/DoubleClickZoom":function(){define(["exports","../../../input/InputHandler","../../../input/handlers/support"],function(b,a,l){class c extends a.InputHandler{constructor(t,
n){super(!0);this._view=t;this.registerIncoming("double-click",n,p=>this._handleDoubleClick(p,n))}_handleDoubleClick(t,n){l.eventMatchesPointerAction(t.data,"primary")&&(t.stopPropagation(),n?this._view.mapViewNavigation.zoomOut([t.data.x,t.data.y]):this._view.mapViewNavigation.zoomIn([t.data.x,t.data.y]))}}b.DoubleClickZoom=c;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/handlers/support":function(){define(["exports"],function(b){function a(l,c){switch(c){case "primary":return"touch"===
l.pointerType||0===l.button;case "secondary":return"touch"!==l.pointerType&&2===l.button;case "tertiary":return"touch"!==l.pointerType&&1===l.button}}b.eventMatchesMousePointerActions=function(l,c){const {button:t,pointerType:n}=l;return"touch"===n?!1:c.some(p=>"primary"===p&&0===t||"secondary"===p&&2===t||"tertiary"===p&&1===t)};b.eventMatchesPointerAction=a;b.eventMatchesPointerActions=function(l,c){return c.some(t=>a(l,t))};b.getPointerActions=function(l,{dragPrimary:c,dragSecondary:t,dragTertiary:n}){return[{key:"primary",
value:c},{key:"secondary",value:t},{key:"tertiary",value:n}].filter(p=>p.value===l).map(p=>p.key)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DoubleTapDragZoom":function(){define(["exports","../../../../core/has","../../../input/InputHandler"],function(b,a,l){class c extends l.InputHandler{constructor(t,n,p){super(!0);this.view=t;this.pointerType=n;this.registerIncoming("double-tap-drag",p,g=>this._handleDoubleTapDrag(g))}_handleDoubleTapDrag(t){var {data:n}=
t;const {pointerType:p}=n;if(p===this.pointerType){t.stopPropagation();var {action:g,delta:q}=n;({view:t}=this);var {mapViewNavigation:d}=t;switch(g){case "begin":({scale:t}=t);this._currentScale=this._startScale=t;this._previousDelta=q;d.begin();break;case "update":if(this._previousDelta.y===q.y)break;this._previousDelta=q;t=this._startScale*1.015**q.y;d.setViewpointImmediate(t/this._currentScale);this._currentScale=t;break;case "end":({constraints:n}=t);const {effectiveLODs:e,snapToZoom:k}=n;k&&
e?(t=n.snapScale(this._currentScale),t=(0<q.y?Math.max(t,n.snapToPreviousScale(this._startScale)):Math.min(t,n.snapToNextScale(this._startScale)))/this._currentScale,d.zoom(t).then(()=>{d.end()})):d.end()}}}}b.DoubleTapDragZoom=c;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/DragPan":function(){define(["exports","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(b,a,l,c){class t extends l.InputHandler{constructor(n,
p,g){super(!0);this.view=n;this.pointerActions=p;this.registerIncoming("drag",g,q=>this._handleDrag(q));this.registerIncoming("pointer-down",()=>this.stopMomentumNavigation())}onInstall(n){super.onInstall(n);this._dragEventSeparator=new a.DragEventSeparator({start:(p,g)=>{this.view.mapViewNavigation.pan.begin(this.view,g.data);g.stopPropagation()},update:(p,g)=>{this.view.mapViewNavigation.pan.update(this.view,g.data);g.stopPropagation()},end:(p,g)=>{this.view.mapViewNavigation.pan.end(this.view,
g.data);g.stopPropagation()},condition:(p,g)=>1===p&&c.eventMatchesPointerActions(g.data,this.pointerActions)})}_handleDrag(n){const p=this.view.mapViewNavigation;p.pinch.zoomMomentum||p.pinch.rotateMomentum?this.stopMomentumNavigation():this._dragEventSeparator.handle(n)}stopMomentumNavigation(){this.view.mapViewNavigation.pan.stopMomentumNavigation()}}b.DragPan=t;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/DragEventSeparator":function(){define(["exports"],function(b){class a{constructor(l){this._callbacks=
l;this._currentCount=0;this._callbacks.condition||(this._callbacks.condition=()=>!0)}handle(l){const c=l.data,t=c.pointers.size;switch(c.action){case "start":this._currentCount=t;this._emitStart(l);break;case "added":this._emitEnd(this._previousEvent);this._currentCount=t;this._emitStart(l);break;case "update":this._emitUpdate(l);break;case "removed":this._startEvent&&this._emitEnd(this._previousEvent);this._currentCount=t;this._emitStart(l);break;case "end":this._emitEnd(l),this._currentCount=0}this._previousEvent=
l}_emitStart(l){this._startEvent=l;this._callbacks.condition?.(this._currentCount,l)&&this._callbacks.start(this._currentCount,l,this._startEvent)}_emitUpdate(l){this._callbacks.condition?.(this._currentCount,l)&&this._callbacks.update(this._currentCount,l,this._startEvent)}_emitEnd(l){this._callbacks.condition?.(this._currentCount,l)&&this._callbacks.end(this._currentCount,l,this._startEvent);this._startEvent=null}}b.DragEventSeparator=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/2d/input/handlers/DragRotate":function(){define(["exports","../../../input/DragEventSeparator","../../../input/InputHandler","../../../input/handlers/support"],function(b,a,l,c){class t extends l.InputHandler{constructor(n,p,g){super(!0);this._view=n;this.pointerActions=p;const q=this._view.mapViewNavigation;this._dragEventSeparator=new a.DragEventSeparator({start:(d,e)=>{q.rotate.begin(this._view,e.data);e.stopPropagation()},update:(d,e)=>{q.rotate.update(this._view,e.data);e.stopPropagation()},
end:(d,e)=>{q.rotate.end();e.stopPropagation()},condition:(d,e)=>1===d&&c.eventMatchesPointerActions(e.data,this.pointerActions)});this.registerIncoming("drag",g,d=>this._dragEventSeparator.handle(d))}}b.DragRotate=t;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/GamepadNavigation":function(){define("exports ../../../../core/Handles ../../../../core/reactiveUtils ../../../../core/scheduling ../../viewpointUtils ../../../input/InputHandler ../../../navigation/gamepadAndKeyboardUtils".split(" "),
function(b,a,l,c,t,n,p){class g extends n.InputHandler{constructor(q){super(!0);this._view=q;this._frameTask=null;this._watchHandles=new a;this._currentDevice=null;this._transformation={translation:[0,0,0],heading:0,tilt:0,zoom:0};this._handle=this.registerIncoming("gamepad",d=>this._handleGamePadEvent(d));this._handle.pause()}onInstall(q){super.onInstall(q);this._watchHandles.add([l.watch(()=>this._view.navigation.gamepad?.enabled,d=>{d?(this._handle.resume(),this._frameTask||(this._frameTask=c.addFrameTask({update:e=>
this._frameUpdate(e.deltaTime)}))):(this._handle.pause(),this._frameTask&&(this._frameTask.remove(),this._frameTask=null))},l.initial)])}onUninstall(){this._watchHandles.removeAll();this._frameTask&&(this._frameTask.remove(),this._frameTask=null);super.onUninstall()}_handleGamePadEvent(q){const d=this._view.navigation.gamepad.device;d&&q.data.device!==d||this._currentDevice&&this._currentDevice!==q.data.device||("end"===q.data.action?(this._currentDevice=null,p.resetTransformation(this._transformation)):
(this._currentDevice=q.data.device,p.extractTransformation(q.data,this._view.navigation.gamepad,this._transformation)),this._frameTask?.resume())}_frameUpdate(q){const d=this._transformation;if(p.isZeroTransformation(d))this._frameTask?.pause();else{var e=this._view.viewpoint.clone(),k=.7*this._view.navigation.gamepad.velocityFactor*q;t.translateBy(e,e,[d.translation[0]*k,-d.translation[1]*k]);k=this._view.size;t.scaleAndRotateBy(e,e,1+6E-4*d.translation[2]*q,this._view.constraints.rotationEnabled?
.06*-d.heading*q:0,[k[0]/2,k[1]],k);q=this._view.constraints.constrain(e,this._view.viewpoint);this._view.viewpoint=q}}}b.GamepadNavigation=g;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/navigation/gamepadAndKeyboardUtils":function(){define(["exports","../../chunks/vec32"],function(b,a){function l(c){let t=c*c;0>c&&(t*=-1);return t}b.extractTransformation=function(c,t,n){const p=c.state;c=c.device;t="forward-down"===t.tiltDirection?1:-1;"standard"===c.deviceType?(n.translation[0]=
l(p.axes[0]),n.translation[1]=l(p.axes[1]),n.translation[2]=l(p.buttons[7])-l(p.buttons[6]),n.heading=l(p.axes[2]),n.tilt=l(p.axes[3])):"spacemouse"===c.deviceType&&(n.translation[0]=1.2*l(p.axes[0]),n.translation[1]=1.2*l(p.axes[1]),n.translation[2]=2*-l(p.axes[2]),n.heading=1.2*l(p.axes[5]),n.tilt=1.2*l(p.axes[3]));n.tilt*=t;a.scale(n.translation,n.translation,1);return n};b.extractTransformationKeyboard=function(c,t){t.translation[0]=c[1]-c[0];t.translation[1]=c[3]-c[2];t.translation[2]=c[4]-c[5];
t.heading=c[7]-c[6];t.tilt=c[8]-c[9];t.zoom=c[10]-c[11];return t};b.isZeroTransformation=function(c){return 0===c.translation[0]&&0===c.translation[1]&&0===c.translation[2]&&0===c.heading&&0===c.tilt&&0===c.zoom};b.resetTransformation=function(c){c.translation[0]=0;c.translation[1]=0;c.translation[2]=0;c.heading=0;c.tilt=0;return c};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyPan":function(){define(["exports","../../../input/InputHandler","../../../input/VisibilityChange"],
function(b,a,l){class c extends a.InputHandler{constructor(t,n,p){super(!0);this.view=t;this.keys=n;this._isSticky=!1;this._pressedKeys=new Set;this._currentDirection=this._timeout=void 0;this._stickyKeyDuration=200;this._handleKey=g=>{var q=this._keyMap[g.data.key];g.modifiers.has("Meta")||g.modifiers.has("Control")?this._stopMovement():null!=q&&(g.stopPropagation(),g.preventDefault(),g="key-down"===g.type,this._pressedKeys[g?"add":"delete"](q),g?this._direction!==q&&(this._direction=q,this._isSticky=
!1,this._setTimeout(()=>{this._isSticky&&this._handlePopKey()})):(q=0<this._pressedKeys.size,void 0===this._timeout||q?this._handlePopKey():this._isSticky=!0))};this._handlePopKey=()=>{this._direction=Array.from(this._pressedKeys).pop();null==this._direction&&this._stopMovement()};this._stopMovement=()=>{this._isSticky=!1;this._direction=void 0;this._pressedKeys.clear();this._setTimeout(void 0)};this._keyMap={[n.left]:"left",[n.right]:"right",[n.up]:"up",[n.down]:"down"};this.registerIncoming("key-down",
p,this._handleKey);this.registerIncoming("key-up",p,this._handleKey);this.registerIncoming("blur",p,this._stopMovement);this._visibilityHandle=l.onVisibilityChange(g=>g?null:this._stopMovement())}onUninstall(){this._stopMovement();this._visibilityHandle?.remove()}get _direction(){return this._currentDirection}set _direction(t){const n=null!=this._currentDirection;if(null!=t){if(n||this.view.mapViewNavigation.begin(),this._currentDirection!==t)switch(t){case "left":this.view.mapViewNavigation.continuousPanLeft();
break;case "right":this.view.mapViewNavigation.continuousPanRight();break;case "up":this.view.mapViewNavigation.continuousPanUp();break;case "down":this.view.mapViewNavigation.continuousPanDown()}}else n&&this.view.mapViewNavigation.stop();this._currentDirection=t}_setTimeout(t){clearTimeout(this._timeout);this._timeout=void 0===t?void 0:setTimeout(()=>{this._timeout=void 0;t()},this._stickyKeyDuration)}}b.KeyPan=c;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/VisibilityChange":function(){define(["exports",
"../../core/handleUtils"],function(b,a){b.onVisibilityChange=function(l){const c=()=>l("visible"===document.visibilityState);document.addEventListener("visibilitychange",c);return a.makeHandle(()=>document.removeEventListener("visibilitychange",c))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyRotate":function(){define(["exports","../../../input/InputHandler","../../../input/VisibilityChange"],function(b,a,l){class c extends a.InputHandler{constructor(t,
n,p){super(!0);this.view=t;this.keys=n;this._keyToDirection=new Map;this._pressed=!1;this._addKeysMapping(n);this.registerIncoming("key-down",p,g=>this._handleKeyDown(g));this.registerIncoming("key-up",p,g=>this._handleKeyUp(g));this.registerIncoming("blur",p,()=>this._handleStop());this._visibilityHandle=l.onVisibilityChange(g=>g?null:this._handleStop())}onUninstall(){this._visibilityHandle?.remove();this._handleStop()}_addKeysMapping(t){this._addKeyMapping(t.clockwise,"clockwise");this._addKeyMapping(t.counterClockwise,
"counterClockwise");this._addKeyMapping(t.reset,"reset")}_addKeyMapping(t,n){for(const p of t)this._keyToDirection.set(p,n)}_handleKeyDown(t){t.data.repeat||this._handleKey(t,!0)}_handleKeyUp(t){this._handleKey(t,!1)}_handleStop(){this._pressed&&(this._pressed=!1,this.view.mapViewNavigation.stop())}_handleKey(t,n){var p=t.modifiers;if(!(0<p.size&&!p.has("Shift")||!this.view.constraints.rotationEnabled)&&(p=this._keyToDirection.get(t.data.key),this._pressed=null!=p)){t.preventDefault();if(n)switch(this.view.mapViewNavigation.begin(),
p){case "clockwise":this.view.mapViewNavigation.continuousRotateClockwise();break;case "counterClockwise":this.view.mapViewNavigation.continuousRotateCounterclockwise();break;case "reset":this.view.mapViewNavigation.resetRotation()}else this._pressed=!1,this.view.mapViewNavigation.stop();t.stopPropagation()}}}b.KeyRotate=c;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/KeyZoom":function(){define(["exports","../../../../core/has","../../../input/InputHandler"],
function(b,a,l){var c;(function(n){n[n.IN=0]="IN";n[n.OUT=1]="OUT"})(c||={});class t extends l.InputHandler{constructor(n,p,g){super(!0);this.view=n;this.keys=p;this._keysToZoomAction={};this.registerIncoming("key-down",g,q=>this._handleKeyDown(q));p.zoomIn.forEach(q=>this._keysToZoomAction[q]=c.IN);p.zoomOut.forEach(q=>this._keysToZoomAction[q]=c.OUT)}_handleKeyDown(n){this._handleKey(n)}_handleKey(n){var p=n.modifiers;if(!(0<p.size)||p.has("Shift"))if({key:p}=n.data,p in this._keysToZoomAction){p=
this._keysToZoomAction[p];var {mapViewNavigation:g}=this.view,q=null;switch(p){case c.IN:q=g.zoomIn();break;case c.OUT:q=g.zoomOut();break;default:return}g.begin();q.then(()=>g.end());n.stopPropagation()}}}b.KeyZoom=t;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/MouseWheelZoom":function(){define(["exports","../../../input/InputHandler"],function(b,a){class l extends a.InputHandler{constructor(c,t){super(!0);this._view=c;this._canZoom=!0;this.registerIncoming("mouse-wheel",
t,n=>this._handleMouseWheel(n))}_handleMouseWheel(c){if("zoom"===this._view.navigation.actionMap.mouseWheel&&(c.preventDefault(),c.stopPropagation(),this._canZoom)){var t=this._view.mapViewNavigation,{x:n,y:p,deltaY:g}=c.data;if(c=t.zoom(1/.6**(1/60*g),[n,p]))this._canZoom=!1,c.catch(()=>{}).then(()=>{this._canZoom=!0;t.end()})}}}b.MouseWheelZoom=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/input/handlers/PinchAction":function(){define(["exports","../../../input/DragEventSeparator",
"../../../input/InputHandler"],function(b,a,l){class c extends l.InputHandler{constructor(t){super(!0);this.view=t;this.registerIncoming("drag",p=>this._handleDrag(p));this.registerIncoming("pointer-down",()=>this._stopMomentumNavigation());const n=this.view.mapViewNavigation;this._dragEventSeparator=new a.DragEventSeparator({start:(p,g)=>{n.pinch.begin(this.view,g.data);g.stopPropagation()},update:(p,g)=>{n.pinch.update(this.view,g.data);g.stopPropagation()},end:(p,g)=>{n.pinch.end(this.view);g.stopPropagation()},
condition:p=>2<=p})}_handleDrag(t){this._dragEventSeparator.handle(t)}_stopMomentumNavigation(){this.view.mapViewNavigation.pinch.stopMomentumNavigation()}}b.PinchRotateAndZoom=c;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/BrowserEventSource":function(){define(["exports","../../core/has","../../core/maybe","./gamepad/GamepadSource","../support/screenUtils"],function(b,a,l,c,t){const n=a("edge"),p=a("chrome"),g=a("ff"),q=a("safari");class d{constructor(k,r){this._active=
{};this._callback=()=>{};this._activePointerCaptures=new Set;this._keyDownState=new Set;this._eventId=1;this._browserTouchPanningEnabled=!1;this._element=k;k.getAttribute("tabindex")||k.setAttribute("tabindex","0");this._eventHandlers={"key-down":this._handleKey,"key-up":this._handleKey,"pointer-down":this._handlePointer,"pointer-move":this._handlePointerPreventDefault,"pointer-up":this._handlePointerPreventDefault,"pointer-enter":this._handlePointer,"pointer-leave":this._handlePointer,"pointer-cancel":this._handlePointer,
"mouse-wheel":this._handleMouseWheel,"pointer-capture-lost":this._handlePointerCaptureLost};this._updateTouchAction();this._element.addEventListener("keydown",this._preventAltKeyDefault);this._gamepadSource=new c.GamepadSource(k,r);this._gamepadSource.onEvent=u=>this._callback("gamepad",u)}destroy(){this._callback=()=>{};this.activeEvents=null;this._activePointerCaptures.forEach(k=>this._releasePointerCaptureSafe(k));this._activePointerCaptures.clear();this._gamepadSource=l.destroyMaybe(this._gamepadSource);
this._removeTouchAction();this._element.removeEventListener("keydown",this._preventAltKeyDefault)}get browserTouchPanningEnabled(){return this._browserTouchPanningEnabled}set browserTouchPanningEnabled(k){this._browserTouchPanningEnabled=k;this._updateTouchAction();this._updateTouchEventHandling()}set onEventReceived(k){this._callback=k}set activeEvents(k){for(const r in this._active)k&&k.has(r)||(this._element.removeEventListener(e[r],this._active[r]),delete this._active[r]);k&&k.forEach(r=>{if(!this._active[r]&&
e[r]){const u=(this._eventHandlers[r]||this._handleDefault).bind(this,r);this._element.addEventListener(e[r],u);this._active[r]=u}});this._gamepadSource&&(this._gamepadSource.hasEventListeners=k?.has("gamepad")??!1)}setPointerCapture(k,r){r?this._setPointerCaptureSafe(k.pointerId):(this._releasePointerCaptureSafe(k.pointerId),this._activePointerCaptures.delete(k.pointerId))}_updateTouchAction(){this._element.classList.remove(this._browserTouchPanningEnabled?"esri-view-surface--touch-none":"esri-view-surface--touch-pan");
this._element.classList.add(this._browserTouchPanningEnabled?"esri-view-surface--touch-pan":"esri-view-surface--touch-none")}_updateTouchEventHandling(){this._browserTouchPanningEnabled?this._element.addEventListener("touchmove",this._preventMultiTouchPanning):this._element.removeEventListener("touchmove",this._preventMultiTouchPanning)}_removeTouchAction(){this._element.classList.remove("esri-view-surface--touch-none");this._element.classList.remove("esri-view-surface--touch-pan");this._element.removeEventListener("touchmove",
this._preventMultiTouchPanning)}_setPointerCaptureSafe(k){try{this._element.setPointerCapture(k),this._activePointerCaptures.add(k)}catch{}}_releasePointerCaptureSafe(k){try{this._element.hasPointerCapture&&!this._element.hasPointerCapture(k)||this._element.releasePointerCapture(k)}catch(r){}}_updateNormalizedPointerLikeEvent(k,r){k=t.createScreenPointFromNativeEvent(this._element,k);d.test.disableSubpixelCoordinates&&(k.x=Math.round(k.x),k.y=Math.round(k.y));r.x=k.x;r.y=k.y;return r}_handleKey(k,
r){const {key:u}=r;u&&"key-up"===k&&this._keyDownState.delete(u);r={native:r,key:u,repeat:!!u&&this._keyDownState.has(u)};u&&"key-down"===k&&this._keyDownState.add(r.key);this._callback(k,r)}_handlePointer(k,r){r=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,button:r.button,buttons:r.buttons,eventId:this._eventId++});this._callback(k,r)}_handlePointerPreventDefault(k,r){const u=this._updateNormalizedPointerLikeEvent(r,{native:r,x:0,y:0,pointerType:r.pointerType,
button:r.button,buttons:r.buttons,eventId:this._eventId++});r.preventDefault();this._callback(k,u)}_getDeltaFromTrackpadOrMouseWheel(k){return k.shiftKey&&a("mac")&&0===k.deltaY?k.deltaX:k.deltaY}_handleMouseWheel(k,r){let u=this._getDeltaFromTrackpadOrMouseWheel(r);switch(r.deltaMode){case 0:n&&(u=u/document.documentElement.clientHeight*600);break;case 1:u*=30;break;case 2:u*=900}n?u*=.7:p||q?u*=.6:g&&(u*=1.375);const h=Math.abs(u);100<h&&(u=u/h*200/(1+Math.exp(-.02*(h-100))));r=this._updateNormalizedPointerLikeEvent(r,
{native:r,x:0,y:0,deltaY:u});this._callback(k,r)}_handlePointerCaptureLost(k,r){this._activePointerCaptures.delete(r.pointerId);this._handleDefault(k,r)}_handleDefault(k,r){const u={native:r};r.preventDefault();this._callback(k,u)}_preventAltKeyDefault(k){"Alt"===k.key&&k.preventDefault()}_preventMultiTouchPanning(k){1<k.touches.length&&k.preventDefault()}}d.test={disableSubpixelCoordinates:!1};const e={"key-down":"keydown","key-up":"keyup","pointer-down":"pointerdown","pointer-up":"pointerup","pointer-move":"pointermove",
"mouse-wheel":"wheel","pointer-capture-got":"gotpointercapture","pointer-capture-lost":"lostpointercapture","context-menu":"contextmenu","pointer-enter":"pointerenter","pointer-leave":"pointerleave","pointer-cancel":"pointercancel",focus:"focus",blur:"blur"};b.BrowserEventSource=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/gamepad/GamepadSource":function(){define(["exports","../../../core/scheduling","./GamepadInputDevice","./GamepadState"],function(b,a,l,c){function t(p){for(const q of navigator.getGamepads()){var g;
a:if((g=q)&&g.connected){for(let d=0;d<g.axes.length;d++)if(isNaN(g.axes[d])){g=!1;break a}g=!0}else g=!1;g&&p(q)}}class n{constructor(p,g){this._element=p;this._input=g;this._hasEventListeners=!1;this._onConnectGamepad=q=>{this._connectGamepad(q.gamepad)};this._onDisconnectGamepad=q=>{q=q.gamepad;const d=q.index,e=this._inputDevices[d];e&&(this._emitGamepadEvent(q,c.extractState(e),!1),this._inputDevices.splice(d,1),this._latestUpdate.splice(d,1),this._input.gamepad.devices.remove(e),this.ensurePollingState())};
this._frameTask=null;this._latestUpdate=[];this._inputDevices=[];this._callback=null;p=window.isSecureContext;if(this.supported="getGamepads"in window.navigator&&p)t(q=>this._connectGamepad(q)),window.addEventListener("gamepadconnected",this._onConnectGamepad),window.addEventListener("gamepaddisconnected",this._onDisconnectGamepad),this.ensurePollingState()}destroy(){this.hasEventListeners=!1;this.supported&&(window.removeEventListener("gamepadconnected",this._onConnectGamepad),window.removeEventListener("gamepaddisconnected",
this._onDisconnectGamepad))}set hasEventListeners(p){this._hasEventListeners!==p&&(this._hasEventListeners=p,this.ensurePollingState())}get _eventsEnabled(){return this.supported&&0<this._inputDevices.length&&this._hasEventListeners}set onEvent(p){this._callback=p}_connectGamepad(p){const g=new l(p);"unknown"!==g.deviceType&&(this._inputDevices[p.index]=g,this._input.gamepad.devices.add(g));this.ensurePollingState()}ensurePollingState(){this._eventsEnabled?this._startPolling():this._stopPolling()}_startPolling(){null==
this._frameTask&&(this._frameTask=a.addFrameTask({update:()=>this._readGamepadState()}))}_stopPolling(){null!=this._frameTask&&(this._frameTask.remove(),this._frameTask=null,this._latestUpdate=[])}_readGamepadState(){const p=document.hasFocus(),g=this._element.contains(document.activeElement),q="document"===this._input.gamepad.enabledFocusMode&&!p||"view"===this._input.gamepad.enabledFocusMode&&!g;t(d=>{var e=this._inputDevices[d.index];if(e){var k=this._latestUpdate[d.index];e=c.extractState(e);
var r=q||c.stateIdle(e);k&&(k.timestamp===d.timestamp||!k.active&&r||c.stateEqual(k.state,e))||this._emitGamepadEvent(d,e,!r)}})}_emitGamepadEvent(p,g,q){var d=this._latestUpdate[p.index];if((d=d&&d.active)||q)this._latestUpdate[p.index]={timestamp:p.timestamp,state:g,active:q},this._callback&&this._callback({device:this._inputDevices[p.index],state:g,action:!d&&q?"start":d&&q?"update":"end"})}}b.GamepadSource=n;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/gamepad/GamepadState":function(){define(["exports"],
function(b){b.extractState=function(a){const l=a.native;return l?{buttons:l.buttons.map(c=>c.pressed?c.value||1:0),axes:l.axes.map(c=>{{var t=a.axisThreshold;const n=Math.abs(c);c=n<t?0:Math.sign(c)*(n-t)/(1-t)}return c})}:{buttons:[],axes:[]}};b.stateEqual=function(a,l){if(a.axes.length!==l.axes.length||a.buttons.length!==l.buttons.length)return!1;for(var c=0;c<a.axes.length;c++)if(a.axes[c]!==l.axes[c])return!1;for(c=0;c<a.buttons.length;c++)if(a.buttons[c]!==l.buttons[c])return!1;return!0};b.stateIdle=
function(a){for(var l=0;l<a.axes.length;l++)if(0!==a.axes[l])return!1;for(l=0;l<a.buttons.length;l++)if(0!==a.buttons[l])return!1;return!0};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/handlers/PreventContextMenu":function(){define(["exports","../InputHandler"],function(b,a){class l extends a.InputHandler{constructor(){super(!0);this.registerIncoming("context-menu",c=>c.data.native.preventDefault())}}b.PreventContextMenu=l;Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/views/input/recognizers/DoubleTapDrag":function(){define("exports ../../../core/clock ../../../core/maybe ../../../core/screenUtils ../DragEventSeparator ../InputHandler ./support".split(" "),function(b,a,l,c,t,n,p){function g(d,e,k){const {button:r,buttons:u,pointer:h,pointers:f,pointerType:w,timestamp:v}=k;return{action:d,delta:e,button:r,buttons:u,pointer:h,pointers:f,pointerType:w,timestamp:v}}class q extends n.InputHandler{constructor(d=p.DefaultParameters.maximumDoubleClickDelay,
e=p.DefaultParameters.maximumDoubleClickDistance,k=p.DefaultParameters.maximumDoubleTouchDelay,r=p.DefaultParameters.maximumDoubleTouchDistance,u=a.clock){super(!1);this._maximumDoubleClickDelay=d;this._maximumDoubleClickDistance=e;this._maximumDoubleTouchDelay=k;this._maximumDoubleTouchDistance=r;this._clock=u;this._doubleTapDragActive=this._doubleTapDragReady=!1;this._dragStartCenter=c.createScreenPoint(0,0);this._pointerState=new Map;this._doubleTapDrag=this.registerOutgoing("double-tap-drag");
this._dragEventSeparator=new t.DragEventSeparator({start:(h,f)=>this._dragStart(h,f),update:(h,f)=>this._dragUpdate(f),end:(h,f)=>this._dragEnd(f)});this.registerIncoming("drag",h=>this._dragEventSeparator.handle(h));this.registerIncoming("pointer-down",h=>this._handlePointerDown(h));this.registerIncoming("pointer-up",()=>this._handlePointerUp())}onUninstall(){this._pointerState.forEach(d=>{d.doubleTapTimeout=l.removeMaybe(d.doubleTapTimeout)})}get hasPendingInputs(){for(const d of this._pointerState.values())if(null!=
d.doubleTapTimeout)return!0;return!1}_clearPointerDown(d){const e=this._pointerState.get(d);e&&(e.doubleTapTimeout=l.removeMaybe(e.doubleTapTimeout),this._pointerState.delete(d),this.refreshHasPendingInputs())}_dragStart(d,e){if(this._doubleTapDragReady&&1===d){this._doubleTapDragReady=!1;this._doubleTapDragActive=!0;var {data:k,modifiers:r}=e;({center:d}=k);this._dragStartCenter=d;d=g("begin",c.createScreenPoint(0,0),k);this._doubleTapDrag.emit(d,void 0,r);e.stopPropagation()}}_dragUpdate(d){if(this._doubleTapDragActive){var {data:e,
modifiers:k}=d,{center:r}=e;r=c.createScreenPoint(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y);r=g("update",r,e);this._doubleTapDrag.emit(r,void 0,k);d.stopPropagation()}}_dragEnd(d){if(this._doubleTapDragActive){var {data:e,modifiers:k}=d,{center:r}=e;r=c.createScreenPoint(r.x-this._dragStartCenter.x,r.y-this._dragStartCenter.y);r=g("end",r,e);this._doubleTapDrag.emit(r,void 0,k);this._doubleTapDragActive=!1;d.stopPropagation()}}_handlePointerDown(d){const {data:e}=d,k=p.getPointerId(e),
r=this._pointerState.get(k);var {pointerType:u}=e.native;r?(u="touch"===u?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance,this._clearPointerDown(k),p.manhattanDistance(r.event.data,e)>u?this._storePointerDown(d):this._doubleTapDragReady=!0):this._storePointerDown(d)}_handlePointerUp(){this._doubleTapDragReady=!1}_storePointerDown(d){var {data:e}=d;const {pointerType:k}=e.native,r=p.getPointerId(e);e=this._clock.setTimeout(()=>this._clearPointerDown(r),"touch"===k?this._maximumDoubleTouchDelay:
this._maximumDoubleClickDelay);this._pointerState.set(r,{event:d,doubleTapTimeout:e});this.refreshHasPendingInputs()}}b.DoubleTapDrag=q;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/support":function(){define(["exports","../../../core/screenUtils"],function(b,a){b.DefaultParameters={maximumClickDelay:300,movementUntilMouseDrag:1.5,movementUntilPenDrag:6,movementUntilTouchDrag:6,holdDelay:500,maximumDoubleClickDelay:250,maximumDoubleClickDistance:10,
maximumDoubleTouchDelay:350,maximumDoubleTouchDistance:35};b.euclideanDistance=function(l,c){const t=c.x-l.x;l=c.y-l.y;return Math.sqrt(t*t+l*l)};b.fitCircleLSQ=function(l,c){c?(c.radius=0,c.center.x=0,c.center.y=0):c={radius:0,center:a.createScreenPoint()};if(0===l.length)return c;if(1===l.length)return c.center.x=l[0].x,c.center.y=l[0].y,c;if(2===l.length){const [f,w]=l,[v,y]=[w.x-f.x,w.y-f.y];c.radius=Math.sqrt(v*v+y*y)/2;c.center.x=(f.x+w.x)/2;c.center.y=(f.y+w.y)/2;return c}let t=0,n=0;for(c=
0;c<l.length;c++)t+=l[c].x,n+=l[c].y;t/=l.length;n/=l.length;var p=l.map(f=>f.x-t),g=l.map(f=>f.y-n);let q=c=0;var d=0,e=0,k=0,r=0,u=0;for(var h=0;h<p.length;h++){const f=p[h],w=g[h],v=f*f,y=w*w;c+=v;q+=y;d+=f*w;e+=v*f;k+=y*w;r+=f*y;u+=w*v}p=c;g=d;h=q;e=.5*(e+r);k=.5*(k+u);u=p*h-d*g;r=(e*h-k*g)/u;k=(p*k-d*e)/u;u=a.createScreenPoint(r+t,k+n);return{radius:Math.sqrt(r*r+k*k+(c+q)/l.length),center:u}};b.getPointerId=function(l){({native:l}=l);const {pointerId:c,button:t,pointerType:n}=l;return"mouse"===
n?`${c}:${t}`:`${n}`};b.manhattanDistance=function(l,c){return Math.abs(c.x-l.x)+Math.abs(c.y-l.y)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/Drag":function(){define(["exports","../../../core/screenUtils","../../../core/time","../InputHandler","./support"],function(b,a,l,c,t){function n(e){const k=[];e.forEach(r=>{k.push(a.createScreenPoint(r.event.x,r.event.y))});return t.fitCircleLSQ(k)}function p(e){const k=n(e);let r=0;e.forEach(u=>{var h=q(u,
k);for(h-=u.lastAngle;h>Math.PI;)h-=2*Math.PI;for(;h<-Math.PI;)h+=2*Math.PI;h=u.lastAngle+h;u.lastAngle=h;r+=h-u.initialAngle});r/=e.size||1;return{angle:r,radius:k.radius,center:k.center}}function g(e){const k=new Map;e.forEach((r,u)=>k.set(u,r.event));return k}function q(e,k){e=e.event;return Math.atan2(e.y-k.center.y,e.x-k.center.x)}class d extends c.InputHandler{constructor(e){super(!1);this._navigationTouch=e;this._startStateModifiers=new Set;this._activePointerMap=new Map;this._isCurrentDragSuppressed=
this._isDragging=!1;this._drag=this.registerOutgoing("drag");this.registerIncoming("pointer-drag",this._handlePointerDrag.bind(this));this.registerIncoming("pointer-up",this._handlePointerUpAndPointerLost.bind(this));this.registerIncoming("pointer-capture-lost",this._handlePointerUpAndPointerLost.bind(this));this.registerIncoming("pointer-cancel",this._handlePointerUpAndPointerLost.bind(this))}_createPayload(e,k,r,u){return{action:e,pointerType:this._pointerType,button:this._mouseButton,buttons:k.buttons,
timestamp:u,pointers:g(this._activePointerMap),pointer:k,angle:r.angle,radius:r.radius,center:r.center}}_addPointer(e){var k=e.native.pointerId;const r=p(this._activePointerMap).angle;e={event:e,initialAngle:0,lastAngle:0};this._activePointerMap.set(k,e);k=q(e,n(this._activePointerMap));e.initialAngle=k;e.lastAngle=k;this._updatePointerAngles(r)}_updatePointer(e){if(!e||null!=e.x||null!=e.y){var k=this._activePointerMap.get(e.native.pointerId);k?k.event=e:this._addPointer(e)}}_removePointer(e){const k=
p(this._activePointerMap).angle;this._activePointerMap.delete(e);this._updatePointerAngles(k)}_updatePointerAngles(e){const k=p(this._activePointerMap);this._activePointerMap.forEach(r=>{r.initialAngle=q(r,k)-e;r.lastAngle=q(r,k)-e})}_emitEvent(e,k,r){const u=p(this._activePointerMap);this._drag.emit(this._createPayload(e,k,u,r),void 0,this._startStateModifiers)}_handlePointerUpAndPointerLost(e){const k=e.data.native.pointerId,r=l.Milliseconds(e.timestamp);this._activePointerMap.get(k)&&(1===this._activePointerMap.size?
(this._updatePointer(e.data),!this._isCurrentDragSuppressed&&this._emitEvent("end",e.data,r),this._isCurrentDragSuppressed=this._isDragging=!1,this._removePointer(k)):(this._removePointer(k),this._emitEvent("removed",e.data,l.Milliseconds(e.timestamp))))}_handlePointerDrag(e){const k=e.data,r=k.currentEvent,u=l.Milliseconds(e.timestamp);switch(k.action){case "start":case "update":this._isDragging?this._activePointerMap.has(r.native.pointerId)?(this._updatePointer(r),!this._isCurrentDragSuppressed&&
this._emitEvent("update",r,u)):(this._addPointer(r),this._emitEvent("added",r,u),this._isCurrentDragSuppressed=this._isSuppressed):(this._updatePointer(r),this._pointerType=e.data.startEvent.pointerType,this._mouseButton=e.data.startEvent.button,this._startStateModifiers=e.modifiers,this._isDragging=!0,this._isCurrentDragSuppressed=this._isSuppressed,!this._isCurrentDragSuppressed&&this._emitEvent("start",r,u))}}get _isSuppressed(){return!!this._navigationTouch&&!this._navigationTouch.browserTouchPanEnabled&&
"touch"===this._pointerType&&1===this._activePointerMap.size}}b.Button=void 0;(function(e){e[e.Left=0]="Left";e[e.Middle=1]="Middle";e[e.Right=2]="Right";e[e.Back=3]="Back";e[e.Forward=4]="Forward";e[e.Undefined=-1]="Undefined"})(b.Button||(b.Button={}));b.Drag=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/ImmediateDoubleClick":function(){define(["exports","../../../core/clock","../InputHandler","./support"],function(b,a,l,c){class t extends l.InputHandler{constructor(n=
c.DefaultParameters.maximumDoubleClickDelay,p=c.DefaultParameters.maximumDoubleClickDistance,g=c.DefaultParameters.maximumDoubleTouchDelay,q=c.DefaultParameters.maximumDoubleTouchDistance,d=a.clock){super(!1);this._maximumDoubleClickDelay=n;this._maximumDoubleClickDistance=p;this._maximumDoubleTouchDelay=g;this._maximumDoubleTouchDistance=q;this._clock=d;this._pointerState=new Map;this._immediateDoubleClick=this.registerOutgoing("immediate-double-click");this.registerIncoming("pointer-down",this._handlePointerDown.bind(this));
this.registerIncoming("pointer-up",this._handlePointerUp.bind(this))}onUninstall(){this._pointerState.forEach(n=>{n.immediateDoubleClick&&n.immediateDoubleClick.timeoutHandle.remove()});super.onUninstall()}_handlePointerDown(n){n=n.data;const p=c.getPointerId(n);this._pointerState.has(p)||(this._pointerState.set(p,{downButton:n.native.button,x:n.x,y:n.y,immediateDoubleClick:null}),this.startCapturingPointer(n.native))}_handlePointerUp(n){const p=n.data;var g=c.getPointerId(p);if((g=this._pointerState.get(g))&&
g.downButton===p.native.button){const q=g.immediateDoubleClick,d="touch"===n.data.native.pointerType?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;q?(q.timeoutHandle.remove(),c.manhattanDistance(q,n.data)>d?this._startImmediateDoubleClick(n,g):(this._immediateDoubleClick.emit(n.data,void 0,q.modifiers),this._removeState(p))):c.manhattanDistance(g,n.data)>d?this._removeState(p):this._startImmediateDoubleClick(n,g)}}_startImmediateDoubleClick(n,p){p.immediateDoubleClick={x:n.data.x,
y:n.data.y,modifiers:n.modifiers,timeoutHandle:this._clock.setTimeout(()=>this._removeState(n.data),"touch"===n.data.native.pointerType?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay)}}_removeState(n){const p=c.getPointerId(n);this._pointerState.delete(p);this.stopCapturingPointer(n.native);this.refreshHasPendingInputs()}}b.ImmediateDoubleClick=t;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/PointerClickHoldAndDrag":function(){define(["exports",
"../../../core/clock","../../../core/maybe","../InputHandler","./support"],function(b,a,l,c,t){function n(g,q,d){return{action:g,startEvent:q.startEvent,previousEvent:q.previousEvent,currentEvent:d}}class p extends c.InputHandler{constructor(g=t.DefaultParameters.maximumClickDelay,q=t.DefaultParameters.movementUntilMouseDrag,d=t.DefaultParameters.movementUntilPenDrag,e=t.DefaultParameters.movementUntilTouchDrag,k=t.DefaultParameters.holdDelay,r=a.clock){super(!1);this._maximumClickDelay=g;this._movementUntilMouseDrag=
q;this._movementUntilPenDrag=d;this._movementUntilTouchDrag=e;this._holdDelay=k;this._clock=r;this._pointerState=new Map;this._pointerDrag=this.registerOutgoing("pointer-drag");this._immediateClick=this.registerOutgoing("immediate-click");this._pointerHold=this.registerOutgoing("hold");this.registerIncoming("pointer-down",u=>this._handlePointerDown(u));this.registerIncoming("pointer-up",u=>this._handlePointerLoss(u,"pointer-up"));this.registerIncoming("pointer-capture-lost",u=>this._handlePointerLoss(u,
"pointer-capture-lost"));this.registerIncoming("pointer-cancel",u=>this._handlePointerLoss(u,"pointer-cancel"));this._moveHandle=this.registerIncoming("pointer-move",u=>this._handlePointerMove(u));this._moveHandle.pause()}onUninstall(){this._pointerState.forEach(g=>{g.holdTimeout=l.removeMaybe(g.holdTimeout)});super.onUninstall()}_handlePointerDown(g){const q=g.data,d=q.native.pointerId;var e=null;0===this._pointerState.size&&(e=this._clock.setTimeout(()=>{const k=this._pointerState.get(d);k&&(k.isDragging||
(this._pointerHold.emit(k.previousEvent,void 0,g.modifiers),k.holdEmitted=!0),k.holdTimeout=null)},this._holdDelay));e={startEvent:q,previousEvent:q,startTimestamp:g.timestamp,isDragging:!1,downButton:q.native.button,holdTimeout:e,modifiers:new Set};this._pointerState.set(d,e);this.startCapturingPointer(q.native);this._moveHandle.resume();1<this._pointerState.size&&this._startDragging(g)}_handlePointerMove(g){const q=g.data,d=this._pointerState.get(q.native.pointerId);if(d){if(d.isDragging)this._pointerDrag.emit(n("update",
d,q),void 0,d.modifiers);else{const e=t.euclideanDistance(q,d.startEvent),k=this._getDragThreshold(q.native.pointerType);e>k&&this._startDragging(g)}d.previousEvent=q}}_getDragThreshold(g){switch(g){case "touch":return this._movementUntilTouchDrag;case "pen":return this._movementUntilPenDrag;default:return this._movementUntilMouseDrag}}_startDragging(g){const q=g.data,d=q.native.pointerId;this._pointerState.forEach(e=>{null!=e.holdTimeout&&(e.holdTimeout.remove(),e.holdTimeout=null);e.isDragging||
(e.modifiers=g.modifiers,e.isDragging=!0,d===e.startEvent.native.pointerId?this._pointerDrag.emit(n("start",e,q)):this._pointerDrag.emit(n("start",e,e.previousEvent),g.timestamp))})}_handlePointerLoss(g,q){const d=g.data,e=d.native.pointerId,k=this._pointerState.get(e);k&&(null!=k.holdTimeout&&(k.holdTimeout.remove(),k.holdTimeout=null),k.isDragging?this._pointerDrag.emit(n("end",k,"pointer-up"===q?d:k.previousEvent),void 0,k.modifiers):"pointer-up"===q&&k.downButton===d.native.button&&g.timestamp-
k.startTimestamp<=this._maximumClickDelay&&!k.holdEmitted&&this._immediateClick.emit(d),this._pointerState.delete(e),this.stopCapturingPointer(d.native),0===this._pointerState.size&&this._moveHandle.pause())}}b.PointerClickHoldAndDrag=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/input/recognizers/SingleAndDoubleClick":function(){define(["exports","../../../core/clock","../../../core/maybe","../InputHandler","./support"],function(b,a,l,c,t){class n extends c.InputHandler{constructor(p=
t.DefaultParameters.maximumDoubleClickDelay,g=t.DefaultParameters.maximumDoubleClickDistance,q=t.DefaultParameters.maximumDoubleTouchDelay,d=t.DefaultParameters.maximumDoubleTouchDistance,e=a.clock){super(!1);this._maximumDoubleClickDelay=p;this._maximumDoubleClickDistance=g;this._maximumDoubleTouchDelay=q;this._maximumDoubleTouchDistance=d;this._clock=e;this._pointerState=new Map;this._click=this.registerOutgoing("click");this._doubleClick=this.registerOutgoing("double-click");this.registerIncoming("immediate-click",
k=>this._handleImmediateClick(k));this.registerIncoming("pointer-down",k=>this._handlePointerDown(k))}onUninstall(){this._pointerState.forEach(p=>p.doubleClickTimer=l.removeMaybe(p.doubleClickTimer))}get hasPendingInputs(){for(const p of this._pointerState.values())if(null!=p.doubleClickTimer)return!0;return!1}_clearDoubleClickTimer(p,g){const q=this._pointerState.get(p);q&&(q.doubleClickTimer=l.removeMaybe(q.doubleClickTimer),g&&this._click.emit(q.event.data,void 0,q.event.modifiers),this._pointerState.delete(p),
this.refreshHasPendingInputs())}_doubleClickTimeoutExceeded(p){const g=this._pointerState.get(p);1===g.pointerDownCount&&this._click.emit(g.event.data,void 0,g.event.modifiers);g.doubleClickTimer=null;this._pointerState.delete(p);this.refreshHasPendingInputs()}_handleImmediateClick(p){const g=p.data;var {pointerType:q}=g.native;const {pointerId:d,pointerType:e,button:k}=g.native;var r="mouse"===e?`${d}:${k}`:`${e}`;if(this._pointerState.has(r)){var u=this._pointerState.get(r),{data:h,modifiers:f}=
u.event;q="touch"===q?this._maximumDoubleTouchDistance:this._maximumDoubleClickDistance;t.manhattanDistance(h,g)>q?(this._clearDoubleClickTimer(r,!0),this._startClick(p)):(this._clearDoubleClickTimer(r,!1),2===u.pointerDownCount&&this._doubleClick.emit(h,void 0,f))}else this._startClick(p)}_handlePointerDown(p){p=t.getPointerId(p.data);if(p=this._pointerState.get(p))p.pointerDownCount+=1}_startClick(p){var {data:g}=p;const {native:{pointerType:q}}=g,d=t.getPointerId(g);g=this._clock.setTimeout(()=>
this._doubleClickTimeoutExceeded(d),"touch"===q?this._maximumDoubleTouchDelay:this._maximumDoubleClickDelay);this._pointerState.set(d,{event:p,doubleClickTimer:g,pointerDownCount:1});this.refreshHasPendingInputs()}}b.SingleAndDoubleClick=n;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/StationaryManager":function(){define("exports ../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,l,c,t,n,p,g){b.StationaryManager=class extends l{constructor(){super(...arguments);this._timer=void 0}get stationary(){return!this._timer}flip(){this._timestamp=performance.now();null==this._timer&&(this._timer=setInterval(()=>{160<=performance.now()-this._timestamp&&this.clear()},160))}clear(){this._timer&&(clearInterval(this._timer),this._timer=void 0)}};a.__decorate([c.property()],b.StationaryManager.prototype,"_timer",void 0);a.__decorate([c.property()],b.StationaryManager.prototype,
"stationary",null);b.StationaryManager=a.__decorate([g.subclass("esri.views.2d.support.StationaryManager")],b.StationaryManager);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/AnimationManager":function(){define("../../chunks/tslib.es6 ../../Viewpoint ../../core/Accessor ../../core/has ../../core/maybe ../../core/scheduling ../../core/screenUtils ../../core/time ../../core/accessorSupport/decorators/property ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../core/libs/gl-matrix-2/factories/vec2f64 ../../geometry/Point ../ViewAnimation ./PaddedViewState ./viewpointUtils ./pointToPoint/Camera ../animation/easing ../animation/pointToPoint/Animation ../animation/pointToPoint/Settings".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u,h,f,w,v,y,x,m){function z(A,D,F,I){if(null!=D?.duration)return!0;const {time:S,isLinear:T}=A;A=D?.speedFactor||1;if(S>(D?.maxDuration??m.defaultSettings2D.maxDuration/A))return!1;if(T){var U=r.create();D=p.createScreenPoint(...I.toScreen(U,...F.center));U=p.createScreenPoint(...F.toScreen(U,...I.center));F=null!=U&&U.x>-1*F.size[0]&&U.x<2*F.size[0]&&U.y>-1*F.size[1]&&U.y<2*F.size[1];I=null!=D&&D.x>-1*I.size[0]&&D.x<2*I.size[0]&&D.y>-1*I.size[1]&&D.y<2*I.size[1];
if(S>2E3/A&&!F&&!I)return!1}return!0}class B{constructor(A){this._view=A;this._animation=new x.Animation(()=>new v.Camera(this._view));this._current=new v.Camera(this._view)}get _source(){return this._animation.definition.source}get _target(){return this._animation.definition.target}get duration(){return this._animation.time}get animation(){return this._animation}update(A,D,F={}){w.copy(this._current.viewpoint,A);w.copy(this._source.viewpoint,A);w.copy(this._target.viewpoint,D);this._animation.update(this._source,
this._target,F)}applyRatio(A,D){this._animation.cameraAt(D,this._current);w.copy(A,this._current.viewpoint)}}l=class extends l{constructor(A){super(A);this._animation=null;this._destinationViewState=new f;this.updateFunction=null;this.easing=y.EasingFunctions.ease;this.viewpoint=new a({targetGeometry:new u,scale:0,rotation:0});this._updateTask=n.addFrameTask({postRender:this._postRender.bind(this)});this._updateTask.pause();this._transition=new B(A.view)}destroy(){this._updateTask=t.removeMaybe(this._updateTask)}get animation(){return this._animation}set animation(A){this._animation=
A;this.view.animation=A}animate(A,D,F){this.stop();w.copy(this.viewpoint,D);const I=A.target;this._transition.update(this.viewpoint,I,{apex:{maximumDistance:Math.min(64*Math.min(D.scale,I.scale),this.view.constraints.effectiveMinScale),desiredSlope:5E-8},duration:F?.duration,maxDuration:"auto"===F?.animationMode?g.Milliseconds(Infinity):F?.maxDuration??m.defaultSettings2D.maxDuration,speedFactor:F?.speedFactor,easing:("string"===typeof F?.easing?y.EasingFunctions[F.easing]:F?.easing)||this.easing});
"auto"===F?.animationMode&&(this._destinationViewState.copy(this.view.state),this._destinationViewState.viewpoint=I,z(this._transition.animation,F,this.view.state,this._destinationViewState)||this._transition.update(this.viewpoint,I,{duration:g.Milliseconds(0)}));D=()=>{this.animation===A&&this._updateTask&&("finished"===A.state&&(this._transition.applyRatio(this.viewpoint,1),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())),this.updateFunction=this.animation=null)};A.when(D,D);
this._startTime=performance.now();this._updateTask.resume();return this.animation=A}animateContinuous(A,D){this.stop();this.updateFunction=D;this.viewpoint=A;const F=new h({target:A.clone()});A=()=>{this.animation===F&&this._updateTask&&(this.updateFunction=this.animation=null)};F.when(A,A);this._startTime=performance.now();this._updateTask.resume();return this.animation=F}stop(){this.animation&&(this.animation.stop(),this.updateFunction=this.animation=null)}_postRender(A){var D=this.animation;D&&
D.state!==h.State.STOPPED?(this.updateFunction?(this.updateFunction(this.viewpoint,A.deltaTime),this.animation?.update(this.viewpoint)):(A=performance.now()-this._startTime,D=this._transition.duration,A=0<D?A/D:1,D=1<=A,this._transition.applyRatio(this.viewpoint,A),D&&this.animation?.finish()),this.view.state&&(this.view.state.viewpoint=this.viewpoint.clone())):this._updateTask.pause()}};b.__decorate([q.property()],l.prototype,"easing",void 0);b.__decorate([q.property()],l.prototype,"view",void 0);
b.__decorate([q.property()],l.prototype,"viewpoint",void 0);return l=b.__decorate([k.subclass("esri.views.2d.AnimationManager")],l)})},"esri/views/2d/pointToPoint/Camera":function(){define("exports ../../../Viewpoint ../../../core/mathUtils ../../../geometry/Point ../../../geometry/support/pointUtils ../viewpointUtils".split(" "),function(b,a,l,c,t,n){class p{constructor(g){this._view=g;this.viewpoint=new a({targetGeometry:new c,scale:0,rotation:0})}get view(){return this._view}get size(){const [g,
q]=this._view.size;return Math.sqrt(g*g+q*q)}get scale(){return this.viewpoint.scale}get rotation(){return this.viewpoint.rotation}get center(){return this.viewpoint.targetGeometry}get scaleToResolutionFactor(){return n.getScaleToResolutionFactor(this.center.spatialReference)}pixelsPerPanAtZoom(g){return 1/(g*this.scaleToResolutionFactor)}zoomAtPixelsPerPan(g){return 1/(g*this.scaleToResolutionFactor)}pixelsPerRotate(){return this.size/2}compareTo(g,q){q.pan=t.distance(this.center,g.center);let d=
Math.abs(g.rotation-this.rotation);q.rotate=l.deg2rad(180<=d?360-d:d);q.sourceZoom=this.scale;q.targetZoom=g.scale}interpolate(g,q,d){const {pan:e,rotate:k,zoom:r,zoomOffset:u}=d;({center:d}=this);d.spatialReference=g.center.spatialReference;d.x=l.lerp(g.center.x,q.center.x,e);d.y=l.lerp(g.center.y,q.center.y,e);this.viewpoint.scale=l.lerp(g.scale,q.scale+u,r);g=g.rotation;q=q.rotation;180<=Math.abs(q-g)&&(g+=360*(g<q?1:-1));this.viewpoint.rotation=l.lerp(g,q,k)}copyFrom(g){n.copy(this.viewpoint,
g.viewpoint);this._view=g.view}}b.Camera=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/easing":function(){define(["exports","../2d/unitBezier"],function(b,a){function l(G){const M=2*(G-Math.sqrt((G-1)*G)),V=M/2/G;return Z=>Z<V?G*Z*Z:M*Z-M+1}function c(G,M){return(V,Z)=>V<M?M*G(V/M,Z):1-G((1-V)/(1-M),Z)*(1-M)}const t=G=>G,n=G=>G*G,p=G=>1-n(1-G),g=G=>.5>G?n(2*G)/2:(1-n(1-2*(G-.5))+1)/2,q=G=>G*G*G,d=G=>1-q(1-G),e=G=>.5>G?q(2*G)/2:(1-q(1-2*(G-.5))+1)/2,k=G=>G*
G*G*G,r=G=>1-k(1-G),u=G=>.5>G?k(2*G)/2:(1-k(1-2*(G-.5))+1)/2,h=G=>G*G*G*G*G,f=G=>1-h(1-G),w=G=>.5>G?h(2*G)/2:(1-h(1-2*(G-.5))+1)/2,v=G=>-Math.cos(G*Math.PI/2)+1,y=G=>1-v(1-G),x=G=>.5>G?v(2*G)/2:(1-v(1-2*(G-.5))+1)/2,m=G=>2**(10*(G-1)),z=G=>1-2**(10*(1-G-1)),B=G=>.5>G?2**(10*(2*G-1))/2:(1-2**(10*(1-2*(G-.5)-1))+1)/2,A=G=>-(Math.sqrt(1-G*G)-1),D=G=>1-A(1-G),F=G=>.5>G?A(2*G)/2:(1-A(1-2*(G-.5))+1)/2,I=c(l(1),1),S=c(l(1),0),T=c(l(1),.5),U=c(l(2),1),L=c(l(2),0),O=c(l(2),.5),W=c(l(3),1),C=c(l(3),0),E=c(l(3),
.5),N=c(l(4),1),X=c(l(4),0),J=c(l(4),.5);b.EasingFunctions={linear:t,"in-quad":n,"out-quad":p,"in-out-quad":g,"in-coast-quad":I,"out-coast-quad":S,"in-out-coast-quad":T,"in-cubic":q,"out-cubic":d,"in-out-cubic":e,"in-coast-cubic":U,"out-coast-cubic":L,"in-out-coast-cubic":O,"in-quart":k,"out-quart":r,"in-out-quart":u,"in-coast-quart":W,"out-coast-quart":C,"in-out-coast-quart":E,"in-quint":h,"out-quint":f,"in-out-quint":w,"in-coast-quint":N,"out-coast-quint":X,"in-out-coast-quint":J,"in-sine":v,"out-sine":y,
"in-out-sine":x,"in-expo":m,"out-expo":z,"in-out-expo":B,"in-circ":A,"out-circ":D,"in-out-circ":F,ease:G=>a.easingFunctions.ease(G),"ease-in":G=>a.easingFunctions.easeIn(G),"ease-out":G=>a.easingFunctions.easeOut(G),"ease-in-out":G=>a.easingFunctions.easeInOut(G)};b.inCirc=A;b.inCoastCubic=U;b.inCoastQuad=I;b.inCoastQuart=W;b.inCoastQuint=N;b.inCubic=q;b.inExpo=m;b.inOutCirc=F;b.inOutCoastCubic=O;b.inOutCoastQuad=T;b.inOutCoastQuart=E;b.inOutCoastQuint=J;b.inOutCubic=e;b.inOutExpo=B;b.inOutQuad=g;
b.inOutQuart=u;b.inOutQuint=w;b.inOutSine=x;b.inQuad=n;b.inQuart=k;b.inQuint=h;b.inSine=v;b.linear=t;b.outCirc=D;b.outCoastCubic=L;b.outCoastQuad=S;b.outCoastQuart=C;b.outCoastQuint=X;b.outCubic=d;b.outExpo=z;b.outQuad=p;b.outQuart=r;b.outQuint=f;b.outSine=y;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/unitBezier":function(){define(["exports"],function(b){function a(t,n,p,g){function q(f,w){var v;let y,x;y=f;for(v=0;8>v;v++){x=((k*y+e)*y+d)*y-f;if(Math.abs(x)<w)return y;
var m=(3*k*y+2*e)*y+d;if(1E-6>Math.abs(m))break;y-=x/m}m=0;v=1;y=f;if(y<m)return m;if(y>v)return v;for(;m<v;){x=((k*y+e)*y+d)*y;if(Math.abs(x-f)<w)break;f>x?m=y:v=y;y=.5*(v-m)+m}return y}const d=3*t,e=3*(p-t)-d,k=1-d-e,r=3*n,u=3*(g-n)-r,h=1-r-u;return function(f,w=1E-6){f=q(f,w);return((h*f+u)*f+r)*f}}const l=/^cubic-bezier\((.*)\)/,c={};c.ease=a(.25,.1,.25,1);c.linear=a(0,0,1,1);c.easeIn=c["ease-in"]=a(.42,0,1,1);c.easeOut=c["ease-out"]=a(0,0,.58,1);c.easeInOut=c["ease-in-out"]=a(.42,0,.58,1);b.easingFunctions=
c;b.parse=function(t){let n=c[t]||null;!n&&(t=l.exec(t))&&(t=t[1].split(",").map(p=>parseFloat(p.trim())),4!==t.length||t.some(p=>isNaN(p))||(n=a.apply(a,t)));return n};b.unitBezier=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/Animation":function(){define("exports ../../../core/time ../easing ./Definition ./InterpolateComponents ./Settings ./apex/Path".split(" "),function(b,a,l,c,t,n,p){const g=new t.InterpolateComponents;b.Animation=class{get time(){return this._time}get isLinear(){return 1===
this.path.segments.length}constructor(q){this._time=a.Milliseconds(0);this._easing=l.inOutCoastQuad;this.definition=new c.Definition(q);this.path=new p.Path}update(q,d,e){this.definition.update(q,d,e);this.path.update(this.definition,e);this._time=this._applyTimeSettings(a.millisecondsFromSeconds(isFinite(this.path.time)?this.path.time:a.Seconds(0)),e);this._easing=e.easing??(1E3<=this._time?l.inOutCoastQuad:l.outExpo)}cameraAt(q,d){q=Math.min(Math.max(0,q),1);q=this._normalizedEasing(q);q=this.path.interpolateComponentsAt(q,
g);d.interpolate(this.definition.source,this.definition.target,q)}_normalizedEasing(q){const d=this._easing(0,this._time),e=this._easing(1,this._time);return(this._easing(q,this._time)-d)/(e-d)}_applyTimeSettings(q,d){const e=null!=d.speedFactor?d.speedFactor:1,k=d.minDuration??n.defaultSettings.minDuration/e,r=d.maxDuration??n.defaultSettings.maxDuration/e;return q=null!=d.duration?a.Milliseconds(d.duration):a.Milliseconds(Math.min(Math.max(q/e,k),r))}};Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/views/animation/pointToPoint/Definition":function(){define(["exports","../../../core/libs/gl-matrix-2/math/common","./Camera","./Settings"],function(b,a,l,c){class t{constructor(n){this._createCamera=n;this.compared=new l.CompareResult;this.segmentStart=0;this.segmentEnd=1;this.settings={desiredScreenFlow:c.defaultSettings.desiredScreenFlow};this.source=n();this.target=n()}clone(){const n=new t(this._createCamera);n.copyFrom(this);return n}copyFrom(n){this.update(n.source,
n.target,n.settings)}update(n,p,g){this.source!==n&&this.source.copyFrom(n);this.target!==p&&this.target.copyFrom(p);this.source.compareTo(this.target,this.compared);this.settings.desiredScreenFlow=g.desiredScreenFlow??c.defaultSettings.desiredScreenFlow;this.desiredPixelFlow=this.settings.desiredScreenFlow*this.target.size;this.halfWindowSize=this.target.size/2}halfWindowPanAtZoom(n){n=this.target.pixelsPerPanAtZoom(n);return this.halfWindowSize/n}get hasZoom(){return 1E-5<Math.abs(this.compared.sourceZoom-
this.compared.targetZoom)}get hasPan(){return this.compared.pan>a.getEpsilon()}get hasFov(){return Math.abs(this.compared.fov)>a.getEpsilon()}get hasRotate(){return this.compared.rotate>a.getEpsilon()}}b.Definition=t;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/Camera":function(){define(["exports"],function(b){class a{constructor(){this.targetZoom=this.sourceZoom=this.fov=this.rotate=this.pan=0}}b.CompareResult=a;Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/views/animation/pointToPoint/Settings":function(){define(["exports","../../../core/time"],function(b,a){const l={desiredScreenFlow:2,minDuration:a.Milliseconds(500),maxDuration:a.Milliseconds(8E3)};a={...l,maxDuration:a.Milliseconds(4E3)};b.defaultSettings=l;b.defaultSettings2D=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/InterpolateComponents":function(){define(["exports"],function(b){class a{constructor(){this.zoomOffset=
this.fov=this.zoom=this.rotate=this.pan=0}}b.InterpolateComponents=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/apex/Path":function(){define(["exports","../../easing","../Path","../Segment","./planning"],function(b,a,l,c,t){class n extends l.Path{constructor(p,g){super();this._preallocSegments=[new c.Segment,new c.Segment,new c.Segment];this._descensionSegment=this._ascensionSegment=null;this.update(p,g)}update(p,g){p&&(this.definition?this.definition.copyFrom(p):
this.definition=p.clone(),p=g?.apex?t.optimalDistance(p,g.apex):null,this.segments.length=0,this._descensionSegment=this._ascensionSegment=null,p?this._updateWithApex(p,g?.apex):this._updateWithoutApex())}segmentInterpolateComponentsAt(p,g,q){p.interpolateComponentsAt(g,q);p===this._ascensionSegment?q.zoom=a.outQuad(q.zoom):p===this._descensionSegment&&(q.zoom=a.inQuad(q.zoom))}_updateWithApex(p,g){const [q,d,e]=this._preallocSegments,k=g?.ascensionFactor??.5;g=Math.min(1-k,null!=g?.ascensionFactor&&
null!=g.descensionFactor?g.descensionFactor:.5);const r=1-k-g;q.definition?q.definition.copyFrom(this.definition):q.definition=this.definition.clone();q.definition.compared.targetZoom=p;q.definition.compared.pan=this.definition.compared.pan*k;q.definition.compared.rotate=this.definition.compared.rotate*k;q.definition.segmentEnd=k;q.update();this._ascensionSegment=q;this.segments.push(q);0<r&&(d.definition?d.definition.copyFrom(this.definition):d.definition=this.definition.clone(),d.definition.copyFrom(this.definition),
d.definition.compared.sourceZoom=p,d.definition.compared.targetZoom=p,d.definition.compared.pan=this.definition.compared.pan*r,d.definition.compared.rotate=this.definition.compared.rotate*r,d.definition.segmentStart=q.definition.segmentEnd,d.definition.segmentEnd=q.definition.segmentEnd+r,d.update(),this.segments.push(d));e.definition?e.definition.copyFrom(this.definition):e.definition=this.definition.clone();e.definition.compared.sourceZoom=p;e.definition.compared.pan=this.definition.compared.pan*
g;e.definition.compared.rotate=this.definition.compared.rotate*g;e.definition.segmentStart=k+r;e.update();this._descensionSegment=e;this.segments.push(e)}_updateWithoutApex(){const [p]=this._preallocSegments;p.update(this.definition);this.segments.push(p)}}b.Path=n;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/Path":function(){define(["exports","../../../core/time"],function(b,a){b.Path=class{constructor(){this.segments=[]}get time(){return this.segments.reduce((l,
c)=>a.Seconds(l+c.time),a.Seconds(0))}interpolateComponentsAt(l,c){l=Math.min(Math.max(l,0),1);l*=this.time;var t=0,n=0;const p=this.definition,g=this.segments.reduce((q,d)=>q||d.definition.hasZoom,!1);for(let q=0;q<this.segments.length;q++){const d=this.segments[q],e=d.definition;if(l<=d.time||q===this.segments.length-1){this.segmentInterpolateComponentsAt(d,0===d.time?0:l/d.time,c);p.hasPan&&!isNaN(c.pan)&&isFinite(p.compared.pan)?c.pan=(t+e.compared.pan*c.pan)/p.compared.pan:c.pan=1;p.hasRotate&&
!isNaN(c.rotate)&&isFinite(p.compared.rotate)?c.rotate=(n+e.compared.rotate*c.rotate)/p.compared.rotate:c.rotate=1;if(g&&!isNaN(c.zoom)&&isFinite(e.compared.targetZoom)){const {sourceZoom:k,targetZoom:r}=e.compared;l=c.zoom*(r-k)+k;t=this.segments[0].definition.compared.sourceZoom;n=Math.abs(r-t)>Math.abs(k-t)?r:k;c.zoomOffset=n-this.segments[this.segments.length-1].definition.compared.targetZoom;c.zoom=(l-t)/(n-t)}else c.zoom=1;return c}l-=d.time;t+=e.compared.pan;n+=e.compared.rotate}}segmentInterpolateComponentsAt(l,
c,t){l.interpolateComponentsAt(c,t)}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/Segment":function(){define(["exports","../../../core/mathUtils","../../../core/time"],function(b,a,l){class c{get time(){return this._time}constructor(n){n&&this.update(n)}update(n){n&&(this.definition?this.definition.copyFrom(n):this.definition=n.clone());this._updatePrecomputedVariables();this._updatePixelFlow()}_updatePrecomputedVariables(){var n=this.definition;
const p=n.compared,g=p.sourceZoom;this._zoomSign=g>p.targetZoom?1:-1;this._panPixelsAtSource=p.pan*n.source.pixelsPerPanAtZoom(g);n=(n.source.pixelsPerRotate()+n.target.pixelsPerRotate())/2;this._rotatePixels=p.rotate*n}_updatePixelFlow(){var n=this.definition.compared.sourceZoom,p=this.definition.compared.targetZoom;const {hasZoom:g,hasPan:q,hasRotate:d}=this.definition;var e=0,k=0;g&&(q&&(e=(p/n-1)/(-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2*this._panPixelsAtSource)),d&&(k=Math.log(n/
p)/Math.LN2*this._zoomSign*this.definition.halfWindowSize/this._rotatePixels));this._rotatePixelFlow=this._panPixelFlow=this._zoomPixelFlow=0;n=this.definition.desiredPixelFlow;g&&q&&d?(p=e+k+e*k,this._zoomPixelFlow=e*k/p*n,this._panPixelFlow=k/p*n,this._rotatePixelFlow=e/p*n):g&&q?(k=1+e,this._zoomPixelFlow=e/k*n,this._panPixelFlow=1/k*n):g&&d?(e=1+k,this._zoomPixelFlow=k/e*n,this._rotatePixelFlow=1/e*n):q&&d?(e=this._panPixelsAtSource/this._rotatePixels,k=1+e,this._panPixelFlow=e/k*n,this._rotatePixelFlow=
1/k*n):q?this._panPixelFlow=n:g?this._zoomPixelFlow=n:d&&(this._rotatePixelFlow=n);this._time=l.Seconds(Math.max(this.rotateTime,this.zoomTime,this.panTime));this.fovTime>this._time&&(n=this.fovTime/this._time,this._time=this.fovTime,this._zoomPixelFlow/=n,this._panPixelFlow/=n,this._rotatePixelFlow/=n)}get rotateTime(){return this.definition.hasRotate?l.Seconds(this._rotatePixels/this._rotatePixelFlow):l.Seconds(0)}get zoomTime(){return this.definition.hasZoom?l.Seconds(Math.log(this.definition.compared.sourceZoom/
this.definition.compared.targetZoom)/Math.LN2*this._zoomSign*this.definition.halfWindowSize/this._zoomPixelFlow):l.Seconds(0)}get fovTime(){return this.definition.hasFov?l.Seconds(Math.abs(this.definition.compared.fov)/t):l.Seconds(0)}get panTime(){if(!this.definition.hasPan)return l.Seconds(0);if(this.definition.hasZoom){const n=-1/(this._zoomSign*this.definition.halfWindowSize)*Math.LN2;return l.Seconds(Math.log(this._zoomPixelFlow/this._panPixelFlow*this._panPixelsAtSource*n+1)/(n*this._zoomPixelFlow))}return l.Seconds(this._panPixelsAtSource/
this._panPixelFlow)}_interpolateComponentsZoom(n){if(0===n||1===n)return n;if(this.definition.hasZoom){const p=this.definition.compared.sourceZoom,g=this.definition.compared.targetZoom;return(p*(p/g)**-n-p)/(g-p)}return n}_interpolateComponentsFov(n){if(0===n)return this.definition.segmentStart;if(1===n)return this.definition.segmentEnd;if(this.definition.hasFov){const {segmentStart:p,segmentEnd:g}=this.definition;return p+n*(g-p)}return this.definition.segmentStart}_interpolateComponentsPan(n){if(0===
n||1===n)return n;if(this.definition.hasPan&&this.definition.hasZoom){const p=-1/(this._zoomSign*this.definition.halfWindowSize)*this._zoomPixelFlow;return 1/this._panPixelsAtSource*this._panPixelFlow*(2**(p*n*this._time)-1)/(p*Math.LN2)}return n}_interpolateComponentsRotate(n){return n}interpolateComponentsAt(n,p){n=Math.min(Math.max(n,0),1);p.zoom=this._interpolateComponentsZoom(n);p.pan=this._interpolateComponentsPan(n);p.rotate=this._interpolateComponentsRotate(n);p.zoomOffset=0;p.fov=this._interpolateComponentsFov(n)}}
const t=a.deg2rad(45);b.Segment=c;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/apex/planning":function(){define(["exports","./functions"],function(b,a){function l(c,t){const n=Math.max(c.compared.sourceZoom,c.compared.targetZoom);c=c.source.zoomAtPixelsPerPan(c.desiredPixelFlow/c.compared.pan)/2;return c<n?null!=t.maximumDistance?n+(t.maximumDistance-n)/2:1.5*n:t.maximumDistance?Math.min(t.maximumDistance,c):c}b.optimalDistance=function(c,t){let n=
l(c,t);const p={ascensionFactor:null!=t.ascensionFactor?t.ascensionFactor:.5,descensionFactor:null!=t.descensionFactor?t.descensionFactor:.5};var g=0===p.ascensionFactor,q=0===p.descensionFactor;const d=g?a.tAscensionZoomOnly:a.tAscensionZoomPan,e=g?a.dtAscensionZoomOnly:a.dtAscensionZoomPan,k=g?a.ddtAscensionZoomOnly:a.ddtAscensionZoomPan,r=q?a.tDescensionZoomOnly:a.tDescensionZoomPan,u=q?a.dtDescensionZoomOnly:a.dtDescensionZoomPan,h=q?a.ddtDescensionZoomOnly:a.ddtDescensionZoomPan;g=B=>d(c,B,p)+
a.tPanion(c,B,p)+r(c,B,p);q=B=>e(c,B,p)+a.dtPanion(c,B,p)+u(c,B,p);const f=B=>k(c,B,p)+a.ddtPanion(c,B,p)+h(c,B,p);let w=g(n);const v=a.tBaseLine(c);let y;const x=t.maximumIterations||20,m=null!=t.maximumDistance?t.maximumDistance:Infinity;for(y=0;y<x;y++){var z=t.desiredSlope??1E-6;let B=q(n);Math.abs(B)>z&&(B+=z);z=B/f(n);if(isNaN(z)||n>=m&&0>z){if(!isFinite(m))return null;n=m;w=g(n);break}n-=z;if(n<c.compared.sourceZoom||n<c.compared.targetZoom)return null;z=g(n);if(.005>=Math.abs(z-w)/w)break;
w=z}return w>.7*v||n<c.compared.sourceZoom||n<c.compared.targetZoom?null:n};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/animation/pointToPoint/apex/functions":function(){define(["exports"],function(b){b.ddtAscensionZoomOnly=function(a,l){return-a.halfWindowSize/(l*l*a.desiredPixelFlow*Math.LN2)};b.ddtAscensionZoomPan=function(a,l,c){const t=l-a.compared.sourceZoom,n=1/t,p=1/l,g=Math.log(a.compared.sourceZoom*p);c=(c.ascensionFactor*Math.LN2*a.compared.pan+a.halfWindowPanAtZoom(t))/
a.halfWindowPanAtZoom(1);return a.halfWindowSize*n*(-2*n*p*c+2*n*g+2*p-2*g*c/(t*t)-c/(l*l))/(a.desiredPixelFlow*Math.LN2)};b.ddtDescensionZoomOnly=function(a,l){return-a.halfWindowSize/(l*l*a.desiredPixelFlow*Math.LN2)};b.ddtDescensionZoomPan=function(a,l,c){const t=l-a.compared.targetZoom,n=1/t,p=1/l,g=Math.log(l/a.compared.targetZoom);c=(a.halfWindowPanAtZoom(l)+c.descensionFactor*Math.LN2*a.compared.pan-a.halfWindowPanAtZoom(a.compared.targetZoom))/a.halfWindowPanAtZoom(1);return a.halfWindowSize*
n*(-2*n*p*c-2*n*g+2*p+2*g*c/(t*t)-c/(l*l))/(a.desiredPixelFlow*Math.LN2)};b.ddtPanion=function(a,l,c){return-2*a.compared.pan*a.halfWindowSize*(c.ascensionFactor+c.descensionFactor-1)/(a.desiredPixelFlow*a.halfWindowPanAtZoom(l*l*l))};b.dtAscensionZoomOnly=function(a,l){return a.halfWindowSize/(l*a.desiredPixelFlow*Math.LN2)};b.dtAscensionZoomPan=function(a,l,c){const t=1/l,n=Math.log(a.compared.sourceZoom*t),p=1/a.desiredPixelFlow,g=1/Math.LN2;l-=a.compared.sourceZoom;const q=1/l;c=(c.ascensionFactor*
Math.LN2*a.compared.pan+a.halfWindowPanAtZoom(l))/a.halfWindowPanAtZoom(1);return a.halfWindowSize*t*p*g*q*c-a.halfWindowSize*n*p*g*q+a.halfWindowSize*n*p*g*c/(l*l)};b.dtDescensionZoomOnly=function(a,l){return a.halfWindowSize/(l*a.desiredPixelFlow*Math.LN2)};b.dtDescensionZoomPan=function(a,l,c){const t=Math.log(l/a.compared.targetZoom),n=1/a.desiredPixelFlow,p=1/Math.LN2,g=-l+a.compared.targetZoom,q=1/g;c=(-a.halfWindowPanAtZoom(l)-c.descensionFactor*Math.LN2*a.compared.pan+a.halfWindowPanAtZoom(a.compared.targetZoom))/
a.halfWindowPanAtZoom(1);return-a.halfWindowSize*t*n*p*q+a.halfWindowSize*t*n*p*c/(g*g)+a.halfWindowSize*n*p*q*c/l};b.dtPanion=function(a,l,c){return a.compared.pan*a.halfWindowSize*(c.ascensionFactor+c.descensionFactor-1)/(a.desiredPixelFlow*a.halfWindowPanAtZoom(l*l))};b.tAscensionZoomOnly=function(a,l){return-a.halfWindowSize*Math.log(a.compared.sourceZoom/l)/(a.desiredPixelFlow*Math.LN2)};b.tAscensionZoomPan=function(a,l,c){const t=a.halfWindowPanAtZoom(l-a.compared.sourceZoom);return-a.halfWindowSize*
(c.ascensionFactor*Math.LN2*a.compared.pan+t)*Math.log(a.compared.sourceZoom/l)/(a.desiredPixelFlow*Math.LN2*t)};b.tBaseLine=function(a){var l=a.compared.sourceZoom-a.compared.targetZoom;if(0===l)return a.compared.pan*a.halfWindowSize/(a.desiredPixelFlow*a.halfWindowPanAtZoom(a.compared.sourceZoom));const c=Math.LN2*a.compared.pan;l=a.halfWindowPanAtZoom(l);const t=a.halfWindowSize*Math.log(a.compared.sourceZoom/a.compared.targetZoom)/(a.desiredPixelFlow*Math.LN2*l);return a.compared.sourceZoom<=
a.compared.targetZoom?t*(c-l):t*(c+l)};b.tDescensionZoomOnly=function(a,l){return a.halfWindowSize*Math.log(l/a.compared.targetZoom)/(a.desiredPixelFlow*Math.LN2)};b.tDescensionZoomPan=function(a,l,c){return a.halfWindowSize*(-a.halfWindowPanAtZoom(l)-c.descensionFactor*Math.LN2*a.compared.pan+a.halfWindowPanAtZoom(a.compared.targetZoom))*Math.log(l/a.compared.targetZoom)/(a.desiredPixelFlow*Math.LN2*a.halfWindowPanAtZoom(-l+a.compared.targetZoom))};b.tPanion=function(a,l,c){return-a.compared.pan*
a.halfWindowSize*(c.ascensionFactor+c.descensionFactor-1)/(a.desiredPixelFlow*a.halfWindowPanAtZoom(l))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layerViewModuleImportUtils":function(){define(["require","exports","../../core/Error"],function(b,a,l){function c(){return Promise.all([new Promise((q,d)=>b(["./webglDeps"],q,d)),new Promise((q,d)=>b(["./mapViewDeps"],q,d))])}const t=q=>Object.freeze(Object.defineProperty({__proto__:null,default:q},Symbol.toStringTag,
{value:"Module"})),n=()=>c().then(()=>new Promise((q,d)=>b(["./layers/TileLayerView2D"],e=>q(t(e)),d))),p=()=>c().then(()=>new Promise((q,d)=>b(["./layers/FeatureLayerView2D"],e=>q(t(e)),d))),g={"base-dynamic":()=>c().then(()=>new Promise((q,d)=>b(["./layers/BaseDynamicLayerView2D"],e=>q(t(e)),d))),"base-tile":n,"bing-maps":n,catalog:()=>c().then(()=>new Promise((q,d)=>b(["./layers/CatalogLayerView2D"],e=>q(t(e)),d))),"catalog-dynamic-group":()=>c().then(()=>new Promise((q,d)=>b(["./layers/CatalogDynamicGroupLayerView2D"],
e=>q(t(e)),d))),"catalog-footprint":()=>c().then(()=>new Promise((q,d)=>b(["./layers/CatalogFootprintLayerView2D"],e=>q(t(e)),d))),csv:p,"geo-rss":()=>c().then(()=>new Promise((q,d)=>b(["./layers/GeoRSSLayerView2D"],e=>q(t(e)),d))),feature:p,geojson:p,parquet:p,graphics:()=>c().then(()=>new Promise((q,d)=>b(["./layers/GraphicsLayerView2D"],e=>q(t(e)),d))),group:()=>c().then(()=>new Promise((q,d)=>b(["./layers/GroupLayerView2D"],e=>q(t(e)),d))),imagery:()=>c().then(()=>new Promise((q,d)=>b(["./layers/ImageryLayerView2D"],
e=>q(t(e)),d))),"imagery-tile":()=>c().then(()=>new Promise((q,d)=>b(["./layers/ImageryTileLayerView2D"],e=>q(t(e)),d))),kml:()=>c().then(()=>new Promise((q,d)=>b(["./layers/KMLLayerView2D"],e=>q(t(e)),d))),"knowledge-graph":()=>c().then(()=>new Promise((q,d)=>b(["./layers/KnowledgeGraphLayerView2D"],e=>q(t(e)),d))),"link-chart":()=>c().then(()=>new Promise((q,d)=>b(["./layers/KnowledgeGraphLayerView2D"],e=>q(t(e)),d))),"knowledge-graph-sublayer":p,"map-image":()=>c().then(()=>new Promise((q,d)=>
b(["./layers/MapImageLayerView2D"],e=>q(t(e)),d))),"map-notes":()=>c().then(()=>new Promise((q,d)=>b(["./layers/MapNotesLayerView2D"],e=>q(t(e)),d))),media:()=>c().then(()=>new Promise((q,d)=>b(["./layers/MediaLayerView2D"],e=>q(t(e)),d))),"ogc-feature":()=>c().then(()=>new Promise((q,d)=>b(["./layers/OGCFeatureLayerView2D"],e=>q(t(e)),d))),"open-street-map":n,"oriented-imagery":p,route:()=>c().then(()=>new Promise((q,d)=>b(["./layers/RouteLayerView2D"],e=>q(t(e)),d))),stream:()=>c().then(()=>new Promise((q,
d)=>b(["./layers/StreamLayerView2D"],e=>q(t(e)),d))),"subtype-group":()=>c().then(()=>new Promise((q,d)=>b(["./layers/SubtypeGroupLayerView2D"],e=>q(t(e)),d))),tile:n,"vector-tile":()=>c().then(()=>new Promise((q,d)=>b(["./layers/VectorTileLayerView2D"],e=>q(t(e)),d))),video:()=>c().then(()=>new Promise((q,d)=>b(["./layers/VideoLayerView2D"],e=>q(t(e)),d))),wcs:()=>c().then(()=>new Promise((q,d)=>b(["./layers/ImageryTileLayerView2D"],e=>q(t(e)),d))),"web-tile":n,wfs:p,wms:()=>c().then(()=>new Promise((q,
d)=>b(["./layers/WMSLayerView2D"],e=>q(t(e)),d))),wmts:()=>c().then(()=>new Promise((q,d)=>b(["./layers/WMTSLayerView2D"],e=>q(t(e)),d))),"line-of-sight":null,"base-elevation":null,"building-scene":null,dimension:null,elevation:null,"integrated-mesh":null,"integrated-mesh-3dtiles":null,"point-cloud":null,viewshed:null,voxel:null,scene:null,unknown:null,unsupported:null};a.layerView2DImporter={hasLayerViewModule:q=>null!=g[q.type],importLayerView:q=>{var d=g[q.type];if(null==d)throw q=q.declaredClass?
q.declaredClass.slice(q.declaredClass.lastIndexOf(".")+1):"Unknown",d=q.replaceAll(/([a-z])([A-Z])/g,"$1-$2").toLowerCase(),new l(`${d}:view-not-supported`,`${q} is not supported in 2D`);return d(q)}};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/tiling/TileInfoView":function(){define(["../../../geometry/support/spatialReferenceUtils","./LODInfo","./TileCoverage","./TileKey","./TileSpan"],function(b,a,l,c,t){const n=new c("0/0/0/0");class p{static create(d,e){d[1]>
e[1]&&([d,e]=[e,d]);const [k,r]=d,[u,h]=e;d=u-k;e=h-r;e=0!==e?d/e:0;const f=(Math.ceil(r)-r)*e,w=(Math.floor(r)-r)*e;return new p(k,Math.floor(r),Math.ceil(h),e,0>d?f:w,0>d?w:f,0>d?u:k,0>d?k:u)}constructor(d,e,k,r,u,h,f,w){this.x=d;this.ymin=e;this.ymax=k;this.invM=r;this.leftAdjust=u;this.rightAdjust=h;this.leftBound=f;this.rightBound=w}incrRow(){this.x+=this.invM}getLeftCol(){return Math.max(this.x+this.leftAdjust,this.leftBound)}getRightCol(){return Math.min(this.x+this.rightAdjust,this.rightBound)}}
const g=[[0,0],[0,0],[0,0],[0,0]];class q{constructor(d,e=null,k=d.lods[0].level,r=d.lods[d.lods.length-1].level){this.tileInfo=d;this.fullExtent=e;this.scales=[];this._infoByScale={};this._infoByLevel={};const u=d.lods.filter(f=>f.level>=k&&f.level<=r);this.minScale=u[0].scale;this.maxScale=u[u.length-1].scale;const h=this._lodInfos=u.map(f=>a.create(d,f,e));u.forEach((f,w)=>{this._infoByLevel[f.level]=h[w];this._infoByScale[f.scale]=h[w];this.scales[w]=f.scale},this);this._wrap=d.isWrappable}get spatialReference(){return this.tileInfo.spatialReference}getLODInfoAt(d){return this._infoByLevel["number"===
typeof d?d:d.level]}getTileBounds(d,e,k=!1){n.set(e);return(e=this._infoByLevel[n.level])?e.getTileBounds(d,n,k):d}getTileCoords(d,e,k=!1){n.set(e);return(e=this._infoByLevel[n.level])?e.getTileCoords(d,n,k):d}getTileCoverage(d,e=192,k=!0,r="closest"){if(!k&&(d.scale>this.minScale||d.scale<this.maxScale))return null;k="closest"===r?this.getClosestInfoForScale(d.scale):this.getSmallestInfoForScale(d.scale);r=l.pool.acquire(k);const u=this._wrap;var h=Infinity;let f=-Infinity;const w=r.spans;g[0][0]=
g[0][1]=g[1][1]=g[3][0]=-e;g[1][0]=g[2][0]=d.size[0]+e;g[2][1]=g[3][1]=d.size[1]+e;for(v of g)d.toMap(v,v),v[0]=k.getColumnForX(v[0]),v[1]=k.getRowForY(v[1]);d=[];var v=3;for(e=0;4>e;e++)g[e][1]===g[v][1]?v=e:(v=p.create(g[e],g[v]),h=Math.min(v.ymin,h),f=Math.max(v.ymax,f),void 0===d[v.ymin]&&(d[v.ymin]=[]),d[v.ymin].push(v),v=e);if(null==h||null==f||100<f-h)return null;for(e=[];h<f;){null!=d[h]&&(e=e.concat(d[h]));v=Infinity;var y=-Infinity;for(var x=e.length-1;0<=x;x--){var m=e[x];v=Math.min(v,
m.getLeftCol());y=Math.max(y,m.getRightCol())}v=Math.floor(v);y=Math.floor(y);if(h>=k.first[1]&&h<=k.last[1])if(u)if(k.size[0]<k.worldSize[0])for(x=Math.floor(y/k.worldSize[0]),m=Math.floor(v/k.worldSize[0]);m<=x;m++)w.push(new t(h,Math.max(k.getFirstColumnForWorld(m),v),Math.min(k.getLastColumnForWorld(m),y)));else w.push(new t(h,v,y));else v>k.last[0]||y<k.first[0]||(v=Math.max(v,k.first[0]),y=Math.min(y,k.last[0]),w.push(new t(h,v,y)));h+=1;for(v=e.length-1;0<=v;v--)y=e[v],y.ymax>=h?y.incrRow():
e.splice(v,1)}return r}getTileParentId(d){n.set(d);d=this._lodInfos.indexOf(this._infoByLevel[n.level])-1;if(0>d)return null;this._getTileIdAtLOD(n,this._lodInfos[d],n);return n.id}getTileResolution(d){return(d=this._infoByLevel["object"===typeof d?d.level:d])?d.resolution:-1}getTileScale(d){return(d=this._infoByLevel[d.level])?d.scale:-1}intersects(d,e){n.set(e);e=this._infoByLevel[n.level];const k=d.lodInfo;if(k.resolution>e.resolution){this._getTileIdAtLOD(n,k,n);var r=k.denormalizeCol(n.col,n.world);
for(var u of d.spans)if(u.row===n.row&&u.colFrom<=r&&u.colTo>=r)return!0}if(k.resolution<e.resolution){const [f,w,v,y]=d.spans.reduce((x,m)=>{x[0]=Math.min(x[0],m.row);x[1]=Math.max(x[1],m.row);x[2]=Math.min(x[2],m.colFrom);x[3]=Math.max(x[3],m.colTo);return x},[Infinity,-Infinity,Infinity,-Infinity]);r=e.denormalizeCol(n.col,n.world);d=k.getColumnForX(e.getXForColumn(r));u=k.getRowForY(e.getYForRow(n.row));r=k.getColumnForX(e.getXForColumn(r+1))-1;e=k.getRowForY(e.getYForRow(n.row+1))-1;return!(d>
y||r<v||u>w||e<f)}const h=k.denormalizeCol(n.col,n.world);return d.spans.some(f=>f.row===n.row&&f.colFrom<=h&&f.colTo>=h)}normalizeBounds(d,e,k){d[0]=e[0];d[1]=e[1];d[2]=e[2];d[3]=e[3];this._wrap&&(e=b.getInfo(this.tileInfo.spatialReference),k=-k*(e.valid[1]-e.valid[0]),d[0]+=k,d[2]+=k);return d}getSmallestInfoForScale(d){const e=this.scales;if(this._infoByScale[d])return this._infoByScale[d];if(d>e[0])return this._infoByScale[e[0]];for(let k=1;k<e.length-1;k++)if(d>e[k]+1E-6)return this._infoByScale[e[k-
1]];return this._infoByScale[e[e.length-1]]}getClosestInfoForScale(d){const e=this.scales;if(this._infoByScale[d])return this._infoByScale[d];d=e.reduce((k,r)=>Math.abs(r-d)<Math.abs(k-d)?r:k,e[0]);return this._infoByScale[d]}scaleToLevel(d){const e=this.scales;if(this._infoByScale[d])return this._infoByScale[d].level;for(let k=e.length-1;0<=k;k--)if(d<e[k])return k===e.length-1?this._infoByScale[e[e.length-1]].level:this._infoByScale[e[k]].level+(e[k]-d)/(e[k]-e[k+1]);return this._infoByScale[e[0]].level}scaleToZoom(d){return this.tileInfo.scaleToZoom(d)}zoomToScale(d){return this.tileInfo.zoomToScale(d)}_getTileIdAtLOD(d,
e,k){const r=this._infoByLevel[k.level];d.set(k);if(e.resolution<r.resolution)return null;if(e.resolution===r.resolution)return d;d.level=e.level;d.col=Math.floor(k.col*r.resolution/e.resolution+.01);d.row=Math.floor(k.row*r.resolution/e.resolution+.01);return d}}return q})},"esri/views/2d/tiling/LODInfo":function(){define(["../../../geometry/support/spatialReferenceUtils","./TileKey"],function(b,a){function l(n,p,g){n[0]=p;n[1]=g;return n}const c=new a("0/0/0/0");class t{static create(n,p,g=null){const q=
b.getInfo(n.spatialReference),d=p.origin||[n.origin.x,n.origin.y],e=[n.size[0]*p.resolution,n.size[1]*p.resolution],k=[-Infinity,-Infinity],r=[Infinity,Infinity],u=[Infinity,Infinity];null!=g&&(l(k,Math.max(0,Math.floor((g.xmin-d[0])/e[0])),Math.max(0,Math.floor((d[1]-g.ymax)/e[1]))),l(r,Math.max(0,Math.floor((g.xmax-d[0])/e[0])),Math.max(0,Math.floor((d[1]-g.ymin)/e[1]))),l(u,r[0]-k[0]+1,r[1]-k[1]+1));const {cols:h,rows:f}=p;!g&&h&&f&&(l(k,h[0],f[0]),l(r,h[1],f[1]),l(u,h[1]-h[0]+1,f[1]-f[0]+1));
let w,v;n.isWrappable?(n=[Math.ceil(Math.round((q.valid[1]-q.valid[0])/p.resolution)/n.size[0]),u[1]],g=!0,w=q.origin,v=q.valid):(n=u,g=!1);return new t(p.level,p.resolution,p.scale,d,k,r,u,e,n,g,w,v)}constructor(n,p,g,q,d,e,k,r,u,h,f,w){this.level=n;this.resolution=p;this.scale=g;this.origin=q;this.first=d;this.last=e;this.size=k;this.norm=r;this.worldSize=u;this.wrap=h;this._spatialReferenceOrigin=f;this._spatialReferenceValid=w}normalizeCol(n){if(!this.wrap)return n;const p=this.worldSize[0];return 0>
n?p-1-Math.abs((n+1)%p):n%p}normalizeKey(n){if(this.wrap){var p=this.worldSize[0],g=n.col;0>g?(n.col=g+p,--n.world):g>=p&&(n.col=g-p,n.world+=1)}}denormalizeCol(n,p){return this.wrap?this.worldSize[0]*p+n:n}getWorldForColumn(n){return this.wrap?Math.floor(n/this.worldSize[0]):0}getFirstColumnForWorld(n){return n*this.worldSize[0]+this.first[0]}getLastColumnForWorld(n){return n*this.worldSize[0]+this.first[0]+this.size[0]-1}getColumnForX(n){return(n-this.origin[0])/this.norm[0]}getXForColumn(n){const p=
this.origin[0]+n*this.norm[0],g=this._spatialReferenceOrigin,q=this._spatialReferenceValid;return this.wrap&&g&&q?p===g[0]?q[0]:this.origin[0]===g[0]&&n===this.worldSize[0]?q[1]:p:p}getRowForY(n){return(this.origin[1]-n)/this.norm[1]}getYForRow(n){return this.origin[1]-n*this.norm[1]}getTileBounds(n,p,g=!1){c.set(p);var q=g?c.col:this.denormalizeCol(c.col,c.world),d=c.row;p=this.getXForColumn(q);g=this.getYForRow(d+1);q=this.getXForColumn(q+1);d=this.getYForRow(d);n[0]=p;n[1]=g;n[2]=q;n[3]=d;return n}getTileCoords(n,
p,g=!1){c.set(p);p=g?c.col:this.denormalizeCol(c.col,c.world);Array.isArray(n)?l(n,this.getXForColumn(p),this.getYForRow(c.row)):(n.x=this.getXForColumn(p),n.y=this.getYForRow(c.row));return n}}return t})},"esri/views/2d/tiling/TileKey":function(){define(["../../../core/ObjectPool"],function(b){class a{static getId(l,c,t,n){return"object"===typeof l?`${l.level}/${l.row}/${l.col}/${l.world}`:`${l}/${c}/${t}/${n}`}constructor(l,c,t,n){this.set(l,c,t,n)}get key(){return this}get id(){return this.toString()}get normalizedId(){return`${this.level}/${this.row}/${this.col}`}set id(l){this.set(l)}get hash(){return(this.world&
3)<<30|(this.col&4095)<<22|(this.row&4095)<<8|this.level&63}acquire(l,c,t,n){this.set(l,c,t,n)}contains(l){const c=l.level-this.level;return 0<=c&&this.row===l.row>>c&&this.col===l.col>>c&&this.world===l.world}containsChild(l){const c=l.level-this.level;return 0<c&&this.row===l.row>>c&&this.col===l.col>>c&&this.world===l.world}equals(l){return this.level===l.level&&this.row===l.row&&this.col===l.col&&this.world===l.world}clone(){return new a(this)}release(){this.world=this.col=this.row=this.level=
0}set(l,c,t,n){if(null==l)this.world=this.col=this.row=this.level=0;else if("object"===typeof l)this.level=l.level||0,this.row=l.row||0,this.col=l.col||0,this.world=l.world||0;else if("string"===typeof l){const [p,g,q,d]=l.split("/");this.level=parseFloat(p);this.row=parseFloat(g);this.col=parseFloat(q);this.world=parseFloat(d)}else this.level=+l,this.row=+c,this.col=+t,this.world=+n||0;return this}toString(){return`${this.level}/${this.row}/${this.col}/${this.world}`}getParentKey(){return 0>=this.level?
null:new a(this.level-1,this.row>>1,this.col>>1,this.world)}getNormalizedNeighbor(l,c,t){const n=this.clone();n.col+=l;n.row+=c;t.normalizeKey(n);return n}getChildKeys(){const l=this.level+1,c=this.row<<1,t=this.col<<1,n=this.world;return[new a(l,c,t,n),new a(l,c,t+1,n),new a(l,c+1,t,n),new a(l,c+1,t+1,n)]}compareRowMajor(l){return this.row<l.row?-1:this.row>l.row?1:this.col<l.col?-1:this.col>l.col?1:0}}a.pool=new b(a,null,null,25,50);return a})},"esri/views/2d/tiling/TileCoverage":function(){define(["../../../core/ObjectPool",
"./TileKey"],function(b,a){class l{constructor(){this.spans=[]}acquire(c){this.lodInfo=c}release(){this.lodInfo=null;this.spans.length=0}*keys(){const c=this.lodInfo;for(const {row:t,colFrom:n,colTo:p}of this.spans)for(let g=n;g<=p;g++){const q=c.getWorldForColumn(g);yield new a(c.level,t,c.normalizeCol(g),q)}}forEach(c,t){const {spans:n,lodInfo:p}=this,{level:g}=p;if(0!==n.length)for(const {row:q,colFrom:d,colTo:e}of n)for(let k=d;k<=e;k++)c.call(t,g,q,p.normalizeCol(k),p.getWorldForColumn(k))}}
l.pool=new b(l);return l})},"esri/views/2d/tiling/TileSpan":function(){define(function(){class b{constructor(a,l,c){this.row=a;this.colFrom=l;this.colTo=c}}return b})},"esri/views/2d/tiling/TileQueue":function(){define("../../../chunks/tslib.es6 ../../../core/Accessor ../../../core/MapUtils ../../../core/maybe ../../../core/SetUtils ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../core/libs/gl-matrix-2/math/vec2 ../../support/ScheduledQueueProcessor".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k){const r=[0,0];a=class extends a{constructor(u){super(u);this._keyToItem=new Map;this._tilesByScale=new Map;this.concurrency=6}initialize(){const {concurrency:u,process:h,scheduler:f,priority:w}=this;this._queue=new k.ScheduledQueueProcessor({concurrency:u,scheduler:f,priority:w,process:(v,y)=>{v=this._keyToItem.get(v);return h(v,{signal:y})},peeker:v=>this._peek(v)})}destroy(){this.clear();this._queue=c.destroyMaybe(this._queue)}get length(){return this._queue?this._queue.length:
0}abort(u){this._queue.abort("string"===typeof u?u:u.id)}clear(){this._queue.clear();this._keyToItem.clear();this._tilesByScale.clear()}has(u){return"string"===typeof u?this._keyToItem.has(u):this._keyToItem.has(u.id)}pause(){this._queue.pause()}push(u){const h=u.key.id;if(this._queue.has(h))return this._queue.get(h);const f=this._queue.push(h),w=this.tileInfoView.getTileScale(u.key),v=l.getOrCreateMapValue(this._tilesByScale,w,()=>new Set),y=()=>{v.delete(u.key);0===v.size&&this._tilesByScale.delete(w);
this._keyToItem.delete(h)};v.add(u.key);this._keyToItem.set(h,u);f.then(y,y);return f}reset(){this._queue.reset()}resume(){this._queue.resume()}_peek(u){if(!this.state)return u.values().next().value;const h=new Set;for(var f of u)h.add(this._keyToItem.get(f).key);f=this.state.scale;let w=Number.POSITIVE_INFINITY,v;for(const [y,x]of this._tilesByScale)if(t.someSet(x,m=>h.has(m))){const m=Math.abs(y-f);m<w&&(v=x,w=m)}return this._getClosestTileKey(v,u).id}_getClosestTileKey(u,h){const f=this.tileInfoView,
w=this.state.center;let v=Number.POSITIVE_INFINITY,y;for(const x of u)h.has(x.id)&&(f.getTileCoords(r,x),u=e.distance(r,w),u<v&&(v=u,y=x));return y}};b.__decorate([n.property({constructOnly:!0})],a.prototype,"concurrency",void 0);b.__decorate([n.property({constructOnly:!0})],a.prototype,"priority",void 0);b.__decorate([n.property({constructOnly:!0})],a.prototype,"process",void 0);b.__decorate([n.property({constructOnly:!0})],a.prototype,"scheduler",void 0);b.__decorate([n.property()],a.prototype,
"state",void 0);b.__decorate([n.property({constructOnly:!0})],a.prototype,"tileInfoView",void 0);return a=b.__decorate([d.subclass("esri.views.2d.tiling.TileQueue")],a)})},"esri/views/support/ScheduledQueueProcessor":function(){define("exports ../../core/has ../../core/maybe ../../core/promiseUtils ../../core/Queue ../../core/ReactiveMap ../../core/scheduling ../../core/signal".split(" "),function(b,a,l,c,t,n,p,g){class q{constructor(e,k){this.item=e;this.controller=k;this.promise=null}}class d{constructor(e){this._task=
this._schedule=null;this._deferreds=new n;this._controllers=new n;this._processingItems=new n;this._pausedSignal=g.signal(!1);this.concurrency=1;e.concurrency&&(this.concurrency=e.concurrency);this._queue=new t(e.peeker);this.process=e.process;const k=e.scheduler;e.priority&&k&&(this._task=k.registerTask(e.priority,this))}destroy(){this.clear();this._schedule=l.removeMaybe(this._schedule);this._task=l.removeMaybe(this._task)}get updating(){return!!this._task?.updating||this.running}get length(){return this._processingItems.size+
this._queue.length}abort(e){(e=this._controllers.get(e))&&e.abort()}clear(){this._queue.clear();const e=[];this._controllers.forEach(k=>e.push(k));this._controllers.clear();e.forEach(k=>k.abort());this._processingItems.clear();this._cancelNext()}forEach(e){this._deferreds.forEach((k,r)=>e(r))}get(e){return(e=this._deferreds.get(e))?e.promise:void 0}isOngoing(e){return this._processingItems.has(e)}has(e){return this._deferreds.has(e)}pause(){this._pausedSignal.value||(this._pausedSignal.value=!0,this._cancelNext())}push(e,
k){const r=this.get(e);if(r)return r;const u=new AbortController;let h=null;k&&(h=c.onAbort(k,()=>u.abort()));const f=()=>{w.remove();null!=h&&h.remove();this._removeItem(e);this._queue.remove(e);this._scheduleNext()},w=c.onAbortOrThrow(u.signal,()=>{const y=this._processingItems.get(e);y&&y.controller.abort();f();v.reject(c.createAbortError())}),v=c.createResolver();this._deferreds.set(e,v);this._controllers.set(e,u);v.promise.then(f,f);this._queue.push(e);this._scheduleNext();return v.promise}last(){return this._queue.last()}lastPromise(){const e=
this.last();return e?this.get(e):null}peek(){return this._queue.peek()}popLast(){const e=this._queue.popLast();e&&(this._deferreds.get(e)?.reject(c.createAbortError()),this._removeItem(e));return e}reset(){const e=Array.from(this._processingItems.values());this._processingItems.clear();for(const k of e)this._queue.push(k.item),k.controller.abort();this._scheduleNext()}resume(){this._pausedSignal.value&&(this._pausedSignal.value=!1,this._scheduleNext())}takeAll(){const e=[];for(;this._queue.length;)e.push(this._queue.pop());
this.clear();return e}get running(){return!this._pausedSignal.value&&0<this._queue.length&&this._processingItems.size<this.concurrency}runTask(e){for(;!e.done&&0<this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop()),e.madeProgress()}_removeItem(e){this._deferreds.delete(e);this._controllers.delete(e);this._processingItems.delete(e)}_scheduleNext(){this._task||this._pausedSignal.value||this._schedule||(this._schedule=p.schedule(()=>{this._schedule=null;this._next()}))}_next(){for(;0<
this._queue.length&&this._processingItems.size<this.concurrency;)this._process(this._queue.pop())}_cancelNext(){this._schedule&&(this._schedule.remove(),this._schedule=null)}_processResult(e,k){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).resolve(k))}_processError(e,k){this._canProcessFulfillment(e)&&(this._scheduleNext(),this._deferreds.get(e.item).reject(k))}_canProcessFulfillment(e){return this._deferreds.get(e.item)&&this._processingItems.get(e.item)===e?!0:
!1}_process(e){if(null!=e){var k=new AbortController,r=new q(e,k);this._processingItems.set(e,r);try{var u=this.process(e,k.signal)}catch(h){this._processError(r,h)}c.isPromiseLike(u)?(r.promise=u,u.then(h=>this._processResult(r,h),h=>this._processError(r,h))):this._processResult(r,u)}}get test(){}}b.ScheduledQueueProcessor=d;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/tiling/TileStrategy":function(){define(["../../../geometry/support/aaBoundingRect","./TileCache",
"./TileCoverage","./TileKey"],function(b,a,l,c){const t=new c(0,0,0,0),n=new Map,p=[],g=[];class q{constructor(d){this._previousScale=Number.POSITIVE_INFINITY;this.cachePolicy="keep";this.coveragePolicy="closest";this.resampling=!0;this.tileIndex=new Map;this.tiles=[];this.buffer=192;this.acquireTile=d.acquireTile;this.releaseTile=d.releaseTile;this.tileInfoView=d.tileInfoView;null!=d.resampling&&(this.resampling=d.resampling);d.cachePolicy&&(this.cachePolicy=d.cachePolicy);d.coveragePolicy&&(this.coveragePolicy=
d.coveragePolicy);null!=d.buffer&&(this.buffer=d.buffer);d.cacheSize&&(this._tileCache=new a(d.cacheSize,this.tileInfoView,e=>{this.releaseTile(e)}))}destroy(){this.tileIndex.clear()}update(d){const {resampling:e,tileIndex:k}=this,{scale:r,center:u,resolution:h}=d.state,{minScale:f,maxScale:w}=this.tileInfoView,v=!d.stationary&&r>this._previousScale;this._previousScale=r;if(!e&&(r>f||r<w))this.tiles.length=0,this.clear();else if(d=this.tileInfoView.getTileCoverage(d.state,this.buffer,this.resampling,
this.coveragePolicy)){var {spans:y,lodInfo:x}=d,{level:m}=x;this.tiles.length=0;k.forEach(D=>D.visible=!0);var z=0,B=0;if(0<y.length)for(const {row:D,colFrom:F,colTo:I}of y)for(var A=F;A<=I;A++){z++;const S=t.set(m,D,x.normalizeCol(A),x.getWorldForColumn(A)).id;let T=k.get(S);if(T)T.isReady?(n.set(S,T),B++):v||this._addParentTile(S,n);else{if(this._tileCache?.has(S)){if(T=this._tileCache.pop(S),this.tileIndex.set(S,T),T.isReady){n.set(S,T);B++;continue}}else T=this.acquireTile(t),this.tileIndex.set(S,
T);v||this._addParentTile(S,n)}}z=B===z;for(const [D,F]of k)n.has(D)||(t.set(D),B=this.tileInfoView.intersects(d,t),A="purge"===this.cachePolicy?t.level!==m:t.level>m,!B||!v&&z?!A&&B||p.push(F):F.isReady?A&&"purge"===this.cachePolicy&&this._hasReadyAncestor(t,m)?p.push(F):g.push(F):A&&p.push(F));for(const D of g)D.isReady&&n.set(D.key.id,D);for(const D of p)this._tileCache?this._tileCache.add(D):this.releaseTile(D),k.delete(D.key.id);for(const D of n.values())this.tiles.push(D);for(const D of k.values())n.has(D.key.id)||
(D.visible=!1);this._tileCache?.prune(m,u,h);l.pool.release(d);g.length=0;p.length=0;n.clear()}else this.tiles.length=0,this.clear()}clear(){const {tileIndex:d}=this;for(const e of d.values())this.releaseTile(e);d.clear()}refresh(d){for(const e of this.tileIndex.values())d(e);this._tileCache?.clear()}updateCacheSize(d){this._tileCache&&(this._tileCache.maxSize=d)}_addParentTile(d,e){let k=null;for(;;){d=this.tileInfoView.getTileParentId(d);if(!d)break;if(this.tileIndex.has(d)){if(k=this.tileIndex.get(d),
k?.isReady){e.has(k.key.id)||e.set(k.key.id,k);break}}else if(this._tileCache?.has(d)&&(k=this._tileCache.pop(d),this.tileIndex.set(d,k),k?.isReady)){e.has(k.key.id)||e.set(k.key.id,k);break}}}_hasReadyAncestor(d,e){const k=b.create();this.tileInfoView.getTileBounds(k,d,!0);for(const r of this.tileIndex.values())if(r.isReady&&r.key.level>=e&&r.key.level<d.level){const u=b.create();this.tileInfoView.getTileBounds(u,r.key,!0);if(b.contains(u,k))return!0}return!1}}return q})},"esri/views/2d/tiling/TileCache":function(){define(["../../../core/libs/gl-matrix-2/math/vec2"],
function(b){class a{constructor(l,c,t){this.maxSize=l;this._tileInfoView=c;this._removedFunc=t;this._tilePerId=new Map;this._tileKeysPerLevel=[]}clear(){this._tilePerId.clear();this._tileKeysPerLevel=[]}has(l){return this._tilePerId.has(l)}get(l){return this._tilePerId.get(l)}pop(l){const c=this._tilePerId.get(l);if(c){var t=this._tileKeysPerLevel[c.key.level];this._tilePerId["delete"](l);for(let n=0;n<t.length;n++)if(t[n].id===l){t.splice(n,1);break}c.visible=!0;return c}}add(l){l.visible=!1;const c=
l.key,t=c.id;this._tilePerId.has(t)||(this._tilePerId.set(t,l),l=c.level,this._tileKeysPerLevel[l]||(this._tileKeysPerLevel[l]=[]),this._tileKeysPerLevel[l].push(c))}prune(l,c,t){let n=this._tilePerId.size;if(!(n<=this.maxSize)){for(var p=this._tileKeysPerLevel.length-1;n>this.maxSize&&0<=p;)p!==l&&(n=this._pruneAroundCenterTile(n,c,t,p)),p--;n>this.maxSize&&(n=this._pruneAroundCenterTile(n,c,t,l))}}_pruneAroundCenterTile(l,c,t,n){n=this._tileKeysPerLevel[n];if(!n||0===n.length)return l;const {size:p,
origin:g}=this._tileInfoView.tileInfo,q=t*p[0],d=t*p[1],e=[0,0],k=[0,0];for(n.sort((r,u)=>{e[0]=g.x+q*(r.col+.5);e[1]=g.y-d*(r.row+.5);k[0]=g.x+q*(u.col+.5);k[1]=g.y-d*(u.row+.5);return b.squaredDistance(e,c)-b.squaredDistance(k,c)});0<n.length&&(t=n.pop(),this._removeTile(t.id),l--,l!==this.maxSize););return l}_removeTile(l){const c=this._tilePerId.get(l);this._removedFunc&&c&&this._removedFunc(c);this._tilePerId["delete"](l)}}return a})},"esri/views/2d/layers/features/support/TileStore":function(){define("../../../../../core/Evented ../../../../../core/has ../../../../../chunks/rbush ../../../../../geometry/support/aaBoundingRect ../../../../../geometry/support/spatialReferenceUtils ./Tile ../../../tiling/TileCoverage ../../../tiling/TileKey".split(" "),
function(b,a,l,c,t,n,p,g){const q={added:[],removed:[]},d=new Set,e=new g(0,0,0,0);class k extends b{constructor(r){super();this._tiles=new Map;this._index=l.rbush(9,a("esri-csp-restrictions")?u=>({minX:u.bounds[0],minY:u.bounds[1],maxX:u.bounds[2],maxY:u.bounds[3]}):[".bounds[0]",".bounds[1]",".bounds[2]",".bounds[3]"]);this.tiles=[];this.tileScheme=r}destroy(){this.clear()}clear(){this.tiles.length=0;this._tiles.clear();this._index.clear()}has(r){return this._tiles.has(r)}get(r){return this._tiles.get(r)}getIntersectingTiles(r){if(!r||
0===c.width(r)||0===c.height(r))return[];var u;if(u=t.getInfo(this.tileScheme.spatialReference)){var [h,f]=u.valid;u=r[2]>f?[c.create([r[0],r[1],f,r[3]]),c.create([h,r[1],h+r[2]-f,r[3]])]:r[0]<h?[c.create([h,r[1],r[2],r[3]]),c.create([f-(h-r[0]),r[1],f,r[3]])]:null}else u=null;return null!=u?[...(new Set([...this.boundsIntersections(u[0]),...this.boundsIntersections(u[1])]))]:this.boundsIntersections(r)}boundsIntersections(r){return this._index.search({minX:r[0],minY:r[1],maxX:r[2],maxY:r[3]})}updateTiles(r){const u=
{added:[],removed:[]};for(const h of r.added)if(!this.has(h)){const f=new n.Tile(this.tileScheme,h);this._tiles.set(h,f);this._index.insert(f);u.added.push(f)}for(const h of r.removed)this.has(h)&&(r=this.get(h),this._tiles.delete(h),this._index.remove(r),u.removed.push(r));this.tiles.length=0;this._tiles.forEach(h=>this.tiles.push(h));(u.added.length||u.removed.length)&&this.emit("update",u)}setViewState(r){if(r=this.tileScheme.getTileCoverage(r,0)){var {spans:u,lodInfo:h}=r,{level:f}=h;if(0<u.length)for(const {row:v,
colFrom:y,colTo:x}of u)for(var w=y;w<=x;w++){const m=e.set(f,v,h.normalizeCol(w),h.getWorldForColumn(w)).id;d.add(m);if(!this.has(m)){const z=new n.Tile(this.tileScheme,m);this._tiles.set(m,z);this._index.insert(z);this.tiles.push(z);q.added.push(z)}}for(f=this.tiles.length-1;0<=f;f--)w=this.tiles[f],d.has(w.id)||(this._tiles.delete(w.id),this.tiles.splice(f,1),this._index.remove(w),q.removed.push(w));(q.added.length||q.removed.length)&&this.emit("update",q);p.pool.release(r);d.clear();q.added.length=
0;q.removed.length=0}}}return k})},"esri/chunks/rbush":function(){define(["exports","./quickselect"],function(b,a){function l(h,f){if(!(this instanceof l))return new l(h,f);this._maxEntries=Math.max(4,h||9);this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries));f&&("function"===typeof f?this.toBBox=f:this._initFormat(f));this.clear()}function c(h,f){t(h,0,h.children.length,f,h)}function t(h,f,w,v,y){y||=r(null);y.minX=Infinity;y.minY=Infinity;y.maxX=-Infinity;y.maxY=-Infinity;for(var x;f<w;f++)x=
h.children[f],n(y,h.leaf?v(x):x);return y}function n(h,f){h.minX=Math.min(h.minX,f.minX);h.minY=Math.min(h.minY,f.minY);h.maxX=Math.max(h.maxX,f.maxX);h.maxY=Math.max(h.maxY,f.maxY);return h}function p(h,f){return h.minX-f.minX}function g(h,f){return h.minY-f.minY}function q(h){return(h.maxX-h.minX)*(h.maxY-h.minY)}function d(h){return h.maxX-h.minX+(h.maxY-h.minY)}function e(h,f){return h.minX<=f.minX&&h.minY<=f.minY&&f.maxX<=h.maxX&&f.maxY<=h.maxY}function k(h,f){return f.minX<=h.maxX&&f.minY<=
h.maxY&&f.maxX>=h.minX&&f.maxY>=h.minY}function r(h){return{children:h,height:1,leaf:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function u(h,f,w,v,y){for(var x=[f,w],m;x.length;)w=x.pop(),f=x.pop(),w-f<=v||(m=f+Math.ceil((w-f)/v/2)*v,a.quickselect(h,m,f,w,y),x.push(f,m,m,w))}l.prototype={all:function(){return this._all(this.data,[])},search:function(h){var f=this.data,w=[],v=this.toBBox;if(!k(h,f))return w;for(var y=[],x,m,z,B;f;){x=0;for(m=f.children.length;x<m;x++)z=f.children[x],
B=f.leaf?v(z):z,k(h,B)&&(f.leaf?w.push(z):e(h,B)?this._all(z,w):y.push(z));f=y.pop()}return w},collides:function(h){var f=this.data,w=this.toBBox;if(!k(h,f))return!1;for(var v=[],y,x,m,z;f;){y=0;for(x=f.children.length;y<x;y++)if(m=f.children[y],z=f.leaf?w(m):m,k(h,z)){if(f.leaf||e(h,z))return!0;v.push(m)}f=v.pop()}return!1},load:function(h){if(!h||!h.length)return this;if(h.length<this._minEntries){for(var f=0,w=h.length;f<w;f++)this.insert(h[f]);return this}h=this._build(h.slice(),0,h.length-1,
0);this.data.children.length?this.data.height===h.height?this._splitRoot(this.data,h):(this.data.height<h.height&&(f=this.data,this.data=h,h=f),this._insert(h,this.data.height-h.height-1,!0)):this.data=h;return this},insert:function(h){null!=h&&this._insert(h,this.data.height-1);return this},clear:function(){this.data=r([]);return this},remove:function(h,f){if(null==h)return this;for(var w=this.data,v=this.toBBox(h),y=[],x=[],m,z,B,A;w||y.length;){w||(w=y.pop(),z=y[y.length-1],m=x.pop(),A=!0);if(w.leaf){a:{B=
h;var D=w.children,F=f;if(F){for(var I=0;I<D.length;I++)if(F(B,D[I])){B=I;break a}B=-1}else B=D.indexOf(B)}if(-1!==B){w.children.splice(B,1);y.push(w);this._condense(y);break}}A||w.leaf||!e(w,v)?z?(m++,w=z.children[m],A=!1):w=null:(y.push(w),x.push(m),m=0,z=w,w=w.children[0])}return this},toBBox:function(h){return h},compareMinX:p,compareMinY:g,toJSON:function(){return this.data},fromJSON:function(h){this.data=h;return this},_all:function(h,f){for(var w=[];h;)h.leaf?f.push.apply(f,h.children):w.push.apply(w,
h.children),h=w.pop();return f},_build:function(h,f,w,v){var y=w-f+1,x=this._maxEntries;if(y<=x){var m=r(h.slice(f,w+1));c(m,this.toBBox);return m}v||(v=Math.ceil(Math.log(y)/Math.log(x)),x=Math.ceil(y/Math.pow(x,v-1)));m=r([]);m.leaf=!1;m.height=v;y=Math.ceil(y/x);x=y*Math.ceil(Math.sqrt(x));var z;for(u(h,f,w,x,this.compareMinX);f<=w;f+=x){var B=Math.min(f+x-1,w);u(h,f,B,y,this.compareMinY);for(z=f;z<=B;z+=y){var A=Math.min(z+y-1,B);m.children.push(this._build(h,z,A,v-1))}}c(m,this.toBBox);return m},
_chooseSubtree:function(h,f,w,v){for(var y,x,m,z,B,A,D,F;;){v.push(f);if(f.leaf||v.length-1===w)break;D=F=Infinity;y=0;for(x=f.children.length;y<x;y++)m=f.children[y],B=q(m),A=(Math.max(m.maxX,h.maxX)-Math.min(m.minX,h.minX))*(Math.max(m.maxY,h.maxY)-Math.min(m.minY,h.minY))-B,A<F?(F=A,D=B<D?B:D,z=m):A===F&&B<D&&(D=B,z=m);f=z||f.children[0]}return f},_insert:function(h,f,w){var v=this.toBBox;w=w?h:v(h);v=[];var y=this._chooseSubtree(w,this.data,f,v);y.children.push(h);for(n(y,w);0<=f;)if(v[f].children.length>
this._maxEntries)this._split(v,f),f--;else break;this._adjustParentBBoxes(w,v,f)},_split:function(h,f){var w=h[f],v=w.children.length,y=this._minEntries;this._chooseSplitAxis(w,y,v);v=this._chooseSplitIndex(w,y,v);v=r(w.children.splice(v,w.children.length-v));v.height=w.height;v.leaf=w.leaf;c(w,this.toBBox);c(v,this.toBBox);f?h[f-1].children.push(v):this._splitRoot(w,v)},_splitRoot:function(h,f){this.data=r([h,f]);this.data.height=h.height+1;this.data.leaf=!1;c(this.data,this.toBBox)},_chooseSplitIndex:function(h,
f,w){var v,y;var x=y=Infinity;for(v=f;v<=w-f;v++){var m=t(h,0,v,this.toBBox);var z=t(h,v,w,this.toBBox);var B=Math.max(0,Math.min(m.maxX,z.maxX)-Math.max(m.minX,z.minX))*Math.max(0,Math.min(m.maxY,z.maxY)-Math.max(m.minY,z.minY));m=q(m)+q(z);if(B<x){x=B;var A=v;y=m<y?m:y}else B===x&&m<y&&(y=m,A=v)}return A},_chooseSplitAxis:function(h,f,w){var v=h.leaf?this.compareMinX:p,y=h.leaf?this.compareMinY:g,x=this._allDistMargin(h,f,w,v);f=this._allDistMargin(h,f,w,y);x<f&&h.children.sort(v)},_allDistMargin:function(h,
f,w,v){h.children.sort(v);v=this.toBBox;var y=t(h,0,f,v),x=t(h,w-f,w,v),m=d(y)+d(x),z;for(z=f;z<w-f;z++){var B=h.children[z];n(y,h.leaf?v(B):B);m+=d(y)}for(z=w-f-1;z>=f;z--)B=h.children[z],n(x,h.leaf?v(B):B),m+=d(x);return m},_adjustParentBBoxes:function(h,f,w){for(;0<=w;w--)n(f[w],h)},_condense:function(h){for(var f=h.length-1,w;0<=f;f--)0===h[f].children.length?0<f?(w=h[f-1].children,w.splice(w.indexOf(h[f]),1)):this.clear():c(h[f],this.toBBox)},_initFormat:function(h){var f=["return a"," - b",
";"];this.compareMinX=new Function("a","b",f.join(h[0]));this.compareMinY=new Function("a","b",f.join(h[1]));this.toBBox=new Function("a","return {minX: a"+h[0]+", minY: a"+h[1]+", maxX: a"+h[2]+", maxY: a"+h[3]+"};")}};b.rbush=l})},"esri/chunks/quickselect":function(){define(["exports"],function(b){function a(t,n,p,g,q){for(;g>p;){if(600<g-p){var d=g-p+1,e=n-p+1,k=Math.log(d),r=.5*Math.exp(2*k/3);k=.5*Math.sqrt(k*r*(d-r)/d)*(0>e-d/2?-1:1);a(t,n,Math.max(p,Math.floor(n-e*r/d+k)),Math.min(g,Math.floor(n+
(d-e)*r/d+k)),q)}d=t[n];e=p;r=g;l(t,p,n);for(0<q(t[g],d)&&l(t,p,g);e<r;){l(t,e,r);e++;for(r--;0>q(t[e],d);)e++;for(;0<q(t[r],d);)r--}0===q(t[p],d)?l(t,p,r):(r++,l(t,r,g));r<=n&&(p=r+1);n<=r&&(g=r-1)}}function l(t,n,p){var g=t[n];t[n]=t[p];t[p]=g}function c(t,n){return t<n?-1:t>n?1:0}b.quickselect=function(t,n,p,g,q){a(t,n,p||0,g||t.length-1,q||c)}})},"esri/views/2d/layers/features/support/Tile":function(){define("exports ../../../../../core/ArrayPool ../../../../../geometry/support/aaBoundingRect ../../../../../rest/support/QuantizationParameters ./arcadeUtils ../../../tiling/TileKey".split(" "),
function(b,a,l,c,t,n){class p{constructor(g,q){this.key=new n(0,0,0,0);this.bounds=l.create();this.objectIds=new Set;this.key.set(q);q=g.getLODInfoAt(this.key);this.tileInfoView=g;this.tileInfoView.getTileBounds(this.bounds,this.key,!0);this.resolution=q.resolution;this.level=q.level;this.scale=q.scale;this.minScale=g.zoomToScale(q.level-1);this.maxScale=g.zoomToScale(q.level+1)}get lod(){return this.tileInfoView.getLODInfoAt(this.key)}get id(){return this.key.id}get extent(){return l.toExtent(this.bounds,
this.tileInfoView.tileInfo.spatialReference)}get transform(){return{originPosition:"upperLeft",scale:[this.resolution,this.resolution],translate:[this.bounds[0],this.bounds[3]]}}createArcadeEvaluationOptions(g){return t.createArcadeEvaluationOptions(this.scale,g)}createChildTiles(){const g=this.key.getChildKeys(),q=a.acquire();for(let d=0;d<g.length;d++)q[d]=new p(this.tileInfoView,g[d]);return q}getQuantizationParameters(){return c.fromJSON({mode:"view",originPosition:"upperLeft",tolerance:this.resolution,
extent:{xmin:this.bounds[0],ymin:this.bounds[1],xmax:this.bounds[2],ymax:this.bounds[3],spatialReference:this.tileInfoView.tileInfo.spatialReference}})}}b.Tile=p;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/features/support/arcadeUtils":function(){define(["exports"],function(b){b.createArcadeEvaluationOptions=function(a,{timeZone:l,timeExtent:c}){return{$view:{scale:a,timeZone:l,timeProperties:{currentStart:c?.start,currentEnd:c?.end}}}};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/layers/support/util":function(){define("exports ../../../../core/arrayUtils ../../../../core/Collection ../../../../core/jsonMap ../../../../support/guards ../../engine/webgl/effects/highlight/HighlightGradient ../../engine/webgl/effects/highlight/MultiHighlightGradient ../../engine/webgl/shaderGraph/techniques/featureTechniqueUtils".split(" "),function(b,a,l,c,t,n,p,g){const q=new c.JSONMap({esriGeometryPoint:"point",esriGeometryMultipoint:"multipoint",
esriGeometryPolyline:"polyline",esriGeometryPolygon:"polygon",esriGeometryMultiPatch:"multipatch",mesh:"mesh"});b.analyzeRings=function(d,e,k){const r=[],u=[];let h=0,f=0;for(const w of d){d=f;let v=w[0][0],y=w[0][1];r[f++]=v;r[f++]=y;let x=0;for(let m=1;m<w.length;++m){const z=v,B=y;v=w[m][0];y=w[m][1];x+=y*z-v*B;r[f++]=v;r[f++]=y}e(x/2);0<x?(0<d-h&&(k(h,d,r,u),h=d),u.length=0):0>x?0<d-h?u.push(.5*(d-h)):f=d:f=d}0<f-h&&k(h,f,r,u)};b.canUseMajorityInterpolationOnDataSource=function(d){const {bandCount:e,
attributeTable:k,colormap:r,pixelType:u}=d.raster.rasterInfo;return 1===e&&(null!=k||null!=r||"u8"===u||"s8"===u)};b.createOrReuseHighlightGradient=function(d,e){if(null==e)return d?.destroy(),null;"single"===d?.type&&Array.isArray(e)&&(d.destroy(),d=null);"multi"!==d?.type||Array.isArray(e)||(d.destroy(),d=null);d||=Array.isArray(e)?new p.MultiHighlightGradient:new n;Array.isArray(e)?"multi"===d.type&&d.setHighlightOptions(e):"single"===d.type&&d.setHighlightOptions(e);return d};b.getHighlightGraphics=
function(d){if(!d)return[];d=t.isGraphic(d)?[d]:l.isCollection(d)?d.toArray():Array.isArray(d)?d:[];d=d?.filter(a.isSome);return 0===(d?.length??0)?[]:d};b.renderHighlight=function(d,e,k,r){const {painter:u,highlightGradient:h}=d,{highlight:f}=u.effects;if(h){var w=d.passOptions,v=h.getReasonsWithGradients();for(let x=0;x<v.length;x++){var y={...d,passOptions:{type:"highlight",activeGradient:null!=r?v[r].activeGradient:v[x].activeGradient,activeReasons:v[x].activeReasons,stepType:"burn",highlightAll:e}};
f.bind(y);k(y);if(x<v.length-1){y=0;for(let m=x+1;m<v.length;m++)y|=v[m].activeReasons;k({...d,passOptions:{type:"highlight",activeGradient:null!=r?v[r].activeGradient:v[x].activeGradient,activeReasons:y,stepType:"clear",highlightAll:e}})}y={...d,passOptions:{type:"highlight",activeGradient:null!=r?v[r].activeGradient:v[x].activeGradient,activeReasons:v[x].activeReasons,stepType:"draw",highlightAll:e}};u.setPipelineState(g.getFeaturePipelineState(d));u.updatePipelineState(d.context);f.draw(y);f.unbind()}d.passOptions=
w}};b.toJSONGeometryType=function(d){return q.toJSON(d)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/effects/highlight/HighlightGradient":function(){define("../../../../../../core/Logger ../../definitions ./parameters ../../../../../support/HighlightOptions ../../../../../webgl/enums ../../../../../webgl/Texture ../../../../../webgl/TextureDescriptor".split(" "),function(b,a,l,c,t,n,p){function g(r,u){u.fillColor[0]=r.color.r/255;u.fillColor[1]=r.color.g/
255;u.fillColor[2]=r.color.b/255;u.fillColor[3]=r.color.a;r.haloColor?(u.outlineColor[0]=r.haloColor.r/255,u.outlineColor[1]=r.haloColor.g/255,u.outlineColor[2]=r.haloColor.b/255,u.outlineColor[3]=r.haloColor.a):(u.outlineColor[0]=u.fillColor[0],u.outlineColor[1]=u.fillColor[1],u.outlineColor[2]=u.fillColor[2],u.outlineColor[3]=u.fillColor[3]);u.fillColor[3]*=r.fillOpacity;u.outlineColor[3]*=r.haloOpacity;u.fillColor[0]*=u.fillColor[3];u.fillColor[1]*=u.fillColor[3];u.fillColor[2]*=u.fillColor[3];
u.outlineColor[0]*=u.outlineColor[3];u.outlineColor[1]*=u.outlineColor[3];u.outlineColor[2]*=u.outlineColor[3];u.outlineWidth=(1-r.haloBlur)*r.haloWidth;u.outerHaloWidth=r.haloBlur*r.haloWidth/2;u.innerHaloWidth=r.haloBlur*r.haloWidth/2;u.outlinePosition=0}function q(r){return`${r.color};${r.haloColor};${r.haloOpacity};${r.fillOpacity};${r.haloWidth};${r.haloBlur}`}const d=()=>b.getLogger("esri.views.2d.engine.webgl.painter.highlight.HighlightGradient"),e=[0,0,0,0];class k{constructor(){this.type=
"single";this._highlightOptions=new c;this._convertedHighlightOptions={fillColor:[0,0,0,0],outlineColor:[0,0,0,0],outlinePosition:0,outlineWidth:0,innerHaloWidth:0,outerHaloWidth:0};this._optionsShadeTexKey="";this._texelData=new Uint8Array(4*l.shadeTextureSize);this._minMaxDistance=[0,0]}setHighlightOptions(r){this._highlightOptions=r}applyHighlightOptions(r,u){this._updateGradientTexture(r);r.bindTexture(this._shadeTex,a.textureBindingHighlight1);u.setUniform2fv("u_minMaxDistance",this._minMaxDistance)}destroy(){this._shadeTex?.dispose();
this._shadeTex=null}getReasonsWithGradients(){return[{activeReasons:(1<<a.maxHighlightReasons)-1,activeGradient:this}]}_updateGradientTexture(r){function u(B,A,D){z[0]=(1-D)*B[0]+D*A[0];z[1]=(1-D)*B[1]+D*A[1];z[2]=(1-D)*B[2]+D*A[2];z[3]=(1-D)*B[3]+D*A[3]}var h=q(this._highlightOptions);if(h!==this._optionsShadeTexKey){this._optionsShadeTexKey=h;g(this._highlightOptions,this._convertedHighlightOptions);h=this._convertedHighlightOptions;var f=h.outlinePosition-h.outlineWidth/2-h.outerHaloWidth,w=h.outlinePosition-
h.outlineWidth/2,v=h.outlinePosition+h.outlineWidth/2,y=h.outlinePosition+h.outlineWidth/2+h.innerHaloWidth,x=Math.sqrt(Math.PI/2)*l.sigma,m=Math.abs(f)>x?Math.round(10*(Math.abs(f)-x))/10:0;x=Math.abs(y)>x?Math.round(10*(Math.abs(y)-x))/10:0;m&&!x?d().error("The outer rim of the highlight is "+m+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards positive values (inwards)."):!m&&x?d().error("The inner rim of the highlight is "+x+"px away from the edge of the feature; consider reducing some width values or shifting the outline position towards negative values (outwards)."):
m&&x&&d().error("The highlight is "+Math.max(m,x)+"px away from the edge of the feature; consider reducing some width values.");var z=[void 0,void 0,void 0,void 0];({_texelData:x}=this);for(let B=0;B<l.shadeTextureSize;++B)m=f+B/(l.shadeTextureSize-1)*(y-f),m<f?(z[0]=0,z[1]=0,z[2]=0,z[3]=0):m<w?u(e,h.outlineColor,(m-f)/(w-f)):m<v?[z[0],z[1],z[2],z[3]]=h.outlineColor:m<y?u(h.outlineColor,h.fillColor,(m-v)/(y-v)):[z[0],z[1],z[2],z[3]]=h.fillColor,x[4*B]=255*z[0],x[4*B+1]=255*z[1],x[4*B+2]=255*z[2],
x[4*B+3]=255*z[3];this._minMaxDistance[0]=f;this._minMaxDistance[1]=y;this._shadeTex||(h=new p.TextureDescriptor,h.wrapMode=t.TextureWrapMode.CLAMP_TO_EDGE,h.width=l.shadeTextureSize,h.height=1,this._shadeTex=new n.Texture(r,h));this._shadeTex.updateData(0,0,0,l.shadeTextureSize,1,this._texelData)}}}return k})},"esri/views/2d/engine/webgl/definitions":function(){define(["exports"],function(b){b.AttributeDataType=void 0;var a=b.AttributeDataType||(b.AttributeDataType={});a[a.FilterFlags=0]="FilterFlags";
a[a.Animation=1]="Animation";a[a.GPGPU=2]="GPGPU";a[a.VV=3]="VV";a[a.DD0=4]="DD0";a[a.DD1=5]="DD1";a[a.DD2=6]="DD2";a[a.LocalTimeOrigin=7]="LocalTimeOrigin";b.MAX_TILE_RESHUFFLES_PER_FRAME=1;b.RESHUFFLING_EXEMPT_DRAW_CALLS=10;b.RESHUFFLING_EXEMPT_MEMORY_BYTES=1048576;b.RESHUFFLING_TARGET_DRAW_EFFICIENCY=.75;b.RESHUFFLING_TARGET_MEMORY_EFFICIENCY=.75;b.angleFactor256=256/360;b.animationUnit=2;b.attributeStoreInitialSize=256;b.attributeStoreTextureSize=1024;b.averageGlyphMosaicItem={metrics:{width:15,
height:17,left:0,top:-7,advance:14}};b.backbufferStencilClipped=1;b.backbufferStencilVisible=0;b.bitsetFillHasPatternHeightPrecisionFactor=32;b.bitsetFillHasPatternWidthPrecisionFactor=64;b.bitsetFillHasUnresolvedReplacementColor=8;b.bitsetFillRandomPatternOffset=4;b.bitsetGenericConsiderAlphaOnly=16;b.bitsetGenericLockColor=2;b.bitsetLineScaleDash=4;b.bitsetMarkerAlignmentMap=1;b.bitsetMarkerAlignmentScreen=0;b.bitsetMarkerOutlineAllowColorOverride=4;b.bitsetMarkerScaleSymbolsProportionally=8;b.bitsetTypeFillOutline=
1;b.bufferDataMinimumSize=128;b.bufferDataPoolSize=4;b.chartMaxFields=10;b.collisionBoxPadding=16;b.collisionBucketSize=128;b.collisionEarlyRejectBucketSize=16;b.collisionMaxZoomDelta=1;b.collisionPlacementPadding=8;b.collisionTileBoxSize=4;b.compressionFactorForU16=128;b.dataDrivenUnit0=4;b.dataDrivenUnit1=5;b.dataDrivenUnit2=6;b.debugLabels=!1;b.defaultSdfTextureSize=128;b.displayRecordIntPerElement=8;b.dotDensityMaxFields=8;b.effectFlag0=128;b.enableEarlyLabelDiscard=!1;b.extrudeScale=64;b.filterFlag0=
64;b.filterFlagsUnit=1;b.glyphSize=24;b.gpgpuUnit=12;b.gradientTextureExternalPadding=1;b.heuristicGlyphsPerFeature=10;b.heuristicGlyphsPerLine=50;b.hittestSmallSymbolThreshold=3;b.hittestToleranceDesktop=1;b.hittestToleranceMobile=3;b.hittestToleranceSmallSymbol=3;b.labelPlacementOffsetPadding=4;b.localTimeOriginUnit=13;b.magicLabelLineHeight=29;b.maxGeohashLevel=12;b.maxGpuUploadsPerFrame=2;b.maxHighlightReasons=6;b.maxRepresentableInt=16777216;b.maxTextLineWidth=512;b.minMaxZoomPrecisionFactor=
10;b.minTextLineWidth=32;b.nanMagicNumber=1E-30;b.patchPixelBufferAllocSize=500;b.patternFillRasterizationScale=2;b.pictureFillColor=4294967295;b.randomInsidePolygonTextureSize=1024;b.rasterTileSize=256;b.rasterizedVectorMarkerMinSize=128;b.spritePadding=4;b.svgSdfTextureInnerSize=248;b.svgSdfTextureSize=256;b.textureBindingBitmap=0;b.textureBindingGlyphAtlas=0;b.textureBindingHighlight0=5;b.textureBindingHighlight1=6;b.textureBindingRenderer0=5;b.textureBindingRenderer1=6;b.textureBindingSpriteAtlas=
0;b.textureUploadManagerBudget=4;b.textureUploadManagerChunkSize=128;b.thinLineHalfWidthThreshold=1.05;b.tileSize=512;b.visualVariableUnit=3;b.vtlHighResCutoff=1.15;b.vtlTextureBindingUnitGlyphs=6;b.vtlTextureBindingUnitSprites=5;b.webglMaxInnerStops=6;b.webglMaxStops=8;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/effects/highlight/parameters":function(){define(["exports"],function(b){b.alphaToRgbaChannelSelectorMatrix=[0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,
1];b.rgbaToRgbaChannelSelectorMatrix=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1];b.shadeTextureSize=256;b.sigma=1;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/enums":function(){define(["exports"],function(b){b.FramebufferBit=void 0;(function(a){a[a.DEPTH=256]="DEPTH";a[a.STENCIL=1024]="STENCIL";a[a.COLOR=16384]="COLOR"})(b.FramebufferBit||(b.FramebufferBit={}));b.PrimitiveType=void 0;(function(a){a[a.POINTS=0]="POINTS";a[a.LINES=1]="LINES";a[a.LINE_LOOP=2]="LINE_LOOP";a[a.LINE_STRIP=
3]="LINE_STRIP";a[a.TRIANGLES=4]="TRIANGLES";a[a.TRIANGLE_STRIP=5]="TRIANGLE_STRIP";a[a.TRIANGLE_FAN=6]="TRIANGLE_FAN"})(b.PrimitiveType||(b.PrimitiveType={}));b.BlendFactor=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.ONE=1]="ONE";a[a.SRC_COLOR=768]="SRC_COLOR";a[a.ONE_MINUS_SRC_COLOR=769]="ONE_MINUS_SRC_COLOR";a[a.SRC_ALPHA=770]="SRC_ALPHA";a[a.ONE_MINUS_SRC_ALPHA=771]="ONE_MINUS_SRC_ALPHA";a[a.DST_ALPHA=772]="DST_ALPHA";a[a.ONE_MINUS_DST_ALPHA=773]="ONE_MINUS_DST_ALPHA";a[a.DST_COLOR=774]="DST_COLOR";
a[a.ONE_MINUS_DST_COLOR=775]="ONE_MINUS_DST_COLOR";a[a.SRC_ALPHA_SATURATE=776]="SRC_ALPHA_SATURATE";a[a.CONSTANT_COLOR=32769]="CONSTANT_COLOR";a[a.ONE_MINUS_CONSTANT_COLOR=32770]="ONE_MINUS_CONSTANT_COLOR";a[a.CONSTANT_ALPHA=32771]="CONSTANT_ALPHA";a[a.ONE_MINUS_CONSTANT_ALPHA=32772]="ONE_MINUS_CONSTANT_ALPHA"})(b.BlendFactor||(b.BlendFactor={}));b.BlendOperation=void 0;(function(a){a[a.ADD=32774]="ADD";a[a.MIN=32775]="MIN";a[a.MAX=32776]="MAX";a[a.SUBTRACT=32778]="SUBTRACT";a[a.REVERSE_SUBTRACT=
32779]="REVERSE_SUBTRACT"})(b.BlendOperation||(b.BlendOperation={}));b.BufferType=void 0;(function(a){a[a.ARRAY_BUFFER=34962]="ARRAY_BUFFER";a[a.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER";a[a.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER";a[a.PIXEL_PACK_BUFFER=35051]="PIXEL_PACK_BUFFER";a[a.PIXEL_UNPACK_BUFFER=35052]="PIXEL_UNPACK_BUFFER";a[a.COPY_READ_BUFFER=36662]="COPY_READ_BUFFER";a[a.COPY_WRITE_BUFFER=36663]="COPY_WRITE_BUFFER";a[a.TRANSFORM_FEEDBACK_BUFFER=35982]="TRANSFORM_FEEDBACK_BUFFER"})(b.BufferType||
(b.BufferType={}));b.Face=void 0;(function(a){a[a.FRONT=1028]="FRONT";a[a.BACK=1029]="BACK";a[a.FRONT_AND_BACK=1032]="FRONT_AND_BACK"})(b.Face||(b.Face={}));b.CullMode=void 0;(function(a){a[a.CW=2304]="CW";a[a.CCW=2305]="CCW"})(b.CullMode||(b.CullMode={}));b.DataType=void 0;(function(a){a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.INT=5124]="INT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.FLOAT=5126]="FLOAT";a[a.HALF_FLOAT=
5131]="HALF_FLOAT"})(b.DataType||(b.DataType={}));b.CompareFunction=void 0;(function(a){a[a.NEVER=512]="NEVER";a[a.LESS=513]="LESS";a[a.EQUAL=514]="EQUAL";a[a.LEQUAL=515]="LEQUAL";a[a.GREATER=516]="GREATER";a[a.NOTEQUAL=517]="NOTEQUAL";a[a.GEQUAL=518]="GEQUAL";a[a.ALWAYS=519]="ALWAYS"})(b.CompareFunction||(b.CompareFunction={}));b.StencilOperation=void 0;(function(a){a[a.ZERO=0]="ZERO";a[a.KEEP=7680]="KEEP";a[a.REPLACE=7681]="REPLACE";a[a.INCR=7682]="INCR";a[a.DECR=7683]="DECR";a[a.INVERT=5386]="INVERT";
a[a.INCR_WRAP=34055]="INCR_WRAP";a[a.DECR_WRAP=34056]="DECR_WRAP"})(b.StencilOperation||(b.StencilOperation={}));b.TextureSamplingMode=void 0;(function(a){a[a.NEAREST=9728]="NEAREST";a[a.LINEAR=9729]="LINEAR";a[a.NEAREST_MIPMAP_NEAREST=9984]="NEAREST_MIPMAP_NEAREST";a[a.LINEAR_MIPMAP_NEAREST=9985]="LINEAR_MIPMAP_NEAREST";a[a.NEAREST_MIPMAP_LINEAR=9986]="NEAREST_MIPMAP_LINEAR";a[a.LINEAR_MIPMAP_LINEAR=9987]="LINEAR_MIPMAP_LINEAR"})(b.TextureSamplingMode||(b.TextureSamplingMode={}));b.TextureWrapMode=
void 0;(function(a){a[a.CLAMP_TO_EDGE=33071]="CLAMP_TO_EDGE";a[a.REPEAT=10497]="REPEAT";a[a.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT"})(b.TextureWrapMode||(b.TextureWrapMode={}));b.TextureType=void 0;(function(a){a[a.TEXTURE_2D=3553]="TEXTURE_2D";a[a.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP";a[a.TEXTURE_3D=32879]="TEXTURE_3D";a[a.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X";a[a.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X";a[a.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]=
"TEXTURE_CUBE_MAP_POSITIVE_Y";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y";a[a.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z";a[a.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z";a[a.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY"})(b.TextureType||(b.TextureType={}));b.PixelFormat=void 0;(function(a){a[a.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.ALPHA=6406]=
"ALPHA";a[a.RGB=6407]="RGB";a[a.RGBA=6408]="RGBA";a[a.LUMINANCE=6409]="LUMINANCE";a[a.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA";a[a.RED=6403]="RED";a[a.RG=33319]="RG";a[a.RED_INTEGER=36244]="RED_INTEGER";a[a.RG_INTEGER=33320]="RG_INTEGER";a[a.RGB_INTEGER=36248]="RGB_INTEGER";a[a.RGBA_INTEGER=36249]="RGBA_INTEGER"})(b.PixelFormat||(b.PixelFormat={}));b.SizedPixelFormat=void 0;(function(a){a[a.RGBA4=32854]="RGBA4";a[a.R16F=33325]="R16F";a[a.RG16F=33327]="RG16F";a[a.RGB32F=34837]="RGB32F";a[a.RGBA16F=
34842]="RGBA16F";a[a.R32F=33326]="R32F";a[a.RG32F=33328]="RG32F";a[a.RGBA32F=34836]="RGBA32F";a[a.R11F_G11F_B10F=35898]="R11F_G11F_B10F";a[a.RGB8=32849]="RGB8";a[a.RGBA8=32856]="RGBA8";a[a.RGB5_A1=32855]="RGB5_A1";a[a.R8=33321]="R8";a[a.RG8=33323]="RG8";a[a.R8I=33329]="R8I";a[a.R8UI=33330]="R8UI";a[a.R16I=33331]="R16I";a[a.R16UI=33332]="R16UI";a[a.R32I=33333]="R32I";a[a.R32UI=33334]="R32UI";a[a.RG8I=33335]="RG8I";a[a.RG8UI=33336]="RG8UI";a[a.RG16I=33337]="RG16I";a[a.RG16UI=33338]="RG16UI";a[a.RG32I=
33339]="RG32I";a[a.RG32UI=33340]="RG32UI";a[a.RGB16F=34843]="RGB16F";a[a.RGB9_E5=35901]="RGB9_E5";a[a.SRGB8=35905]="SRGB8";a[a.SRGB8_ALPHA8=35907]="SRGB8_ALPHA8";a[a.RGB565=36194]="RGB565";a[a.RGBA32UI=36208]="RGBA32UI";a[a.RGB32UI=36209]="RGB32UI";a[a.RGBA16UI=36214]="RGBA16UI";a[a.RGB16UI=36215]="RGB16UI";a[a.RGBA8UI=36220]="RGBA8UI";a[a.RGB8UI=36221]="RGB8UI";a[a.RGBA32I=36226]="RGBA32I";a[a.RGB32I=36227]="RGB32I";a[a.RGBA16I=36232]="RGBA16I";a[a.RGB16I=36233]="RGB16I";a[a.RGBA8I=36238]="RGBA8I";
a[a.RGB8I=36239]="RGB8I";a[a.R8_SNORM=36756]="R8_SNORM";a[a.RG8_SNORM=36757]="RG8_SNORM";a[a.RGB8_SNORM=36758]="RGB8_SNORM";a[a.RGBA8_SNORM=36759]="RGBA8_SNORM";a[a.RGB10_A2=32857]="RGB10_A2";a[a.RGB10_A2UI=36975]="RGB10_A2UI"})(b.SizedPixelFormat||(b.SizedPixelFormat={}));b.PixelType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE";a[a.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8";a[a.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4";a[a.UNSIGNED_SHORT_5_5_5_1=
32820]="UNSIGNED_SHORT_5_5_5_1";a[a.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5";a[a.BYTE=5120]="BYTE";a[a.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT";a[a.SHORT=5122]="SHORT";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.INT=5124]="INT";a[a.HALF_FLOAT=5131]="HALF_FLOAT";a[a.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV";a[a.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV";a[a.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV";a[a.FLOAT_32_UNSIGNED_INT_24_8_REV=
36269]="FLOAT_32_UNSIGNED_INT_24_8_REV"})(b.PixelType||(b.PixelType={}));b.RenderbufferFormat=void 0;(function(a){a[a.DEPTH_COMPONENT16=33189]="DEPTH_COMPONENT16";a[a.STENCIL_INDEX8=36168]="STENCIL_INDEX8";a[a.DEPTH_STENCIL=34041]="DEPTH_STENCIL";a[a.DEPTH_COMPONENT24=33190]="DEPTH_COMPONENT24";a[a.DEPTH_COMPONENT32F=36012]="DEPTH_COMPONENT32F";a[a.DEPTH24_STENCIL8=35056]="DEPTH24_STENCIL8";a[a.DEPTH32F_STENCIL8=36013]="DEPTH32F_STENCIL8"})(b.RenderbufferFormat||(b.RenderbufferFormat={}));b.Usage=
void 0;(function(a){a[a.STATIC_DRAW=35044]="STATIC_DRAW";a[a.DYNAMIC_DRAW=35048]="DYNAMIC_DRAW";a[a.STREAM_DRAW=35040]="STREAM_DRAW";a[a.STATIC_READ=35045]="STATIC_READ";a[a.DYNAMIC_READ=35049]="DYNAMIC_READ";a[a.STREAM_READ=35041]="STREAM_READ";a[a.STATIC_COPY=35046]="STATIC_COPY";a[a.DYNAMIC_COPY=35050]="DYNAMIC_COPY";a[a.STREAM_COPY=35042]="STREAM_COPY"})(b.Usage||(b.Usage={}));b.ShaderType=void 0;(function(a){a[a.FRAGMENT_SHADER=35632]="FRAGMENT_SHADER";a[a.VERTEX_SHADER=35633]="VERTEX_SHADER"})(b.ShaderType||
(b.ShaderType={}));b.FramebufferTarget=void 0;(function(a){a[a.FRAMEBUFFER=36160]="FRAMEBUFFER";a[a.READ_FRAMEBUFFER=36008]="READ_FRAMEBUFFER";a[a.DRAW_FRAMEBUFFER=36009]="DRAW_FRAMEBUFFER"})(b.FramebufferTarget||(b.FramebufferTarget={}));b.ResourceType=void 0;(function(a){a[a.Texture=0]="Texture";a[a.BufferObject=1]="BufferObject";a[a.VertexArrayObject=2]="VertexArrayObject";a[a.Shader=3]="Shader";a[a.Program=4]="Program";a[a.FramebufferObject=5]="FramebufferObject";a[a.Renderbuffer=6]="Renderbuffer";
a[a.TransformFeedback=7]="TransformFeedback";a[a.Sync=8]="Sync";a[a.UNCOUNTED=9]="UNCOUNTED";a[a.LinesOfCode=9]="LinesOfCode";a[a.Uniform=10]="Uniform";a[a.COUNT=11]="COUNT"})(b.ResourceType||(b.ResourceType={}));b.ColorAttachment=void 0;(function(a){a[a.COLOR_ATTACHMENT0=36064]="COLOR_ATTACHMENT0";a[a.COLOR_ATTACHMENT1=36065]="COLOR_ATTACHMENT1";a[a.COLOR_ATTACHMENT2=36066]="COLOR_ATTACHMENT2";a[a.COLOR_ATTACHMENT3=36067]="COLOR_ATTACHMENT3";a[a.COLOR_ATTACHMENT4=36068]="COLOR_ATTACHMENT4";a[a.COLOR_ATTACHMENT5=
36069]="COLOR_ATTACHMENT5";a[a.COLOR_ATTACHMENT6=36070]="COLOR_ATTACHMENT6";a[a.COLOR_ATTACHMENT7=36071]="COLOR_ATTACHMENT7";a[a.COLOR_ATTACHMENT8=36072]="COLOR_ATTACHMENT8";a[a.COLOR_ATTACHMENT9=36073]="COLOR_ATTACHMENT9";a[a.COLOR_ATTACHMENT10=36074]="COLOR_ATTACHMENT10";a[a.COLOR_ATTACHMENT11=36075]="COLOR_ATTACHMENT11";a[a.COLOR_ATTACHMENT12=36076]="COLOR_ATTACHMENT12";a[a.COLOR_ATTACHMENT13=36077]="COLOR_ATTACHMENT13";a[a.COLOR_ATTACHMENT14=36078]="COLOR_ATTACHMENT14";a[a.COLOR_ATTACHMENT15=
36079]="COLOR_ATTACHMENT15"})(b.ColorAttachment||(b.ColorAttachment={}));b.SpecialDrawBuffers=void 0;(function(a){a[a.NONE=0]="NONE";a[a.BACK=1029]="BACK"})(b.SpecialDrawBuffers||(b.SpecialDrawBuffers={}));b.CompressedTextureFormat=void 0;(function(a){a[a.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT";a[a.COMPRESSED_RGBA_S3TC_DXT5_EXT=
33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT";a[a.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC";a[a.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC";a[a.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC";a[a.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC";a[a.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2";a[a.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2";a[a.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=
37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2";a[a.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC";a[a.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC"})(b.CompressedTextureFormat||(b.CompressedTextureFormat={}));b.UniformType=void 0;(function(a){a[a.FLOAT=5126]="FLOAT";a[a.FLOAT_VEC2=35664]="FLOAT_VEC2";a[a.FLOAT_VEC3=35665]="FLOAT_VEC3";a[a.FLOAT_VEC4=35666]="FLOAT_VEC4";a[a.INT=5124]="INT";a[a.INT_VEC2=35667]="INT_VEC2";a[a.INT_VEC3=35668]="INT_VEC3";
a[a.INT_VEC4=35669]="INT_VEC4";a[a.BOOL=35670]="BOOL";a[a.BOOL_VEC2=35671]="BOOL_VEC2";a[a.BOOL_VEC3=35672]="BOOL_VEC3";a[a.BOOL_VEC4=35673]="BOOL_VEC4";a[a.FLOAT_MAT2=35674]="FLOAT_MAT2";a[a.FLOAT_MAT3=35675]="FLOAT_MAT3";a[a.FLOAT_MAT4=35676]="FLOAT_MAT4";a[a.SAMPLER_2D=35678]="SAMPLER_2D";a[a.SAMPLER_CUBE=35680]="SAMPLER_CUBE";a[a.UNSIGNED_INT=5125]="UNSIGNED_INT";a[a.UNSIGNED_INT_VEC2=36294]="UNSIGNED_INT_VEC2";a[a.UNSIGNED_INT_VEC3=36295]="UNSIGNED_INT_VEC3";a[a.UNSIGNED_INT_VEC4=36296]="UNSIGNED_INT_VEC4";
a[a.FLOAT_MAT2x3=35685]="FLOAT_MAT2x3";a[a.FLOAT_MAT2x4=35686]="FLOAT_MAT2x4";a[a.FLOAT_MAT3x2=35687]="FLOAT_MAT3x2";a[a.FLOAT_MAT3x4=35688]="FLOAT_MAT3x4";a[a.FLOAT_MAT4x2=35689]="FLOAT_MAT4x2";a[a.FLOAT_MAT4x3=35690]="FLOAT_MAT4x3";a[a.SAMPLER_3D=35679]="SAMPLER_3D";a[a.SAMPLER_2D_SHADOW=35682]="SAMPLER_2D_SHADOW";a[a.SAMPLER_2D_ARRAY=36289]="SAMPLER_2D_ARRAY";a[a.SAMPLER_2D_ARRAY_SHADOW=36292]="SAMPLER_2D_ARRAY_SHADOW";a[a.SAMPLER_CUBE_SHADOW=36293]="SAMPLER_CUBE_SHADOW";a[a.INT_SAMPLER_2D=36298]=
"INT_SAMPLER_2D";a[a.INT_SAMPLER_3D=36299]="INT_SAMPLER_3D";a[a.INT_SAMPLER_CUBE=36300]="INT_SAMPLER_CUBE";a[a.INT_SAMPLER_2D_ARRAY=36303]="INT_SAMPLER_2D_ARRAY";a[a.UNSIGNED_INT_SAMPLER_2D=36306]="UNSIGNED_INT_SAMPLER_2D";a[a.UNSIGNED_INT_SAMPLER_3D=36307]="UNSIGNED_INT_SAMPLER_3D";a[a.UNSIGNED_INT_SAMPLER_CUBE=36308]="UNSIGNED_INT_SAMPLER_CUBE";a[a.UNSIGNED_INT_SAMPLER_2D_ARRAY=36311]="UNSIGNED_INT_SAMPLER_2D_ARRAY"})(b.UniformType||(b.UniformType={}));b.SyncParameter=void 0;(function(a){a[a.OBJECT_TYPE=
37138]="OBJECT_TYPE";a[a.SYNC_CONDITION=37139]="SYNC_CONDITION";a[a.SYNC_STATUS=37140]="SYNC_STATUS";a[a.SYNC_FLAGS=37141]="SYNC_FLAGS"})(b.SyncParameter||(b.SyncParameter={}));b.SyncStatus=void 0;(function(a){a[a.UNSIGNALED=37144]="UNSIGNALED";a[a.SIGNALED=37145]="SIGNALED"})(b.SyncStatus||(b.SyncStatus={}));b.ClientWaitSyncStatus=void 0;(function(a){a[a.ALREADY_SIGNALED=37146]="ALREADY_SIGNALED";a[a.TIMEOUT_EXPIRED=37147]="TIMEOUT_EXPIRED";a[a.CONDITION_SATISFIED=37148]="CONDITION_SATISFIED";a[a.WAIT_FAILED=
37149]="WAIT_FAILED"})(b.ClientWaitSyncStatus||(b.ClientWaitSyncStatus={}));b.SyncCondition=void 0;(function(a){a[a.SYNC_GPU_COMMANDS_COMPLETE=37143]="SYNC_GPU_COMMANDS_COMPLETE"})(b.SyncCondition||(b.SyncCondition={}));b.SyncFlag=void 0;(function(a){a[a.SYNC_FLUSH_COMMANDS_BIT=1]="SYNC_FLUSH_COMMANDS_BIT"})(b.SyncFlag||(b.SyncFlag={}));b.DepthStencilAttachment=33306;b.baseTextureUnit=33984;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/Texture":function(){define("exports ../../core/Error ../../core/has ../../core/Logger ../../core/maybe ../../core/promiseUtils ../../core/signal ./checkWebGLError ./enums ./GLObjectType ./TextureDescriptor ./textureUtils ./ValidatedTextureDescriptor".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r){const u=()=>c.getLogger("esri/views/webgl/Texture");l=class h{constructor(f,w=null,v=null){this.type=d.GLObjectType.Texture;this._glName=null;this._wasImmutablyAllocated=this._wrapModeDirty=this._samplingModeDirty=!1;this._compressionAbortController=p.signal(null);if("context"in f)this._descriptor=f,v=w;else{f=r.ValidatedTextureDescriptor.validate(f,w);if(!f)throw new a("Texture descriptor invalid");this._descriptor=f}this._descriptor.target===q.TextureType.TEXTURE_CUBE_MAP?
this._setDataCubeMap(v):this.setData(v)}get glName(){return this._glName}get descriptor(){return this._descriptor}get usedMemory(){return e.estimateMemory(this._descriptor)}get cachedMemory(){return this.usedMemory}get isDirty(){return this._samplingModeDirty||this._wrapModeDirty}get isCompressing(){return null!==this._compressionAbortController.value}dispose(){this.abortCompression();this._glName&&this._descriptor.context.instanceCounter.decrement(q.ResourceType.Texture,this);this._descriptor.context.gl&&
this._glName&&(this._descriptor.context.unbindTexture(this),this._descriptor.context.gl.deleteTexture(this._glName),this._glName=null)}release(){this.dispose()}resize(f,w){const v=this._descriptor;if(v.width!==f||v.height!==w){if(this._wasImmutablyAllocated)throw new a("Immutable textures can't be resized!");v.width=f;v.height=w;this._descriptor.target===q.TextureType.TEXTURE_CUBE_MAP?this._setDataCubeMap(null):this.setData(null)}}enableCompression(f){this._descriptor.shouldCompress=f}setData(f){this.abortCompression();
!k.isCompressedData(f)&&this._descriptor.internalFormat&&this._descriptor.internalFormat in q.CompressedTextureFormat&&(this._descriptor.internalFormat=void 0);this._setData(f);!k.isCompressedData(f)&&this._descriptor.shouldCompress&&this._compressOnWorker(f)}updateData(f,w,v,y,x,m,z=0){m||u().error("An attempt to use uninitialized data!");this._glName||u().error("An attempt to update uninitialized texture!");const B=this._descriptor;B.internalFormat=k.deriveInternalFormat(B);const {context:A,pixelFormat:D,
dataType:F,target:I,isImmutable:S}=B;if(S&&!this._wasImmutablyAllocated)throw new a("Cannot update immutable texture before allocation!");const T=A.bindTexture(this,h.TEXTURE_UNIT_FOR_UPDATES,!0);(0>w||0>v||w+y>B.width||v+x>B.height)&&u().error("An attempt to update out of bounds of the texture!");this._configurePixelStorage();const {gl:U}=A;z&&(y&&x||u().warn("Must pass width and height if `UNPACK_SKIP_ROWS` is used"),U.pixelStorei(U.UNPACK_SKIP_ROWS,z));k.isTexImageSource(m)?U.texSubImage2D(I,f,
w,v,y,x,D,F,m):k.isCompressedData(m)?U.compressedTexSubImage2D(I,f,w,v,y,x,B.internalFormat,m.levels[f]):U.texSubImage2D(I,f,w,v,y,x,D,F,m);z&&U.pixelStorei(U.UNPACK_SKIP_ROWS,0);A.bindTexture(T,h.TEXTURE_UNIT_FOR_UPDATES)}updateData3D(f,w,v,y,x,m,z,B){B||u().error("An attempt to use uninitialized data!");this._glName||u().error("An attempt to update an uninitialized texture!");const A=this._descriptor;A.internalFormat=k.deriveInternalFormat(A);const {context:D,pixelFormat:F,dataType:I,isImmutable:S,
target:T}=A;if(S&&!this._wasImmutablyAllocated)throw new a("Cannot update immutable texture before allocation!");k.is3DTarget(T)||u().warn("Attempting to set 3D texture data on a non-3D texture");const U=D.bindTexture(this,h.TEXTURE_UNIT_FOR_UPDATES);D.setActiveTexture(h.TEXTURE_UNIT_FOR_UPDATES);(0>w||0>v||0>y||w+x>A.width||v+m>A.height||y+z>A.depth)&&u().error("An attempt to update out of bounds of the texture!");this._configurePixelStorage();const {gl:L}=D;k.isCompressedData(B)?(B=B.levels[f],
L.compressedTexSubImage3D(T,f,w,v,y,x,m,z,A.internalFormat,B)):L.texSubImage3D(T,f,w,v,y,x,m,z,F,I,B);D.bindTexture(U,h.TEXTURE_UNIT_FOR_UPDATES)}generateMipmap(){const f=this._descriptor;if(0!==f.width&&0!==f.height){if(!f.hasMipmap){if(this._wasImmutablyAllocated)throw new a("Cannot add mipmaps to immutable texture after allocation");this._samplingModeDirty=f.hasMipmap=!0;k.validateTexture(f)}f.samplingMode===q.TextureSamplingMode.LINEAR?(this._samplingModeDirty=!0,f.samplingMode=q.TextureSamplingMode.LINEAR_MIPMAP_NEAREST):
f.samplingMode===q.TextureSamplingMode.NEAREST&&(this._samplingModeDirty=!0,f.samplingMode=q.TextureSamplingMode.NEAREST_MIPMAP_NEAREST);var w=this._descriptor.context.bindTexture(this,h.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.setActiveTexture(h.TEXTURE_UNIT_FOR_UPDATES);this._descriptor.context.gl.generateMipmap(f.target);this._descriptor.context.bindTexture(w,h.TEXTURE_UNIT_FOR_UPDATES)}}clearMipmap(){const f=this._descriptor;if(f.hasMipmap){if(this._wasImmutablyAllocated)throw new a("Cannot delete mipmaps to immutable texture after allocation");
f.hasMipmap=!1;this._samplingModeDirty=!0;k.validateTexture(f)}f.samplingMode===q.TextureSamplingMode.LINEAR_MIPMAP_NEAREST?(this._samplingModeDirty=!0,f.samplingMode=q.TextureSamplingMode.LINEAR):f.samplingMode===q.TextureSamplingMode.NEAREST_MIPMAP_NEAREST&&(this._samplingModeDirty=!0,f.samplingMode=q.TextureSamplingMode.NEAREST)}setSamplingMode(f){f!==this._descriptor.samplingMode&&(this._descriptor.samplingMode=f,this._samplingModeDirty=!0)}setWrapMode(f){f!==this._descriptor.wrapMode&&(this._descriptor.wrapMode=
f,k.validateTexture(this._descriptor),this._wrapModeDirty=!0)}applyChanges(){this._samplingModeDirty&&(this._applySamplingMode(),this._samplingModeDirty=!1);this._wrapModeDirty&&(this._applyWrapMode(),this._wrapModeDirty=!1)}abortCompression(){this.isCompressing&&(this._compressionAbortController.value=t.abortMaybe(this._compressionAbortController.value))}_setData(f,w){const v=this._descriptor,y=v.context?.gl;if(y){g.checkWebGLError(y);this._glName||(this._glName=y.createTexture())&&v.context.instanceCounter.increment(q.ResourceType.Texture,
this);k.validateTexture(v);var x=v.context.bindTexture(this,h.TEXTURE_UNIT_FOR_UPDATES);v.context.setActiveTexture(h.TEXTURE_UNIT_FOR_UPDATES);this._configurePixelStorage();g.checkWebGLError(y);w=w??v.target;var m=k.is3DTarget(w);if(k.isTexImageSource(f))this._setDataFromTexImageSource(f,w);else{const {width:z,height:B,depth:A}=v;if(null==z||null==B)throw new a("Width and height must be specified!");if(m&&null==A)throw new a("Depth must be specified!");v.internalFormat=k.deriveInternalFormat(v);v.isImmutable&&
!this._wasImmutablyAllocated&&this._texStorage(w,v.internalFormat,v.hasMipmap,z,B,A);if(k.isCompressedData(f)){if(!k.isCompressedFormat(v.internalFormat))throw new a("Attempting to use compressed data with an uncompressed format!");this._setDataFromCompressedSource(f,v.internalFormat,w)}else this._texImage(w,0,v.internalFormat,z,B,A,f),g.checkWebGLError(y),v.hasMipmap&&this.generateMipmap()}this._applySamplingMode();this._applyWrapMode();this._applyAnisotropicFilteringParameters();g.checkWebGLError(y);
v.context.bindTexture(x,h.TEXTURE_UNIT_FOR_UPDATES)}}_setDataCubeMap(f=null){for(let w=q.TextureType.TEXTURE_CUBE_MAP_POSITIVE_X;w<=q.TextureType.TEXTURE_CUBE_MAP_NEGATIVE_Z;w++)this._setData(f,w)}_configurePixelStorage(){const f=this._descriptor.context.gl,{unpackAlignment:w,flipped:v,preMultiplyAlpha:y}=this._descriptor;f.pixelStorei(f.UNPACK_ALIGNMENT,w);f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,v?1:0);f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,y?1:0)}_setDataFromTexImageSource(f,w){const {gl:v}=
this._descriptor.context,y=this._descriptor;y.internalFormat=k.deriveInternalFormat(y);const x=k.is3DTarget(w),{width:m,height:z,depth:B}=k.getDimensions(f);y.width||(y.width=m);y.height||(y.height=z);x&&(y.depth=B);y.isImmutable&&!this._wasImmutablyAllocated&&this._texStorage(w,y.internalFormat,y.hasMipmap,m,z,B);this._texImage(w,0,y.internalFormat,m,z,B,f);g.checkWebGLError(v);y.hasMipmap&&(this.generateMipmap(),g.checkWebGLError(v))}_setDataFromCompressedSource(f,w,v){const y=this._descriptor,
{width:x,height:m,depth:z}=y,B=f.levels;f=k.calcMipmapLevels(v,x,m,z);f=Math.min(f,B.length)-1;this._descriptor.context.gl.texParameteri(y.target,y.context.gl.TEXTURE_MAX_LEVEL,f);this._forEachMipmapLevel((A,D,F,I)=>{this._compressedTexImage(v,A,w,D,F,I,B[Math.min(A,B.length-1)])},f)}_texStorage(f,w,v,y,x,m){const {gl:z}=this._descriptor.context;if(!k.isSizedPixelFormat(w))throw new a("Immutable textures must have a sized internal format");if(this._descriptor.isImmutable){v=v?k.calcMipmapLevels(f,
y,x,m):1;if(k.is3DTarget(f)){if(null==m)throw new a("Missing depth dimension for 3D texture upload");z.texStorage3D(f,v,w,y,x,m)}else z.texStorage2D(f,v,w,y,x);this._wasImmutablyAllocated=!0}}_texImage(f,w,v,y,x,m,z){const B=this._descriptor.context.gl,A=k.is3DTarget(f),{isImmutable:D,pixelFormat:F,dataType:I}=this._descriptor;if(D){if(null!=z)if(A){if(null==m)throw new a("Missing depth dimension for 3D texture upload");B.texSubImage3D(f,w,0,0,0,y,x,m,F,I,z)}else B.texSubImage2D(f,w,0,0,y,x,F,I,z)}else if(A){if(null==
m)throw new a("Missing depth dimension for 3D texture upload");B.texImage3D(f,w,v,y,x,m,0,F,I,z)}else B.texImage2D(f,w,v,y,x,0,F,I,z)}_compressedTexImage(f,w,v,y,x,m,z){const B=this._descriptor.context.gl,A=k.is3DTarget(f);if(this._descriptor.isImmutable){if(null!=z)if(A){if(null==m)throw new a("Missing depth dimension for 3D texture upload");B.compressedTexSubImage3D(f,w,0,0,0,y,x,m,v,z)}else B.compressedTexSubImage2D(f,w,0,0,y,x,v,z)}else if(A){if(null==m)throw new a("Missing depth dimension for 3D texture upload");
B.compressedTexImage3D(f,w,v,y,x,m,0,z)}else B.compressedTexImage2D(f,w,v,y,x,0,z)}async _compressOnWorker(f){if(h.compressionWorkerHandle&&h.compressionWorkerHandle.isCompressible(f)){var w=this._descriptor.context?.gl.getExtension("WEBGL_compressed_texture_etc"),v=this._descriptor.context?.gl.getExtension("WEBGL_compressed_texture_s3tc");if(w||v){const y=new AbortController;this._compressionAbortController.value=y;f={data:await createImageBitmap(f),flipped:this.descriptor.flipped,width:f.width,
height:f.height,hasMipmap:this._descriptor.hasMipmap,hasETC:w?!0:!1,hasS3TC:v?!0:!1};h.compressionWorkerHandle.invoke(f,this._compressionAbortController.value.signal).then(x=>{x&&this.isCompressing&&this.glName&&(this._descriptor.internalFormat=x.internalFormat,this._setData(x.compressedTexture));y===this._compressionAbortController.value&&(this._compressionAbortController.value=null)}).catch(x=>{n.isAbortError(x)||y!==this._compressionAbortController.value||(this._compressionAbortController.value=
null)})}}}_forEachMipmapLevel(f,w=Infinity){let {width:v,height:y,depth:x,hasMipmap:m,target:z}=this._descriptor;const B=z===q.TextureType.TEXTURE_3D;if(null==v||null==y||B&&null==x)throw new a("Missing texture dimensions for mipmap calculation");for(let A=0;;++A){f(A,v,y,x);if(!m||1===v&&1===y&&(!B||1===x)||A>=w)break;v=Math.max(1,v>>1);y=Math.max(1,y>>1);B&&(x=Math.max(1,x>>1))}}_applySamplingMode(){const f=this._descriptor,w=f.context?.gl;let v=f.samplingMode,y=f.samplingMode;if(v===q.TextureSamplingMode.LINEAR_MIPMAP_NEAREST||
v===q.TextureSamplingMode.LINEAR_MIPMAP_LINEAR)v=q.TextureSamplingMode.LINEAR,f.hasMipmap||(y=q.TextureSamplingMode.LINEAR);else if(v===q.TextureSamplingMode.NEAREST_MIPMAP_NEAREST||v===q.TextureSamplingMode.NEAREST_MIPMAP_LINEAR)v=q.TextureSamplingMode.NEAREST,f.hasMipmap||(y=q.TextureSamplingMode.NEAREST);w.texParameteri(f.target,w.TEXTURE_MAG_FILTER,v);w.texParameteri(f.target,w.TEXTURE_MIN_FILTER,y)}_applyWrapMode(){const f=this._descriptor,w=f.context?.gl;"number"===typeof f.wrapMode?(w.texParameteri(f.target,
w.TEXTURE_WRAP_S,f.wrapMode),w.texParameteri(f.target,w.TEXTURE_WRAP_T,f.wrapMode)):(w.texParameteri(f.target,w.TEXTURE_WRAP_S,f.wrapMode.s),w.texParameteri(f.target,w.TEXTURE_WRAP_T,f.wrapMode.t))}_applyAnisotropicFilteringParameters(){const f=this._descriptor,w=f.context.capabilities.textureFilterAnisotropic;w&&f.context.gl.texParameterf(f.target,w.TEXTURE_MAX_ANISOTROPY,f.maxAnisotropy??1)}};l.TEXTURE_UNIT_FOR_UPDATES=0;l.compressionWorkerHandle=null;b.Texture=l;b.tracer=null;Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/checkWebGLError":function(){define(["exports","../../core/Error","../../core/has","../../core/Logger"],function(b,a,l,c){function t(p,g){switch(g){case p.INVALID_ENUM:return"Invalid Enum. An unacceptable value has been specified for an enumerated argument.";case p.INVALID_VALUE:return"Invalid Value. A numeric argument is out of range.";case p.INVALID_OPERATION:return"Invalid Operation. The specified command is not allowed for the current state.";
case p.INVALID_FRAMEBUFFER_OPERATION:return"Invalid Framebuffer operation. The currently bound framebuffer is not framebuffer complete when trying to render to or to read from it.";case p.OUT_OF_MEMORY:return"Out of memory. Not enough memory is left to execute the command.";case p.CONTEXT_LOST_WEBGL:return"WebGL context has been lost";default:return"Unknown error"}}const n=!!l("enable-feature:webgl-debug");b.checkWebGLError=function(p){if(n){var g=p.getError();g&&(p=t(p,g),g=Error().stack,c.getLogger("esri.views.webgl.checkWebGLError").error(new a("webgl-error",
"WebGL error occurred",{message:p,stack:g})))}};b.hasFeatureFlagWebGLDebug=n;b.webglDebugEnabled=function(){return n};b.webglValidateShadersEnabled=function(){return n};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/GLObjectType":function(){define(["exports"],function(b){b.GLObjectType=void 0;var a=b.GLObjectType||(b.GLObjectType={});a[a.Texture=0]="Texture";a[a.RenderBuffer=1]="RenderBuffer";Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/TextureDescriptor":function(){define(["exports",
"./enums","./Util"],function(b,a,l){class c{constructor(t=0,n=t){this.width=t;this.height=n;this.target=a.TextureType.TEXTURE_2D;this.pixelFormat=a.PixelFormat.RGBA;this.dataType=a.PixelType.UNSIGNED_BYTE;this.samplingMode=a.TextureSamplingMode.LINEAR;this.wrapMode=a.TextureWrapMode.REPEAT;this.maxAnisotropy=1;this.isOpaque=this.hasMipmap=this.flipped=!1;this.unpackAlignment=4;this.shouldCompress=this.preMultiplyAlpha=!1;this.depth=1;this.isImmutable=!1}}b.TextureDescriptor=c;b.estimateMemory=function(t){return 0>=
t.width||0>=t.height?0:Math.round(t.width*t.height*t.depth*(t.hasMipmap?4/3:1)*(null==t.internalFormat?4:l.getBytesPerElementFormat(t.internalFormat))*(t.target===a.TextureType.TEXTURE_CUBE_MAP?6:1))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/Util":function(){define(["exports","../../core/has","./checkWebGLError","./enums","./getDataTypeBytes"],function(b,a,l,c,t){function n(g){g=g.gl;switch(g.getError()){case g.NO_ERROR:return null;case g.INVALID_ENUM:return"An unacceptable value has been specified for an enumerated argument";
case g.INVALID_VALUE:return"An unacceptable value has been specified for an argument";case g.INVALID_OPERATION:return"The specified command is not allowed for the current state";case g.INVALID_FRAMEBUFFER_OPERATION:return"The currently bound framebuffer is not framebuffer complete";case g.OUT_OF_MEMORY:return"Not enough memory is left to execute the command";case g.CONTEXT_LOST_WEBGL:return"WebGL context is lost"}return"Unknown error"}function p(g){return g[0].stride}b.bindVertexBufferLayout=function(g,
q,d,e,k=0){const r=g.gl;g.bindBuffer(d);for(const h of e)if(e=q.get(h.name),null==e)console.warn(`There is no location for vertex attribute '${h.name}' defined.`);else{d=k*h.stride;if(4>=h.count)r.vertexAttribPointer(e,h.count,h.type,h.normalized,h.stride,h.offset+d),r.enableVertexAttribArray(e),0<h.divisor&&g.gl.vertexAttribDivisor(e,h.divisor);else if(9===h.count)for(var u=0;3>u;u++)r.vertexAttribPointer(e+u,3,h.type,h.normalized,h.stride,h.offset+12*u+d),r.enableVertexAttribArray(e+u),0<h.divisor&&
g.gl.vertexAttribDivisor(e+u,h.divisor);else if(16===h.count)for(u=0;4>u;u++)r.vertexAttribPointer(e+u,4,h.type,h.normalized,h.stride,h.offset+16*u+d),r.enableVertexAttribArray(e+u),0<h.divisor&&g.gl?.vertexAttribDivisor(e+u,h.divisor);else console.error("Unsupported vertex attribute element count: "+h.count);if(l.webglDebugEnabled()){e=n(g);u=t.getDataTypeBytes(h.type);const f=h.offset;u=Math.round(u/f)!==u/f?`. Offset not a multiple of stride. DataType requires ${u} bytes, but descriptor has an offset of ${f}`:
"";e&&console.error(`Unable to bind vertex attribute "${h.name}" with baseInstanceOffset ${d}${u}:`,e,h)}}};b.getBytesPerElementFormat=function(g){switch(g){case c.PixelFormat.ALPHA:case c.PixelFormat.LUMINANCE:case c.PixelFormat.RED:case c.PixelFormat.RED_INTEGER:case c.SizedPixelFormat.R8:case c.SizedPixelFormat.R8I:case c.SizedPixelFormat.R8UI:case c.SizedPixelFormat.R8_SNORM:case c.RenderbufferFormat.STENCIL_INDEX8:return 1;case c.PixelFormat.LUMINANCE_ALPHA:case c.PixelFormat.RG:case c.PixelFormat.RG_INTEGER:case c.SizedPixelFormat.RGBA4:case c.SizedPixelFormat.R16F:case c.SizedPixelFormat.R16I:case c.SizedPixelFormat.R16UI:case c.SizedPixelFormat.RG8:case c.SizedPixelFormat.RG8I:case c.SizedPixelFormat.RG8UI:case c.SizedPixelFormat.RG8_SNORM:case c.SizedPixelFormat.RGB565:case c.SizedPixelFormat.RGB5_A1:case c.RenderbufferFormat.DEPTH_COMPONENT16:return 2;
case c.PixelFormat.DEPTH_COMPONENT:case c.PixelFormat.RGB:case c.PixelFormat.RGB_INTEGER:case c.SizedPixelFormat.RGB8:case c.SizedPixelFormat.RGB8I:case c.SizedPixelFormat.RGB8UI:case c.SizedPixelFormat.RGB8_SNORM:case c.SizedPixelFormat.SRGB8:case c.RenderbufferFormat.DEPTH_COMPONENT24:return 3;case c.PixelFormat.DEPTH_STENCIL:case c.PixelFormat.DEPTH24_STENCIL8:case c.PixelFormat.RGBA:case c.PixelFormat.RGBA_INTEGER:case c.SizedPixelFormat.RGBA8:case c.SizedPixelFormat.R32F:case c.SizedPixelFormat.R11F_G11F_B10F:case c.SizedPixelFormat.RG16F:case c.SizedPixelFormat.R32I:case c.SizedPixelFormat.R32UI:case c.SizedPixelFormat.RG16I:case c.SizedPixelFormat.RG16UI:case c.SizedPixelFormat.RGBA8I:case c.SizedPixelFormat.RGBA8UI:case c.SizedPixelFormat.RGBA8_SNORM:case c.SizedPixelFormat.SRGB8_ALPHA8:case c.SizedPixelFormat.RGB9_E5:case c.SizedPixelFormat.RGB10_A2UI:case c.SizedPixelFormat.RGB10_A2:case c.RenderbufferFormat.DEPTH_STENCIL:case c.RenderbufferFormat.DEPTH_COMPONENT32F:case c.RenderbufferFormat.DEPTH24_STENCIL8:return 4;
case c.RenderbufferFormat.DEPTH32F_STENCIL8:return 5;case c.SizedPixelFormat.RGB16F:case c.SizedPixelFormat.RGB16I:case c.SizedPixelFormat.RGB16UI:return 6;case c.SizedPixelFormat.RG32F:case c.SizedPixelFormat.RG32I:case c.SizedPixelFormat.RG32UI:case c.SizedPixelFormat.RGBA16F:case c.SizedPixelFormat.RGBA16I:case c.SizedPixelFormat.RGBA16UI:return 8;case c.SizedPixelFormat.RGB32F:case c.SizedPixelFormat.RGB32I:case c.SizedPixelFormat.RGB32UI:return 12;case c.SizedPixelFormat.RGBA32F:case c.SizedPixelFormat.RGBA32I:case c.SizedPixelFormat.RGBA32UI:return 16;
case c.CompressedTextureFormat.COMPRESSED_RGB_S3TC_DXT1_EXT:case c.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT1_EXT:return.5;case c.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT3_EXT:case c.CompressedTextureFormat.COMPRESSED_RGBA_S3TC_DXT5_EXT:return 1;case c.CompressedTextureFormat.COMPRESSED_R11_EAC:case c.CompressedTextureFormat.COMPRESSED_SIGNED_R11_EAC:case c.CompressedTextureFormat.COMPRESSED_RGB8_ETC2:case c.CompressedTextureFormat.COMPRESSED_SRGB8_ETC2:case c.CompressedTextureFormat.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2:case c.CompressedTextureFormat.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2:return.5;
case c.CompressedTextureFormat.COMPRESSED_RG11_EAC:case c.CompressedTextureFormat.COMPRESSED_SIGNED_RG11_EAC:case c.CompressedTextureFormat.COMPRESSED_RGBA8_ETC2_EAC:case c.CompressedTextureFormat.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:return 1}return 0};b.getErrorString=n;b.getStride=p;b.unbindVertexBufferLayout=function(g,q,d,e){const k=g.gl;g.bindBuffer(d);for(const r of e)if(d=q.get(r.name),4>=r.count)k.disableVertexAttribArray(d),r.divisor&&0<r.divisor&&g.gl?.vertexAttribDivisor(d,0);else if(9===r.count)for(e=
0;3>e;e++)k.disableVertexAttribArray(d+e),r.divisor&&0<r.divisor&&g.gl?.vertexAttribDivisor(d+e,0);else if(16===r.count)for(e=0;4>e;e++)k.disableVertexAttribArray(d+e),r.divisor&&0<r.divisor&&g.gl?.vertexAttribDivisor(d+e,0);else console.error("Unsupported vertex attribute element count: "+r.count);g.unbindBuffer(c.BufferType.ARRAY_BUFFER)};b.vertexCount=function(g,q){return(g.vertexBuffers.get(q)?.usedMemory??0)/p(g.layout.get(q))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/views/webgl/getDataTypeBytes":function(){define(["exports","./enums"],function(b,a){b.getDataTypeBytes=function(l){switch(l){case a.DataType.BYTE:case a.DataType.UNSIGNED_BYTE:return 1;case a.DataType.SHORT:case a.DataType.UNSIGNED_SHORT:case a.DataType.HALF_FLOAT:return 2;case a.DataType.FLOAT:case a.DataType.INT:case a.DataType.UNSIGNED_INT:return 4}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/textureUtils":function(){define(["exports","../../core/Error",
"../../core/Logger","./enums"],function(b,a,l,c){function t(g){return g in c.CompressedTextureFormat}function n(g){return null!=g&&"type"in g&&"compressed"===g.type}function p(g){return null!=g&&"byteLength"in g}b.calcMipmapLevels=function(g,q,d,e=1){q=Math.max(q,d);g===c.TextureType.TEXTURE_3D&&(q=Math.max(q,e));return Math.floor(Math.log2(q))+1};b.deriveInternalFormat=function(g){if(null!=g.internalFormat)return g.internalFormat===c.PixelFormat.DEPTH_STENCIL?c.PixelFormat.DEPTH24_STENCIL8:g.internalFormat;
switch(g.dataType){case c.PixelType.FLOAT:switch(g.pixelFormat){case c.PixelFormat.RGBA:return c.SizedPixelFormat.RGBA32F;case c.PixelFormat.RGB:return c.SizedPixelFormat.RGB32F;default:throw new a("Unable to derive format");}case c.PixelType.UNSIGNED_BYTE:switch(g.pixelFormat){case c.PixelFormat.RGBA:return c.SizedPixelFormat.RGBA8;case c.PixelFormat.RGB:return c.SizedPixelFormat.RGB8}}return g.internalFormat=g.pixelFormat===c.PixelFormat.DEPTH_STENCIL?c.PixelFormat.DEPTH24_STENCIL8:g.pixelFormat};
b.getDimensions=function(g){let q="width"in g?g.width:g.codedWidth,d="height"in g?g.height:g.codedHeight;g instanceof HTMLVideoElement&&(q=g.videoWidth,d=g.videoHeight);return{width:q,height:d,depth:1}};b.is3DTarget=function(g){return g===c.TextureType.TEXTURE_3D||g===c.TextureType.TEXTURE_2D_ARRAY};b.isArrayBufferView=p;b.isCompressedData=n;b.isCompressedFormat=t;b.isCompressedTexture=function(g){return g.descriptor.internalFormat?t(g.descriptor.internalFormat):!1};b.isSizedPixelFormat=function(g){return g in
c.SizedPixelFormat};b.isTexImageSource=function(g){return null!=g&&!n(g)&&!p(g)};b.validateTexture=function(g){(null!=g.width&&0>g.width||null!=g.height&&0>g.height||null!=g.depth&&0>g.depth)&&l.getLogger("esri/views/webgl/textureUtils").error("Negative dimension parameters are not allowed!")};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/ValidatedTextureDescriptor":function(){define(["exports","./enums","./TextureDescriptor"],function(b,a,l){class c extends l.TextureDescriptor{constructor(t,
n){super();this.context=t;Object.assign(this,n);switch(this.internalFormat){case a.SizedPixelFormat.R16F:case a.SizedPixelFormat.R16I:case a.SizedPixelFormat.R16UI:case a.SizedPixelFormat.R32F:case a.SizedPixelFormat.R32I:case a.SizedPixelFormat.R32UI:case a.SizedPixelFormat.R8_SNORM:case a.SizedPixelFormat.R8:case a.SizedPixelFormat.R8I:case a.SizedPixelFormat.R8UI:this.pixelFormat=a.PixelFormat.RED}}static validate(t,n){return new c(t,n)}}b.ValidatedTextureDescriptor=c;Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/views/2d/engine/webgl/effects/highlight/MultiHighlightGradient":function(){define(["exports","./HighlightGradient"],function(b,a){class l{constructor(){this.type="multi";this.gradients=[]}setHighlightOptions(c){for(var t=0;t<c.length;t++)this.gradients[t]||(this.gradients[t]=new a),this.gradients[t].setHighlightOptions(c[t]);for(t=c.length+1;t<this.gradients.length;t++)this.gradients[t].destroy();this.gradients.length=c.length}destroy(){for(const c of this.gradients)c.destroy()}getReasonsWithGradients(){let c=
1;const t=[];for(let n=0;n<this.gradients.length;n++)t.push({activeReasons:c,activeGradient:this.gradients[n]}),c<<=1;return t}}b.MultiHighlightGradient=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/shaderGraph/techniques/featureTechniqueUtils":function(){define(["exports","../../../../../../core/unitUtils","../../definitions","../../enums","../../../../../webgl/enums"],function(b,a,l,c,t){function n({pixelRatio:k,state:r,displayLevel:u,requiredLevel:h},
f){return{displayMat3:r.displayMat3,displayViewMat3:r.displayViewMat3,displayViewScreenMat3:f.transforms.displayViewScreenMat3,viewMat3:r.viewMat3,tileMat3:f.transforms.tileMat3,displayZoomFactor:1/2**(u-f.key.level),requiredZoomFactor:1/2**(h-f.key.level),tileOffset:[f.x,f.y],currentScale:r.scale,currentZoom:u,metersPerSRUnit:a.getMetersPerUnitForSR(r.spatialReference),rotation:r.rotation,pixelRatio:k}}function p(k){return"highlight"===k.passOptions?.type}function g(k){return"hittest"===k.passOptions?.type}
const q={color:{write:[!0,!0,!0,!0],blendMode:"composite"},depth:!1,stencil:{write:!1,test:{ref:k=>k.stencilRef,compare:t.CompareFunction.EQUAL,mask:255,op:{fail:t.StencilOperation.KEEP,zFail:t.StencilOperation.KEEP,zPass:t.StencilOperation.REPLACE}}}},d={color:{write:[!0,!0,!0,!0],blendMode:"additive"},depth:!1,stencil:!1},e={...q,color:{write:[!0,!0,!0,!0],blendMode:"delete"}};b.getFeaturePipelineState=function(k){return g(k)?d:p(k)&&"clear"===k.passOptions.stepType?e:q};b.getFeatureUniforms=function(k,
r){const {attributeView:u,context:h}=k;var f=u.getUniforms(h);r=n(k,r);if(g(k)){var {position:w,distance:v,smallSymbolDistance:y,smallSymbolSizeThreshold:x}=k.passOptions;var m={position:w,distance:v,smallSymbolDistance:y,smallSymbolSizeThreshold:x}}else m=null;if(p(k)){var {activeReasons:z,highlightAll:B}=k.passOptions;k={activeReasons:z,highlightAll:B?1:0}}else k=null;return{storage:f,view:r,hittestRequest:m,highlight:k}};b.getLocalTileOffset=function(k){const {row:r,col:u}=k.key;k=u*l.tileSize;
const h=r*l.tileSize;return{tileOffsetFromLocalOrigin:[k%l.maxRepresentableInt,h%l.maxRepresentableInt],maxIntsToLocalOrigin:[Math.floor(k/l.maxRepresentableInt),Math.floor(h/l.maxRepresentableInt)]}};b.getSelectionDefines=function(k){return{inside:k.selection===c.FeatureSelection.InsideEffect,outside:k.selection===c.FeatureSelection.OutsideEffect}};b.getViewUniforms=n;b.isHighlight=p;b.isHittest=g;b.resolveDynamicUniforms=function(k,r,u){const h={};for(const f in u)h[f]=u[f]instanceof Function?u[f](k,
r):u[f];return h};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/engine/webgl/enums":function(){define(["exports"],function(b){b.WGLGeometryType=void 0;(function(a){a[a.FILL=0]="FILL";a[a.LINE=1]="LINE";a[a.MARKER=2]="MARKER";a[a.TEXT=3]="TEXT";a[a.LABEL=4]="LABEL"})(b.WGLGeometryType||(b.WGLGeometryType={}));b.WGLDrawPhase=void 0;(function(a){a[a.NONE=0]="NONE";a[a.MAP=1]="MAP";a[a.LABEL=2]="LABEL";a[a.LABEL_ALPHA=4]="LABEL_ALPHA";a[a.HITTEST=8]="HITTEST";a[a.HIGHLIGHT=
16]="HIGHLIGHT";a[a.CLIP=32]="CLIP";a[a.DEBUG=64]="DEBUG";a[a.NUM_DRAW_PHASES=9]="NUM_DRAW_PHASES"})(b.WGLDrawPhase||(b.WGLDrawPhase={}));b.VVBinding=void 0;(function(a){a[a.SIZE=0]="SIZE";a[a.COLOR=1]="COLOR";a[a.OPACITY=2]="OPACITY";a[a.ROTATION=3]="ROTATION"})(b.VVBinding||(b.VVBinding={}));b.WGLVVTarget=void 0;(function(a){a[a.MINMAX_TARGETS_OUTLINE=128]="MINMAX_TARGETS_OUTLINE";a[a.SCALE_TARGETS_OUTLINE=256]="SCALE_TARGETS_OUTLINE";a[a.FIELD_TARGETS_OUTLINE=512]="FIELD_TARGETS_OUTLINE";a[a.UNIT_TARGETS_OUTLINE=
1024]="UNIT_TARGETS_OUTLINE"})(b.WGLVVTarget||(b.WGLVVTarget={}));b.MosaicType=void 0;(function(a){a[a.SPRITE=0]="SPRITE";a[a.GLYPH=1]="GLYPH"})(b.MosaicType||(b.MosaicType={}));b.WGLSymbologyType=void 0;(function(a){a[a.DEFAULT=0]="DEFAULT";a[a.SIMPLE=1]="SIMPLE";a[a.DOT_DENSITY=2]="DOT_DENSITY";a[a.OUTLINE_FILL=3]="OUTLINE_FILL";a[a.OUTLINE_FILL_SIMPLE=4]="OUTLINE_FILL_SIMPLE";a[a.HEATMAP=5]="HEATMAP";a[a.PIE_CHART=6]="PIE_CHART"})(b.WGLSymbologyType||(b.WGLSymbologyType={}));b.FeatureSelection=
void 0;(function(a){a[a.All=0]="All";a[a.Highlight=1]="Highlight";a[a.InsideEffect=2]="InsideEffect";a[a.OutsideEffect=3]="OutsideEffect"})(b.FeatureSelection||(b.FeatureSelection={}));b.FeatureBatchingStrategy=void 0;(function(a){a[a.BATCHING=0]="BATCHING";a[a.STRICT_ORDER=1]="STRICT_ORDER";a[a.STRICT_MARKERS_AND_TEXT=2]="STRICT_MARKERS_AND_TEXT"})(b.FeatureBatchingStrategy||(b.FeatureBatchingStrategy={}));b.FeatureSymbologyDrawOrder=void 0;(function(a){a[a.FILL=0]="FILL";a[a.LINE=1]="LINE";a[a.MARKER=
2]="MARKER";a[a.TEXT=3]="TEXT"})(b.FeatureSymbologyDrawOrder||(b.FeatureSymbologyDrawOrder={}));Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/clippingUtils":function(){define(["exports","../../../geometry/support/contains"],function(b,a){function l(c,t,n){const p="string"===typeof c.left?parseFloat(c.left)/100*t:c.left,g="string"===typeof c.right?parseFloat(c.right)/100*t:c.right,q="string"===typeof c.top?parseFloat(c.top)/100*n:c.top;c="string"===typeof c.bottom?
parseFloat(c.bottom)/100*n:c.bottom;return{xmin:p,xmax:Math.max(t-g,p),ymin:q,ymax:Math.max(n-c,q)}}b.clipContainsPoint=function(c,t,n,p){switch(t.type){case "rect":const {width:g,height:q}=c,{xmin:d,xmax:e,ymin:k,ymax:r}=l(t,g,q),{x:u,y:h}=n;return u>d&&u<e&&h>k&&h<r;case "path":return 0!==t.path.length&&Array.isArray(t.path[0][0])?a.ringsContainsCoords(t.path,[n.x,n.y]):!0;case "geometry":return null==t.geometry?!0:"polygon"===t.geometry.type?a.polygonContainsPoint(t.geometry,p):a.extentContainsPoint(t.geometry,
p)}};b.createScreenExtent=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/highlightOptionsUtils":function(){define(["exports","../../../core/Collection","../../support/HighlightOptions"],function(b,a,l){b.getDefaultHighlightOptions=function(c){if(!c.highlights)return null;const t=c.highlights.findIndex(n=>"default"===n.name);return-1===t?null:c.highlights.items[t]};b.setDefaultHighlightOptions=function(c,t){if(!c.highlights){if(!t)return;c.highlights=new a([new l])}const n=
c.highlights.findIndex(p=>"default"===p.name);t?c.highlights.items[n].assignFrom(t):(c.highlights.removeAt(n),0===c.highlights.length&&(c.highlights=null))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/hitTestUtils":function(){define("exports ../../../Graphic ../../../core/arrayUtils ../../../core/iteratorUtils ./clippingUtils ../../support/screenUtils".split(" "),function(b,a,l,c,t,n){function p(e,k,r,u,h,f){return w=>{if(w instanceof a){if(w.layer===e)f?.();
else{var v=e.allLayerViews.find(y=>y.layer===w.layer);v&&h?.(v)}u(q(w))}else"layer"in w&&"element"in w||("subtype-sublayer"===w.type?(v=e.allLayerViews.find(y=>y.layer===w.parent))&&r(w,v):(v=e.allLayerViews.find(y=>y.layer===w))&&k(v))}}function g(e,k){if(e)if(c.isIterable(e))for(const r of e)if(c.isIterable(r))for(const u of r)k(u);else k(r);else k(e)}function q(e){const k=e.getObjectId();return k?`${e.layer?.uid??e.sourceLayer?.uid??"MapView"}/${k}`:`"MapView/${e.uid}`}function d({layer:e},k){"subtype-group"===
e?.type&&e.sublayers.forEach(r=>{k(r)})}b.hitTest=async function(e,k,r){const u=n.isSupportedScreenPointEvent(k)?n.createScreenPointFromSupportedEvent(e,k):k;if(!e.ready||isNaN(u.x)||isNaN(u.y))return{screenPoint:u,results:[]};let h=new Set;const f=new Set;let w=!1,v=null,y=null;r?.include?g(r.include,p(e,m=>{h.add(m);d(m,z=>f.add(z))},(m,z)=>{f.add(m);h.add(z)},m=>{v||=new Set;v.add(m)},m=>h.add(m),()=>w=!0)):(w=!0,h=new Set(e.allLayerViews),h.forEach(m=>{d(m,z=>f.add(z))}));r?.exclude&&g(r.exclude,
p(e,m=>{h.delete(m);d(m,z=>f.delete(z))},m=>f.delete(m),m=>{y||=new Set;y.add(m)}));const x=e.toMap(u);r=e.allLayerViews.filter(m=>!m.suspended&&h.has(m)&&m.clips.every(z=>t.clipContainsPoint(e,z,u,x))).reverse();k=w?e.graphicsView.hitTest(x).map(m=>({type:"graphic",graphic:m,layer:null,mapPoint:x})):[];r=await Promise.all(r.map(m=>m.hitTest(x,u)).toArray());k=[...k,...r].filter(l.isSome).flat().filter(l.isSome);k=k.filter(m=>"graphic"===m.type&&"subtype-group"===m.layer?.type?f.has(m.graphic.layer):
!0);v&&(k=k.filter(m=>!("graphic"in m)||!m.graphic||v?.has(q(m.graphic))));y&&(k=k.filter(m=>!("graphic"in m)||!m.graphic||!y?.has(q(m.graphic))));return{screenPoint:u,results:k}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/screenshotUtils":function(){define(["exports","../../support/screenshotUtils"],function(b,a){function l(p,g){const q=t(g||{},Math.min(4,a.getMaximumResolutionScale(p.size,Math.min(4096,p.stage.context.parameters.maxTextureSize))),p.size,
p.padding),d=c(g,p.allLayerViews);return p.stage.takeScreenshot(q,d,p.backgroundColor,g?.rotation)}function c(p={},g){if(p.layers){var q=[];p.layers.forEach(d=>{const e=g.find(k=>k.layer.id===d.id);e?.container&&q.push(e.container)});return q}}function t(p,g,q,d){p.ignorePadding&&(d={left:0,right:0,top:0,bottom:0});var e=null;null!=p.width&&null!=p.height?e=[p.width,p.height]:null==p.width&&null!=p.height?e=[p.height,p.height]:null!=p.width&&null==p.height?e=[p.width,p.width]:null==p.width&&null==
p.height&&(e=null);var k=q[0]-(d.left+d.right);q=q[1]-(d.top+d.bottom);p=p.area||{x:0,y:0,width:k,height:q};if(e){const r=e[0]/e[1];r>k/q?(k=p.width/r,p={x:p.x,y:Math.round(p.y+(p.height-k)/2),width:p.width,height:Math.round(k)}):(k=p.height*r,p={x:Math.round(p.x+(p.width-k)/2),y:p.y,width:Math.round(k),height:p.height})}else e=[p.width,p.height];e[0]>p.width?(g=Math.min(e[0]/p.width,g),e=e[0]/p.width/g):(g=1,e=e[0]/p.width);return{cropArea:{x:Math.round((p.x+d.left)*g),y:Math.round((p.y+d.top)*g),
width:Math.round(p.width*g),height:Math.round(p.height*g)},outputScale:e,resolutionScale:g}}const n={flipY:!0,premultipliedAlpha:!0};b.createScreenshotRegion=t;b.takeRawScreenshot=async function(p,g){p=await l(p,g);return a.encodeData(p,n)};b.takeScreenshot=async function(p,g){p=await l(p,g);const {format:q,quality:d}=a.getFormatAndQuality(g?.format,g?.quality);return a.encode(p,{format:q,quality:d},n)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/screenshotUtils":function(){define(["exports",
"../../core/has","../../core/mathUtils","../../core/imageUtils"],function(b,a,l,c){function t(f,w){const {format:v,quality:y,rotation:x,disableDecorations:m}=f||{};var z=d(f,w.padding);var B=w.width-z.left-z.right;w=w.height-z.top-z.bottom;z={x:0,y:0,width:B,height:w};if(f?.area){null!=f.area.x&&(z.x=Math.floor(f.area.x));null!=f.area.y&&(z.y=Math.floor(f.area.y));var A=null!=f.area.width?Math.floor(f.area.width):null,D=null!=f.area.height?Math.floor(f.area.height):null;z.width=B-z.x;z.height=w-z.y;
null!=A&&null!=D?(z.width=Math.min(z.width,A),z.height=Math.min(z.height,D)):null==A&&null!=D?(A=Math.min(z.width,A),z.height*=A/z.width,z.width=A):null!=A&&null==D&&(A=Math.min(z.height,D),z.width*=A/z.height,z.height=A)}z=q(z,f);A=Math.floor(Math.max(z.x,0));D=Math.floor(Math.max(z.y,0));B={x:A,y:D,width:Math.floor(Math.min(z.width,B-A)),height:Math.floor(Math.min(z.height,w-D))};w=B.width/B.height;z=z.width/z.height;z!==w&&(z>w?(w=Math.floor(B.width/z),B={x:B.x,y:Math.floor(B.y+(B.height-w)/2),
width:B.width,height:w}):(w=Math.floor(B.height*z),B={x:Math.floor(B.x+(B.width-w)/2),y:B.y,width:w,height:B.height}));const {width:F,height:I}=g(f,B);w=e(v);z=u[w];z=l.clamp(null!=y?y:z,0,100);return{format:w,quality:z,area:B,width:F,height:I,rotation:x,disableDecorations:!!m,ignoreBackground:!!f?.ignoreBackground,ignorePadding:!!f?.ignorePadding}}function n(f,w){null==k&&(k=document.createElement("canvas"));var v=k;if(w.premultipliedAlpha){var y=f.data;const m=y.length;for(let z=0;z<m;z+=4){var x=
y[z+3];255!==x&&0<x&&(x=255/x,y[z]*=x,y[z+1]*=x,y[z+2]*=x)}}v.width=f.width;v.height=f.height;y=v.getContext("2d",{willReadFrequently:!0});y.putImageData(f,0,0);w.flipY&&(y.save(),y.globalCompositeOperation="copy",y.scale(1,-1),y.translate(0,-y.canvas.height),y.drawImage(y.canvas,0,0),y.restore());return{ctx:y,canvas:v}}function p(f,w){return f.toDataURL(r[w.format],w.quality/100)}function g(f,w){if(!f)return w;const v=f.width;f=f.height;if(null!=v&&null!=f)return{width:Math.floor(v),height:Math.floor(f)};
if(null==v&&null==f)return w;w=w.width/w.height;return null==f?{width:Math.floor(v),height:Math.floor(v/w)}:{width:Math.floor(f*w),height:Math.floor(f)}}function q(f,w){if(null==w?.width||null==w.height)return f;w=w.width/w.height;const v=f.width/f.height;if(v===w)return f;if(v<w)return w=Math.floor(f.height*w),f.x-=(w-f.width)/2,f.width=w,f;w=Math.floor(f.width/w);f.y-=(w-f.height)/2;f.height=w;return f}function d(f,w){return!w||f?.ignorePadding?h:w}function e(f){switch(f){case "png":case "jpg":case "jpeg":return f;
case null:case void 0:return"png";default:return"png"}}let k=null;const r={png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg"},u={png:100,jpg:98,jpeg:98},h={top:0,right:0,bottom:0,left:0};b.createEmptyImageData=c.createEmptyImageData;b.completeUserSettings=t;b.encode=function(f,w,v){const {ctx:y,canvas:x}=n(f,v);f=y.getImageData(0,0,f.width,f.height);w=p(x,w);x.width=0;x.height=0;return{dataUrl:w,data:f}};b.encodeData=function(f,w){const {ctx:v,canvas:y}=n(f,w);f=v.getImageData(0,0,f.width,f.height);
y.width=0;y.height=0;return f};b.getFormatAndQuality=function(f,w){f=e(f);const v=u[f];w=l.clamp(null!=w?w:v,0,100);return{format:f,quality:w}};b.getMaximumResolutionScale=function(f,w){return w/Math.max(f[0],f[1])};b.resampleHermite=function(f,w,v,y=0,x=0,m=f.width-y,z=f.height-x,B=!1){const {data:A}=f,{width:D,height:F,data:I}=w;m/=D;z/=F;const S=Math.ceil(m/2),T=Math.ceil(z/2);f=f.width;for(let O=0;O<F;O++)for(let W=0;W<D;W++){const C=4*(W+(B?F-O-1:O)*D);let E=0,N=0,X=0,J=0,G=0,M=0;const V=(O+
.5)*z;for(let Z=Math.floor(O*z);Z<(O+1)*z;Z++){var U=Math.abs(V-(Z+.5))/T;const ca=(W+.5)*m;U*=U;for(let ia=Math.floor(W*m);ia<(W+1)*m;ia++){var L=Math.abs(ca-(ia+.5))/S;L=Math.sqrt(U+L*L);if(1<=L)continue;L=2*L*L*L-3*L*L+1;const ea=4*(y+ia+(x+Z)*f);M+=L*A[ea+3];N+=L;!v&&255>A[ea+3]&&(L=L*A[ea+3]/255);X+=L*A[ea];J+=L*A[ea+1];G+=L*A[ea+2];E+=L}}I[C]=X/E;I[C+1]=J/E;I[C+2]=G/E;I[C+3]=M/N}return w};b.screenshotSuperSampleSettings=function(f,w,v){if(!w)return f;const {framebufferWidth:y,framebufferHeight:x,
pixelRatio:m,region:z}=f;w=d(f,v);v=w.left+w.right;const B=w.top+w.bottom,A=y-v,D=x-B,F=Math.min(8,Math.min((2048-v)/A,(2048-B)/D));return 1.5>F?f:{...f,framebufferWidth:Math.round(A*F)+v,framebufferHeight:Math.round(D*F)+B,pixelRatio:m*F,resample:{region:{x:Math.round((z.x-w.left)*F)+w.left,y:Math.round((z.y-w.top)*F)+w.top,width:Math.round(z.width*F),height:Math.round(z.height*F)},width:y,height:x}}};b.toDataUrl=p;b.toRenderSettings=function(f,w){const v=t(f,w),y=v.area,x=v.width/y.width,m=d(v,
w.padding),z=m.left+m.right,B=m.top+m.bottom;return{framebufferWidth:Math.floor((w.width-z)*x+z),framebufferHeight:Math.floor((w.height-B)*x+B),region:{x:Math.floor(y.x*x)+m.left,y:Math.floor(y.y*x)+m.top,width:v.width,height:v.height},format:v.format,quality:v.quality,rotation:v.rotation,pixelRatio:x,layers:f?.layers??[],disableDecorations:v.disableDecorations,ignoreBackground:v.ignoreBackground,ignorePadding:v.ignorePadding,objectAndLayerIdColor:!1}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},
"esri/core/imageUtils":function(){define("require exports ../request ./Error ./promiseUtils ./urlUtils ../support/base64Utils".split(" "),function(b,a,l,c,t,n,p){function g(r,u,h){h||(e||(e=document.createElement("canvas"),e.width=1,e.height=1),h=e);return h.getContext("2d").createImageData(r,u)}async function q(r,u){r=window.URL.createObjectURL(r);try{const {data:h}=await l(r,{...u,responseType:"image"});return h}catch(h){if(!t.isAbortError(h))throw new c("invalid-image",`Could not fetch requested image at ${r}`);
throw h;}finally{window.URL.revokeObjectURL(r)}}async function d(r,u){const h=n.dataComponents(r);if(h?.isBase64)return{arrayBuffer:p.base64ToArrayBuffer(h.data),mediaType:h.mediaType};u=await l(r,{responseType:"array-buffer",...u});r=u.data;u=u.getHeader?.("Content-Type")??"";return{arrayBuffer:r,mediaType:u}}let e=null,k=!0;a.createEmptyImageData=function(r,u,h){if(!r||!u)throw Error("Cannot construct image data without dimensions");if(k)try{return new ImageData(r,u)}catch(f){k=!1}return g(r,u,
h)};a.getImageData=async function(r,u){const {arrayBuffer:h,mediaType:f}=await d(r,u);r="image/png"===f;if("image/gif"===f){const {isAnimatedGIF:w,parseGif:v}=await new Promise((y,x)=>b(["./image/gif"],y,x));if(w(h))return v(h,u)}if(r){const {isAnimatedPNG:w,parseApng:v}=await new Promise((y,x)=>b(["./image/apng"],y,x));if(w(h))return v(h,u)}r=new Blob([h],{type:f});return q(r,u)};a.wrapImageData=function(r,u,h,f){if(!u||!h)throw Error("Cannot construct image data without dimensions");if(k)try{return new ImageData(r,
u,h)}catch(w){k=!1}u=g(u,h,f);u.data.set(r,0);return u};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/views/2d/support/Timeline":function(){define(["exports"],function(b){class a{constructor(){this._names=new Map}begin(l){this._names.has(l)||(this._names.set(l,!1),l.includes("Brush")&&this.record("Esri.FirstDraw"),performance.mark(`Esri.${l}.Start`))}end(l){this._names.has(l)&&!this._names.get(l)&&(this._names.set(l,!0),performance.mark(`Esri.${l}.End`))}record(l){this._names.has(l)||
(this._names.set(l,!0),performance.mark(`Esri.${l}`))}}b.Timeline=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/support/WebGLRequirements":function(){define(["exports","../../core/Error","../webgl/capabilities"],function(b,a,l){b.check=function(c){const t=l.getWebGLCapabilities();return t.available?"3d"===c&&t.majorPerformanceCaveat?new a("webgl:major-performance-caveat-detected",`Your WebGL implementation (${t.unmaskedRenderer}) doesn't seem to support hardware accelerated rendering. Check your browser settings or if your GPU is in a blocklist.`):
t.supportsHighPrecisionFragment?t.supportsVertexShaderSamplers?null:new a("webgl:vertex-shader-samplers-required","WebGL support for vertex shader samplers is required but not supported."):new a("webgl:high-precision-fragment-required","WebGL support for high precision fragment shaders is required but not supported."):new a("webgl:required","WebGL2 is required but not supported.",Error().stack)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/capabilities":function(){define(["exports",
"./capabilities/DebugRendererInfo"],function(b,a){function l(n){if("undefined"===typeof WebGL2RenderingContext)return null;var p=document.createElement("canvas");if(!p)return null;let g=p.getContext("webgl2",{failIfMajorPerformanceCaveat:!0});null==g&&(g=p.getContext("webgl2"),null!=g&&(n.majorPerformanceCaveat=!0));if(null==g)return g;n.available=!0;n.maxTextureSize=g.getParameter(g.MAX_TEXTURE_SIZE);n.supportsVertexShaderSamplers=0<g.getParameter(g.MAX_VERTEX_TEXTURE_IMAGE_UNITS);if(p=g.getShaderPrecisionFormat(g.FRAGMENT_SHADER,
g.HIGH_FLOAT))n.supportsHighPrecisionFragment=0<p.precision;return g}let c;class t{constructor(){this.majorPerformanceCaveat=this.available=!1;this.maxTextureSize=0;this.supportsColorBufferHalfFloat=this.supportsColorBufferFloatBlend=this.supportsColorBufferFloat=this.supportsHighPrecisionFragment=this.supportsVertexShaderSamplers=!1;this.unmaskedRenderer="unloaded"}}b.getWebGLCapabilities=function(){if(null==c){{const n=new t,p=l(n);null!=p&&(n.supportsColorBufferFloat=null!==p.getExtension("EXT_color_buffer_float"),
n.supportsColorBufferFloatBlend=null!==p.getExtension("EXT_float_blend"),n.supportsColorBufferHalfFloat=n.supportsColorBufferFloat||null!==p.getExtension("EXT_color_buffer_half_float"),n.unmaskedRenderer=a.loadDebugRendererInfo(p,{debugRendererInfo:!0})?.getUnmaskedRendererWebGL()??"unknown");c=n}}return c};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/webgl/capabilities/DebugRendererInfo":function(){define(["exports"],function(b){b.loadDebugRendererInfo=function(a,l){const c=
l.debugRendererInfo&&a.getExtension("WEBGL_debug_renderer_info");return c?{getUnmaskedRendererWebGL:()=>a.getParameter(c.UNMASKED_RENDERER_WEBGL)}:null};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/views/ui/DefaultUI":function(){define("../../chunks/tslib.es6 ../../core/has ../../core/Logger ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./Component ./UI ../../widgets/Attribution ../../widgets/Compass ../../widgets/NavigationToggle ../../widgets/Zoom".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r){a=class extends q{constructor(u){super(u);this._defaultPositionLookup={attribution:"manual",compass:"top-left","navigation-toggle":"top-left",zoom:"top-left"};this.components=[];this._updateViewAwareWidgets=h=>{this.components.forEach(f=>{f=this._find(f)?.widget;void 0!==f?.view&&(f.view=h)})};this._componentsWatcher=(h,f)=>{this._removeComponents(f);this._addComponents(h);this._adjustPadding(h)}}initialize(){this.addHandles([c.watch(()=>this.components,this._componentsWatcher,
c.initial),c.watch(()=>this.view,this._updateViewAwareWidgets,c.initial)])}_add(u,h,f,w,v){let y=u;if("string"===typeof u&&this._defaultPositionLookup[u]){if(this._find(u))return;y=this._createComponent(u)}super._add(y,h,f,w,v)}_removeComponents(u){u.forEach(h=>{if(h=this._find(h))this.remove(h),h.destroy()})}_adjustPadding(u){u.includes("attribution")||this._isOverridden("padding")||({top:u}=this.padding,this.padding=u)}_addComponents(u){this.constructed&&u.forEach(h=>this.add(this._createComponent(h),
this._defaultPositionLookup[h]))}_createComponent(u){const h=this._createWidget(u);return new g({id:u,node:h})}_createWidget(u){const h=this.view;switch(u){case "attribution":return new d({view:h});case "compass":return new e({view:h});case "navigation-toggle":return new k({view:h});case "zoom":return new r({view:h})}}};b.__decorate([t.property()],a.prototype,"components",void 0);return a=b.__decorate([p.subclass("esri.views.ui.DefaultUI")],a)})},"esri/views/ui/Component":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/domUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,l,c,t,n,p,g){a=class extends a{constructor(){super(...arguments);this.widget=null}destroy(){this.node=null;this.widget?.destroy()}get id(){return this._get("id")??this.widget?.id??this.node?.id}set id(q){this._set("id",q)}set node(q){const d=this._get("node");q!==d&&(q&&q.classList.add("esri-component"),d&&d.classList.remove("esri-component"),this._set("node",q))}castNode(q){this.widget?.destroy();if(!q)return this._set("widget",null),null;if("string"===typeof q||q&&"nodeType"in q)return this._set("widget",
null),l.byId(q);q&&"function"===typeof q.render&&!q.domNode&&(q.domNode=document.createElement("div"));this._set("widget",q);return q.domNode}};b.__decorate([c.property()],a.prototype,"id",null);b.__decorate([c.property()],a.prototype,"node",null);b.__decorate([t.cast("node")],a.prototype,"castNode",null);b.__decorate([c.property({readOnly:!0})],a.prototype,"widget",void 0);return a=b.__decorate([g.subclass("esri.views.ui.Component")],a)})},"esri/views/ui/UI":function(){define("../../chunks/tslib.es6 ../../intl ../../core/Accessor ../../core/arrayUtils ../../core/Evented ../../core/handleUtils ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/accessorSupport/decorators/cast ../../core/has ../../core/accessorSupport/decorators/subclass ../../support/themeUtils ./Component ../../widgets/support/widgetUtils ../../intl/locale".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u,h){function f(m){return 0===m?"0":`${m}px`}function w(m){const z="object"===typeof m&&null!==m&&Object.getPrototypeOf(m);return null!==z&&z!==Object.prototype||!("component"in m||"index"in m||"position"in m)?null:m}function v(m,{top:z,bottom:B,left:A,right:D}){m.style.top=z;m.style.bottom=B;m.style.left=A;m.style.right=D}const y={left:0,top:0,bottom:0,right:0},x={bottom:30,top:15,right:15,left:15};a=class extends t.EventedAccessor{constructor(m){super(m);this._cornerNameToContainerLookup=
{};this._positionNameToContainerLookup={};this._components=[];this._componentMap=new Map;this._removeWidgetHandleKey=Symbol("componentOnRemoveSymbol");this._locale=h.getLocale();this.view=null;this._applyViewPadding=()=>{const z=this.container;z&&v(z,this._toPixelPosition(this._getViewPadding()))};this._applyUIPadding=()=>{const z=this._innerContainer;z&&v(z,this._toPixelPosition(this.padding))};this._initContainers()}initialize(){this.addHandles([p.watch(()=>[this.view?.padding,this.container],this._applyViewPadding,
p.initial),p.watch(()=>this.padding,this._applyUIPadding,p.initial),p.watch(()=>[this.container,this._locale],([m,z])=>{m&&m.setAttribute("lang",z)},p.initial),h.onLocaleChange(m=>{this._locale=m})])}destroy(){this.container=null;for(const m of this._components)m.destroy();this._components.length=0;this._componentMap.clear()}set container(m){const z=this._get("container");m!==z&&(m&&(m.classList.add("esri-ui"),k.setCalciteThemeClass(m),this._attachContainers(m)),z&&(z.classList.remove("esri-ui"),
v(z,{top:"",bottom:"",left:"",right:""}),z.textContent=""),this._set("container",m))}get height(){const m=this.view?.height??0;if(0===m)return m;const z=this._getViewPadding(),{top:B,bottom:A}=z;return Math.max(m-B-A,0)}get padding(){return this._get("padding")}set padding(m){this._overrideIfSome("padding",m)}castPadding(m){return"number"===typeof m?{bottom:m,top:m,right:m,left:m}:{...x,...m}}get width(){const m=this.view?.width??0;if(0===m)return m;const z=this._getViewPadding(),{left:B,right:A}=
z;return Math.max(m-B-A,0)}add(m,z){let B,A,D;if(Array.isArray(m))m.forEach(I=>this.add(I,z));else{var F=w(m);F&&({index:B,position:z,component:m,key:A}=F);z&&"object"===typeof z&&({index:B,key:A,position:z,internal:D}=z);!m||z&&!this._isValidPosition(z)||this._add(m,z,B,A,D)}}remove(m,z){if(m){if(Array.isArray(m))return m.map(A=>this.remove(A,z));if((m=this._find(m))&&(!this._componentMap.has(m)||this._componentMap.get(m)?.key===z)){var B=this._components.indexOf(m);m.node.parentNode?.removeChild(m.node);
this._componentMap.delete(m);m.widget?.removeHandlesReference(this._removeWidgetHandleKey);return this._components.splice(B,1)[0]}}}empty(m,z={removeInternal:!1}){if(Array.isArray(m))for(const B of m)this.empty(B,z);else{m=Array.prototype.slice.call(this._positionNameToContainerLookup[m??"manual"].children).map(B=>this._findByNode(B)).filter(B=>null==B?!1:!(this._componentMap.get(B)?.internal??!1)||z.removeInternal);for(const B of m)this.remove(B)}}move(m,z){Array.isArray(m)&&m.forEach(D=>this.move(D,
z));if(m){var B=w(m)||w(z);if(B){var A=B.index;z=B.position;m=B.component||m}(!z||this._isValidPosition(z))&&(m=this.remove(m))&&this.add(m,{position:z,index:A})}}find(m){return m?(m=this._findById(m))&&(m.widget||m.node):null}getComponents(m,z={includeInternal:!1}){return m?Array.isArray(m)?m.flatMap(B=>this._getComponentsAtPosition(B,z)):this._getComponentsAtPosition(m,z):this._components.filter(B=>z.includeInternal||!(this._componentMap.get(B)?.internal??!1)).map(({widget:B,node:A})=>B??A)}getPosition(m){for(const z in this._positionNameToContainerLookup)if(this._positionNameToContainerLookup[z].contains(m))return z;
return null}_add(m,z,B,A,D){m instanceof r||(m=new r({node:m}));const {widget:F}=m;null!=F&&F instanceof l&&F.addHandles(n.makeHandle(()=>{queueMicrotask(()=>this.remove(m))}),this._removeWidgetHandleKey);this._place({component:m,position:z,index:B});this._components.push(m);this._componentMap.set(m,{key:A,internal:D})}_find(m){return m?m instanceof r?this._findByComponent(m):"string"===typeof m?this._findById(m):this._findByNode(m.domNode||m):null}_getViewPadding(){return this.view?.padding??y}_attachContainers(m){m.appendChild(this._innerContainer);
m.appendChild(this._manualContainer)}_initContainers(){var m=document.createElement("div");m.classList.add("esri-ui-inner-container","esri-ui-corner-container");const z=document.createElement("div");z.classList.add("esri-ui-inner-container","esri-ui-manual-container");const B=document.createElement("div");B.classList.add("esri-ui-top-left","esri-ui-corner");m.appendChild(B);const A=document.createElement("div");A.classList.add("esri-ui-top-right","esri-ui-corner");m.appendChild(A);const D=document.createElement("div");
D.classList.add("esri-ui-bottom-left","esri-ui-corner");m.appendChild(D);const F=document.createElement("div");F.classList.add("esri-ui-bottom-right","esri-ui-corner");m.appendChild(F);this._innerContainer=m;this._manualContainer=z;m=u.isRTL();this._cornerNameToContainerLookup={"top-left":B,"top-right":A,"bottom-left":D,"bottom-right":F,"top-leading":m?A:B,"top-trailing":m?B:A,"bottom-leading":m?F:D,"bottom-trailing":m?D:F};this._positionNameToContainerLookup={manual:z,...this._cornerNameToContainerLookup}}_isValidPosition(m){return!!this._positionNameToContainerLookup[m]}_place(m){var z=
m.position??"manual";const {component:B,index:A}=m;m=this._positionNameToContainerLookup[z];z=null!=A&&-1<A;var D=B.widget;D&&!D._started&&"function"===typeof D.postMixInProperties&&"function"===typeof D.buildRendering&&"function"===typeof D.postCreate&&"function"===typeof D.startup&&B.widget.startup();z?(z=Array.from(m.children),0===A?({firstChild:z}=m,z?z.parentNode?.insertBefore(B.node,z):m.appendChild(B.node)):A>=z.length?m.appendChild(B.node):(m=z[A],m.parentNode?.insertBefore(B.node,m))):m.appendChild(B.node)}_toPixelPosition(m){return{top:f(m.top),
left:f(m.left),right:f(m.right),bottom:f(m.bottom)}}_findByComponent(m){return this._components.find(z=>z===m)??null}_findById(m){return this._components.find(({id:z})=>z===m)??null}_findByNode(m){return this._components.find(({node:z})=>z===m)??null}_getComponentsAtPosition(m,z){return Array.prototype.slice.call(this._positionNameToContainerLookup[m].children).map(B=>this._findByNode(B)).filter(c.isSome).filter(B=>z.includeInternal||!(this._componentMap.get(B)?.internal??!1)).map(({widget:B,node:A})=>
B??A)}};b.__decorate([g.property()],a.prototype,"_locale",void 0);b.__decorate([g.property()],a.prototype,"container",null);b.__decorate([g.property()],a.prototype,"height",null);b.__decorate([g.property({value:x})],a.prototype,"padding",null);b.__decorate([q.cast("padding")],a.prototype,"castPadding",null);b.__decorate([g.property()],a.prototype,"view",void 0);b.__decorate([g.property()],a.prototype,"width",null);return a=b.__decorate([e.subclass("esri.views.ui.UI")],a)})},"esri/widgets/Attribution":function(){define("../chunks/tslib.es6 ../core/reactiveUtils ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ./Attribution/AttributionViewModel ./support/globalCss ./support/decorators/accessibleHandler ./support/decorators/messageBundle ./support/jsxFactory ./support/widgetUtils".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u){c=class extends g{constructor(h,f){super(h,f);this._attributionTextOverflowed=this._isOpen=!1;this._prevSourceNodeHeight=0;this._resizeObserver=new ResizeObserver(w=>w.forEach(({target:v})=>this._checkSourceTextOverflow(v)));this.itemDelimiter=" | ";this.messages=null;this.viewModel=new q}initialize(){this.addHandles(a.on(()=>this.viewModel?.items,"change",()=>this.scheduleRender()))}destroy(){this._resizeObserver?.disconnect()}get _isInteractive(){return this._isOpen||
this._attributionTextOverflowed}get attributionText(){return this.viewModel.items.reduce((h,f)=>{h.includes(f.text)||h.push(f.text);return h},[]).join(this.itemDelimiter)}get icon(){return"description"}set icon(h){this._overrideIfSome("icon",h)}get label(){return this.messages?.widgetLabel??""}set label(h){this._overrideIfSome("label",h)}get view(){return this.viewModel.view}set view(h){this.viewModel.view=h}render(){return r.tsx("div",{bind:this,class:this.classes("esri-attribution",d.globalCss.widget,
{["esri-attribution--open"]:this._isOpen}),dir:"ltr",onclick:this._toggleState,onkeydown:this._toggleState},this._renderSourcesNode(),this._renderPoweredBy())}_renderPoweredBy(){return r.tsx("div",{class:"esri-attribution__powered-by"},"Powered by"," ",r.tsx("a",{class:"esri-attribution__link",href:"https://www.esri.com/",rel:"noreferrer",target:"_blank"},"Esri"))}_renderSourcesNode(){const h=this._isOpen,f=this._isInteractive,w=f?0:void 0,{attributionText:v}=this;return r.tsx("div",{afterCreate:this._afterSourcesNodeCreate,
bind:this,class:this.classes("esri-attribution__sources",{["esri-attribution__sources--open"]:h,[d.globalCss.interactive]:f}),innerHTML:v,tabIndex:w})}_afterSourcesNodeCreate(h){this._prevSourceNodeHeight=h.clientWidth;this._resizeObserver.observe(h)}_checkSourceTextOverflow(h){let f=!1;const {clientHeight:w,clientWidth:v,scrollWidth:y}=h;h=y>v;const x=this._attributionTextOverflowed!==h;this._attributionTextOverflowed=h;x&&(f=!0);this._isOpen&&(h=w<this._prevSourceNodeHeight,this._prevSourceNodeHeight=
w,h&&(this._isOpen=!1,f=!0));f&&this.scheduleRender()}_toggleState(){this._isInteractive&&(this._isOpen=!this._isOpen)}};b.__decorate([l.property()],c.prototype,"_isOpen",void 0);b.__decorate([l.property()],c.prototype,"_isInteractive",null);b.__decorate([l.property()],c.prototype,"_attributionTextOverflowed",void 0);b.__decorate([l.property()],c.prototype,"_prevSourceNodeHeight",void 0);b.__decorate([l.property({readOnly:!0,dependsOn:["viewModel.items.length","itemDelimiter"]})],c.prototype,"attributionText",
null);b.__decorate([l.property()],c.prototype,"icon",null);b.__decorate([l.property()],c.prototype,"itemDelimiter",void 0);b.__decorate([l.property()],c.prototype,"label",null);b.__decorate([l.property(),k.messageBundle("esri/widgets/Attribution/t9n/Attribution")],c.prototype,"messages",void 0);b.__decorate([l.property()],c.prototype,"view",null);b.__decorate([l.property({type:q})],c.prototype,"viewModel",void 0);b.__decorate([e.accessibleHandler()],c.prototype,"_toggleState",null);return c=b.__decorate([p.subclass("esri.widgets.Attribution")],
c)})},"esri/widgets/Attribution/AttributionViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/asyncUtils ../../core/Collection ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/Extent ../../geometry/SpatialReference ../../geometry/support/contains ../../geometry/support/webMercatorUtils ../../views/3d/layers/Lyr3DWasm".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u,h){function f(x,m){return x&&"copyright"in x&&(!m||"function"===typeof x.originOf&&"user"===x.originOf("copyright"))}function w(x,m){return x.length!==m.length||x.some((z,B)=>z.text!==m[B].text)}function v(x,m,z){z&&m&&(x.find(B=>B.layerView===m&&B.text===z)||x.push({text:z,layerView:m}))}const y=[];a=class extends a{constructor(x){super(x);this._clear=()=>{this._fetchedAttributionData.clear();this._pendingAttributions.clear();this.removeHandles("suspension");
this.notifyChange("state")};this._pendingAttributions=new Set;this._fetchedAttributionData=new Map;this.items=new c;this.view=null;this._allLayerViewsChange=m=>{this.removeHandles("suspension");this.removeHandles("visible-geometry-changed");const z=this.view?.allLayerViews;z&&(this.addHandles(z.map(B=>t.watch(()=>[B.suspended,B.layer?.attributionVisible],()=>this._updateAttributionItems())).toArray(),"suspension"),z.forEach(B=>{"esri.views.3d.layers.Tiles3DLayerView3D"===B.declaredClass&&this.addHandles(B.on("visible-geometry-changed",
()=>this._updateAttributionItems()),"visible-geometry-changed")}));m?.removed&&m.removed.forEach(B=>{this._pendingAttributions.delete(B);this._fetchedAttributionData.delete(B)});this._updateAttributionItems()};this.addHandles([t.on(()=>this.view?.allLayerViews,"change",m=>this._allLayerViewsChange(m),{onListenerAdd:()=>this._allLayerViewsChange(),onListenerRemove:this._clear}),t.when(()=>!0===this.view?.stationary,()=>this._updateAttributionItems())])}destroy(){this.view=null;this._fetchedAttributionData.clear();
this._pendingAttributions.clear();this.items.removeAll()}get state(){return this.view?.ready?0<this._pendingAttributions.size?"loading":"ready":"disabled"}_updateAttributionItems(){const x=this.view;var m=x?.allLayerViews;y.length=0;if(x&&m){m.forEach(B=>{if(!B.suspended&&B.layer?.attributionVisible){var A=B.layer;if(f(A,"user"))v(y,B,A.copyright);else if(A.hasAttributionData)if(this._fetchedAttributionData.has(B)){var D=this._fetchedAttributionData.get(B);D?v(y,B,this._getDynamicAttribution(D,x,
A)):f(A)&&v(y,B,A.copyright)}else this._fetchAttributionData(B);else(D="portalItem"in A?A.portalItem?.accessInformation:void 0)?v(y,B,D):v(y,B,A.copyright)}});m=m.find(B=>"integrated-mesh-3dtiles"===B.layer?.type);if(this.view&&m){var z=h.getLyr3DWasm(this.view);if(z){z=z.getAttributionText();for(let B=0;B<z.length;++B)v(y,m,z[B])}}w(this.items,y)&&(this.items.removeAll(),this.items.addMany(y));y.length=0;this.notifyChange("state")}else this._clear()}async _fetchAttributionData(x){if(!this._pendingAttributions.has(x)){this._pendingAttributions.add(x);
var m=await l.result(x.layer.fetchAttributionData());this._pendingAttributions.has(x)&&(m=m.ok?this._createContributionIndex(m.value,"bing-maps"===x.layer.type):null,this._pendingAttributions.delete(x),this._fetchedAttributionData.set(x,m));this._updateAttributionItems()}}_createContributionIndex(x,m){x=x.contributors;const z={};if(!x)return z;for(let F=0;F<x.length;F++){const I=x[F];var B=I.coverageAreas;if(!B)return;for(const S of B){var A=S.bbox,D=S.zoomMin-(m&&S.zoomMin?1:0);B=S.zoomMax-(m&&S.zoomMax?
1:0);A=new e({xmin:A[1],ymin:A[0],xmax:A[3],ymax:A[2],spatialReference:k.WGS84});for(A={extent:u.geographicToWebMercator(A),attribution:I.attribution||"",score:null!=S.score?S.score:100,id:F};D<=B;D++){let T,U;(T=z)[U=D]??(T[U]=[]);z[D].push(A)}}}z.maxKey=Math.max.apply(null,Object.keys(z));return z}_getDynamicAttribution(x,m,z){const {extent:B,scale:A}=m;m=z.tileInfo?.scaleToZoom(A)??0;m=Math.min(x.maxKey??0,Math.round(m));if(!B||null==m||-1>=m)return"";x=x[m];const D=u.project(B.center.clone().normalize(),
k.WebMercator),F=new Set;return x?x.filter(I=>{const S=I.id;(I=!F.has(S)&&D&&I.extent&&r.extentContainsPoint(I.extent,D))&&F.add(S);return I}).sort((I,S)=>S.score-I.score||I.objectId-S.objectId).map(I=>I.attribution).join(", "):""}};b.__decorate([n.property({readOnly:!0,type:c})],a.prototype,"items",void 0);b.__decorate([n.property({readOnly:!0})],a.prototype,"state",null);b.__decorate([n.property()],a.prototype,"view",void 0);return a=b.__decorate([d.subclass("esri.widgets.Attribution.AttributionViewModel")],
a)})},"esri/views/3d/layers/Lyr3DWasm":function(){define(["require","exports"],function(b,a){let l,c=null;const t=new Map;a.addLayerViewToWasm=async function(n){null==c&&(null==l&&(l=new Promise((q,d)=>b(["../../../layers/Lyr3DWasmPerSceneView"],e=>q(Object.freeze(Object.defineProperty({__proto__:null,default:e},Symbol.toStringTag,{value:"Module"}))),d))),c=await l);const p=n.view;let g=t.get(p);g||(g=new c.default({view:p}),t.set(p,g));await g.initializeWasm(!!p._stage.renderView.renderingContext.capabilities.compressedTextureS3TC,
!!p._stage.renderView.renderingContext.capabilities.compressedTextureETC);return g.add3DTilesLayerView(n)};a.getLyr3DWasm=function(n){return t.get(n)};a.removeLayerViewFromWasm=function(n){const p=n.view,g=t.get(p);g&&1>g.remove3DTilesLayerView(n)&&(t.delete(p),0===t.size&&(c=l=null))};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/globalCss":function(){define(["exports"],function(b){b.globalCss={anchor:"esri-widget__anchor",anchorDisabled:"esri-widget__anchor--disabled",
button:"esri-button",buttonDisabled:"esri-button--disabled",buttonHalf:"esri-button--half",buttonSecondary:"esri-button--secondary",buttonSmall:"esri-button--small",buttonTertiary:"esri-button--tertiary",buttonThird:"esri-button--third",disabled:"esri-disabled",empty:"esri-widget__content--empty",emptyIllustration:"esri-widget__content-illustration--empty",heading:"esri-widget__heading",hidden:"esri-hidden",input:"esri-input",interactive:"esri-interactive",loader:"esri-widget__loader",loaderAnimation:"esri-widget__loader-animation",
loaderText:"esri-widget__loader-text",menu:"esri-menu",menuHeader:"esri-menu__header",menuItem:"esri-menu__list-item",menuItemActive:"esri-menu__list-item--active",menuItemFocus:"esri-menu__list-item--focus",menuList:"esri-menu__list",panel:"esri-widget--panel",panelHeightOnly:"esri-widget--panel-height-only",primaryTick:"primary-tick",primaryTickAmPm:"primary-tick__ampm",primaryTickLabel:"primary-tick__label",rotating:"esri-rotating",secondaryTick:"secondary-tick",select:"esri-select",table:"esri-widget__table",
widget:"esri-widget",widgetButton:"esri-widget--button",widgetButtonActive:"esri-widget--button-active",widgetDisabled:"esri-widget--disabled"};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Compass":function(){define("require ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ./Compass/CompassViewModel ./Compass/css ../chunks/componentsUtils ./support/globalCss ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u,h){c=class extends g{constructor(f,w){super(f,w);this.messages=null;this.viewModel=new q;this._reset=()=>{this.viewModel.reset()};this._toRotationTransform=v=>({transform:`rotateZ(${v.z}deg)`})}loadDependencies(){return e.loadCalciteComponents({button:()=>new Promise((f,w)=>b(["../chunks/index2"],f,w)),icon:()=>(new Promise((f,w)=>b(["../chunks/index7"],f,w))).then(f=>f.index)})}get goToOverride(){return this.viewModel.goToOverride}set goToOverride(f){this.viewModel.goToOverride=
f}get icon(){return"rotation"===this.viewModel.state?"arrow-up":"compass-needle"}set icon(f){this._overrideIfSome("icon",f)}get label(){return this.messages?.widgetLabel??""}set label(f){this._overrideIfSome("label",f)}get view(){return this.viewModel.view}set view(f){this.viewModel.view=f}reset(){return this.viewModel.reset()}render(){const {orientation:f,state:w}=this.viewModel,{messages:v}=this;return h.tsx("div",{class:this.classes(d.css.base,k.globalCss.widget)},h.tsx("calcite-button",{class:k.globalCss.widgetButton,
disabled:"disabled"===w,kind:"neutral",label:v.reset,onclick:this._reset,round:!0,scale:"s",title:v.reset},h.tsx("div",{"aria-hidden":"true",class:d.css.iconContainer,title:v.reset},h.tsx("calcite-icon",{icon:this.icon,styles:this._toRotationTransform(f)}))))}};a.__decorate([l.property()],c.prototype,"goToOverride",null);a.__decorate([l.property()],c.prototype,"icon",null);a.__decorate([l.property()],c.prototype,"label",null);a.__decorate([l.property(),u.messageBundle("esri/widgets/Compass/t9n/Compass")],
c.prototype,"messages",void 0);a.__decorate([l.property()],c.prototype,"view",null);a.__decorate([l.property({type:q})],c.prototype,"viewModel",void 0);return c=a.__decorate([p.subclass("esri.widgets.Compass")],c)})},"esri/widgets/Compass/CompassViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../views/2d/navigation/duration ./utils ../support/GoTo".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e){a=class extends e(a){constructor(k){super(k);this.orientation={x:0,y:0,z:0};this.view=null;this._updateForCamera=this._updateForCamera.bind(this);this._updateForRotation=this._updateForRotation.bind(this);this._updateRotationWatcher=this._updateRotationWatcher.bind(this)}initialize(){this._watchForView(l.initial)}destroy(){this.view=null}get canShowNorth(){return d.canShowNorth(this.view)}get state(){return!this.view?.ready||"2d"===this.view.type&&!this.view.constraints.rotationEnabled?
"disabled":this.canShowNorth?"compass":"rotation"}reset(){this.view?.ready&&("2d"===this.view?.type?this.callGoTo({target:{rotation:0},options:{animationMode:"always",duration:q.getGoToDuration()}}):this.callGoTo({target:{heading:0}}))}_updateForRotation(k){null!=k&&this._set("orientation",{z:k})}_updateForCamera(k){k&&this._set("orientation",{x:0,y:0,z:-k.heading})}_updateRotationWatcher(k){this.removeAllHandles();this._watchForView();k&&this.addHandles("2d"===k.type?l.watch(()=>k?.rotation,this._updateForRotation,
l.initial):l.watch(()=>k?.camera,this._updateForCamera,l.initial))}_watchForView(k){this.addHandles(l.watch(()=>this.view,this._updateRotationWatcher,k))}};b.__decorate([c.property({readOnly:!0})],a.prototype,"canShowNorth",null);b.__decorate([c.property({readOnly:!0})],a.prototype,"orientation",void 0);b.__decorate([c.property({readOnly:!0})],a.prototype,"state",null);b.__decorate([c.property()],a.prototype,"view",void 0);return a=b.__decorate([g.subclass("esri.widgets.Compass.CompassViewModel")],
a)})},"esri/views/2d/navigation/duration":function(){define(["exports","../../../core/has","../../../core/time"],function(b,a,l){b.getGoToDuration=function(){const c=a("mapview-essential-goto-duration");return null==c?c:l.Milliseconds(c)};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/Compass/utils":function(){define(["exports"],function(b){b.canShowNorth=function(a){return a?.spatialReference?.isWebMercator||a?.spatialReference?.isGeographic||!1};Object.defineProperty(b,
Symbol.toStringTag,{value:"Module"})})},"esri/widgets/support/GoTo":function(){define("../../chunks/tslib.es6 ../../core/maybe ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,l,c,t,n,p){return g=>{g=class extends g{constructor(...q){super(...q);this.view=this.goToOverride=null}callGoTo(q){const {view:d}=this;a.assertIsSome(d);return this.goToOverride?this.goToOverride(d,q):
d.goTo(q.target,q.options)}};b.__decorate([l.property()],g.prototype,"goToOverride",void 0);b.__decorate([l.property()],g.prototype,"view",void 0);return g=b.__decorate([p.subclass("esri.widgets.support.GoTo")],g)}})},"esri/widgets/Compass/css":function(){define(["exports"],function(b){b.css={base:"esri-compass",iconContainer:"esri-compass__icon-container"};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/NavigationToggle":function(){define("require ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ./NavigationToggle/css ./NavigationToggle/NavigationToggleViewModel ../chunks/componentsUtils ./support/globalCss ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u,h){c=class extends g{constructor(f,w){super(f,w);this.messages=null;this.viewModel=new d;this.toggle=()=>this.viewModel.toggle();this._rotateButton=this._panButton=null;this._toggle=()=>{r.setFocus("pan"===this.viewModel?.navigationMode?this._rotateButton:this._panButton);this.toggle()}}loadDependencies(){return e.loadCalciteComponents({button:()=>new Promise((f,w)=>b(["../chunks/index2"],f,w))})}get icon(){return"move"}set icon(f){this._overrideIfSome("icon",
f)}get label(){return this.messages?.widgetLabel??""}set label(f){this._overrideIfSome("label",f)}set layout(f){"horizontal"!==f&&(f="vertical");this._set("layout",f)}get view(){return this.viewModel.view}set view(f){this.viewModel.view=f}render(){const f="disabled"===this.viewModel?.state,w="pan"===this.viewModel?.navigationMode,v=this.messages.toggle;return h.tsx("div",{class:this.classes(q.css.base,k.globalCss.widget,{[q.css.isLayoutHorizontal]:"horizontal"===this.layout})},h.tsx("calcite-button",
{afterCreate:y=>{this._panButton=y},appearance:w?"outline-fill":"solid",class:k.globalCss.widgetButton,disabled:f,iconStart:"move",kind:"neutral",label:v,onclick:this._toggle,tabIndex:w?void 0:-1,title:v}),h.tsx("calcite-button",{afterCreate:y=>{this._rotateButton=y},appearance:w?"solid":"outline-fill",class:k.globalCss.widgetButton,disabled:f,iconStart:"rotate",kind:"neutral",label:v,onclick:this._toggle,tabIndex:w?-1:void 0,title:v}))}};a.__decorate([l.property()],c.prototype,"icon",null);a.__decorate([l.property()],
c.prototype,"label",null);a.__decorate([l.property({value:"vertical"})],c.prototype,"layout",null);a.__decorate([l.property(),u.messageBundle("esri/widgets/NavigationToggle/t9n/NavigationToggle")],c.prototype,"messages",void 0);a.__decorate([l.property()],c.prototype,"view",null);a.__decorate([l.property({type:d})],c.prototype,"viewModel",void 0);return c=a.__decorate([p.subclass("esri.widgets.NavigationToggle")],c)})},"esri/widgets/NavigationToggle/css":function(){define(["exports"],function(b){b.css=
{base:"esri-navigation-toggle",isLayoutHorizontal:"esri-navigation-toggle--horizontal"};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/widgets/NavigationToggle/NavigationToggleViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/reactiveUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,l,c,t,n,p,g){a=class extends a{constructor(q){super(q);
this._navigationMode="pan";this.view=null}initialize(){this.addHandles(l.when(()=>this.view?.navigation?.actionMap,()=>this._updateNavigationActionMap()))}destroy(){this.view=null}get state(){return this.view?.ready&&"3d"===this.view?.type?"ready":"disabled"}get navigationMode(){return this._navigationMode}set navigationMode(q){this._navigationMode=q;this._updateNavigationActionMap()}toggle(){"disabled"!==this.state&&(this.navigationMode="pan"!==this.navigationMode?"pan":"rotate")}_updateNavigationActionMap(){const q=
this.view?.navigation?.actionMap;if(q){var d="pan"===this._navigationMode;q.dragPrimary=d?"pan":"rotate";q.dragSecondary=d?"rotate":"pan"}}};b.__decorate([c.property({readOnly:!0})],a.prototype,"state",null);b.__decorate([c.property()],a.prototype,"_navigationMode",void 0);b.__decorate([c.property()],a.prototype,"view",void 0);return a=b.__decorate([g.subclass("esri.widgets.NavigationToggle.NavigationToggleViewModel")],a)})},"esri/widgets/Zoom":function(){define("require ../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./Widget ../chunks/componentsUtils ./support/globalCss ./support/widgetUtils ./support/decorators/messageBundle ./support/jsxFactory ./Zoom/ZoomViewModel".split(" "),
function(b,a,l,c,t,n,p,g,q,d,e,k,r,u){c=class extends g{constructor(h,f){super(h,f);this.messages=null;this.viewModel=new u;this.zoomIn=()=>this.viewModel.zoomIn();this.zoomOut=()=>this.viewModel.zoomOut()}loadDependencies(){return q.loadCalciteComponents({button:()=>new Promise((h,f)=>b(["../chunks/index2"],h,f))})}get icon(){return"magnifying-glass-plus"}set icon(h){this._overrideIfSome("icon",h)}get label(){return this.messages?.widgetLabel??""}set label(h){this._overrideIfSome("label",h)}set layout(h){"horizontal"!==
h&&(h="vertical");this._set("layout",h)}set view(h){this.viewModel.view=h}get view(){return this.viewModel.view}render(){const h={["esri-zoom--horizontal"]:"horizontal"===this.layout},{canZoomIn:f,canZoomOut:w}=this.viewModel,{zoomIn:v,zoomOut:y}=this.messages;return r.tsx("div",{class:this.classes("esri-zoom",d.globalCss.widget,h)},r.tsx("calcite-button",{class:d.globalCss.widgetButton,disabled:!f,iconStart:"plus",kind:"neutral",label:v,onclick:this.zoomIn,title:v}),r.tsx("calcite-button",{class:d.globalCss.widgetButton,
disabled:!w,iconStart:"minus",kind:"neutral",label:y,onclick:this.zoomOut,title:y}))}};a.__decorate([l.property()],c.prototype,"icon",null);a.__decorate([l.property()],c.prototype,"label",null);a.__decorate([l.property({value:"vertical"})],c.prototype,"layout",null);a.__decorate([l.property(),k.messageBundle("esri/widgets/Zoom/t9n/Zoom")],c.prototype,"messages",void 0);a.__decorate([l.property()],c.prototype,"view",null);a.__decorate([l.property({type:u})],c.prototype,"viewModel",void 0);return c=
a.__decorate([p.subclass("esri.widgets.Zoom")],c)})},"esri/widgets/Zoom/ZoomViewModel":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./ZoomConditions2D ./ZoomConditions3D".split(" "),function(b,a,l,c,t,n,p,g,q,d){a=class extends a{constructor(e){super(e)}destroy(){this.view=null}get canZoomIn(){return null!=this._zoomConditions&&
this._zoomConditions.canZoomIn}get canZoomOut(){return null!=this._zoomConditions&&this._zoomConditions?.canZoomOut}get state(){return this.view?.ready?"ready":"disabled"}set view(e){e?"2d"===e.type?this._zoomConditions=new q({view:e}):"3d"===e.type&&(this._zoomConditions=new d({view:e})):this._zoomConditions=null;this._set("view",e)}zoomIn(){const e=this.view;this.canZoomIn&&e&&("2d"===e.type?e.mapViewNavigation.zoomIn():l.ignoreAbortErrors(e.goTo({zoomFactor:2})))}zoomOut(){const e=this.view;this.canZoomOut&&
e&&("2d"===e.type?e.mapViewNavigation.zoomOut():l.ignoreAbortErrors(e.goTo({zoomFactor:.5})))}};b.__decorate([c.property()],a.prototype,"_zoomConditions",void 0);b.__decorate([c.property()],a.prototype,"canZoomIn",null);b.__decorate([c.property()],a.prototype,"canZoomOut",null);b.__decorate([c.property({readOnly:!0})],a.prototype,"state",null);b.__decorate([c.property()],a.prototype,"view",null);return a=b.__decorate([g.subclass("esri.widgets.Zoom.ZoomViewModel")],a)})},"esri/widgets/Zoom/ZoomConditions2D":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,l,c,t,n,p){a=class extends a{get canZoomIn(){if(!this.view?.ready)return!1;const g=this.view?.constraints?.effectiveMaxScale;return 0===g||this._scale>g}get canZoomOut(){var {view:g}=this;if(!g?.ready)return!1;g=g.constraints?.effectiveMinScale;return 0===g||this._scale<g}get _scale(){const g=this.view?.animation?.target;return(g&&"then"in g?void 0:g?.scale)??this.view?.scale??0}};b.__decorate([l.property({readOnly:!0})],a.prototype,"canZoomIn",null);b.__decorate([l.property({readOnly:!0})],
a.prototype,"canZoomOut",null);b.__decorate([l.property()],a.prototype,"view",void 0);b.__decorate([l.property()],a.prototype,"_scale",null);return a=b.__decorate([p.subclass("esri.widgets.Zoom.ZoomConditions2D")],a)})},"esri/widgets/Zoom/ZoomConditions3D":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,l,c,t,n,p){a=
class extends a{get canZoomIn(){return!!this.view.ready}get canZoomOut(){return!!this.view.ready}};b.__decorate([l.property({readOnly:!0})],a.prototype,"canZoomIn",null);b.__decorate([l.property({readOnly:!0})],a.prototype,"canZoomOut",null);b.__decorate([l.property()],a.prototype,"view",void 0);return a=b.__decorate([p.subclass("esri.widgets.Zoom.ZoomConditions3D")],a)})},"esri/views/ui/2d/DefaultUI2D":function(){define("../../../chunks/tslib.es6 ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../DefaultUI".split(" "),
function(b,a,l,c,t,n,p){l=class extends p{constructor(g){super(g);this.components=["attribution","zoom"]}};b.__decorate([a.property()],l.prototype,"components",void 0);return l=b.__decorate([n.subclass("esri.views.ui.2d.DefaultUI2D")],l)})},"esri/webmap/utils":function(){define(["exports","./Version"],function(b,a){a=new a.Version(2,33);b.currentVersion=a;b.isWebMap=function(l){return null!=l&&"object"===typeof l&&"declaredClass"in l&&"esri.WebMap"===l.declaredClass};Object.defineProperty(b,Symbol.toStringTag,
{value:"Module"})})},"esri/webmap/Version":function(){define(["exports","../core/Version"],function(b,a){class l extends a.Version{constructor(c,t){super(c,t,"webmap")}}b.Version=l;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,l,c,t,n,p,g){var q;l=q=class extends l{constructor(d){super(d);this.color=new a([0,0,0,1])}clone(){return new q(c.clone({color:this.color}))}};b.__decorate([t.property({type:a,json:{write:!0}})],l.prototype,"color",void 0);return l=q=b.__decorate([g.subclass("esri.webmap.background.ColorBackground")],l)})},"*noref":1}});
define("../chunks/tslib.es6 ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./View2D".split(" "),function(b,a,l,c,t,n,p){l=class extends p{constructor(g){super(g);this.view2dType="map"}};b.__decorate([a.property({readOnly:!0})],l.prototype,"view2dType",void 0);return l=b.__decorate([n.subclass("esri.views.MapView")],l)});