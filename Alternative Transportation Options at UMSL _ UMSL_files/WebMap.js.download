// All material copyright Esri, All Rights Reserved, unless otherwise specified.
// See https://js.arcgis.com/4.32/esri/copyright.txt for details.
//>>built
require({cache:{"esri/WebDocument2D":function(){define("require ./chunks/tslib.es6 ./kernel ./Map ./Viewpoint ./core/arrayUtils ./core/Collection ./core/Error ./core/Loadable ./core/loadAll ./core/Logger ./core/maybe ./core/MultiOriginJSONSupport ./core/Promise ./core/promiseUtils ./core/reactiveUtils ./core/urlUtils ./core/accessorSupport/decorators/property ./core/has ./core/accessorSupport/decorators/reader ./core/accessorSupport/decorators/subclass ./core/accessorSupport/decorators/writer ./core/accessorSupport/read ./geometry/SpatialReference ./portal/PortalItem ./portal/support/portalItemUtils ./support/MapFloorInfo ./time/TimeExtent ./webdoc/interfaces ./webdoc/RangeInfo ./webdoc/Widgets ./webdoc/support/thumbnailUtils ./webdoc/support/webdocLoadUtils ./webdoc/support/writeUtils ./webmap/ApplicationProperties ./webmap/Bookmark ./webmap/InitialViewProperties ./webmap/Version ./webmap/background/ColorBackground".split(" "),
function(b,a,c,e,h,n,z,p,l,q,t,d,r,m,w,y,u,A,H,I,L,g,D,C,f,B,v,F,E,J,M,K,O,P,X,Y,V,Q,R){const T=z.ofType(Y),U=new Map([["image/jpeg","jpeg"],["image/jpg","jpg"],["image/png","png"],["image/gif","gif"]]),Z=B.typeKeyword.JSAPI;e=class extends r.MultiOriginJSONMixin(l.LoadableMixin(m.EsriPromiseMixin(e))){constructor(k){super(k);this._isAuthoringAppVersionSetByUser=this._isAuthoringAppSetByUser=!1;this._updateFromPromise=this._thumbnailFilename=null;this.resourceReferences={portalItem:null,paths:[]};
this.applicationProperties=null;this.bookmarks=new T;this.floorInfo=null;this.initialViewProperties=new V;this.widgets=this.sourceVersion=this.portalItem=null;this._debouncedSaveOperations=w.debounce(async(x,G,N)=>{const {save:S,saveAs:W}=await new Promise((aa,ba)=>b(["./webdoc/support/webdocSaveUtils"],aa,ba));switch(x){case E.SaveOperationType.SAVE:return S(this.context,this,G);case E.SaveOperationType.SAVE_AS:return W(this.context,this,N,G)}});this.authoringApp=this.authoringAppVersion=null;this._isAuthoringAppSetByUser=
this._isAuthoringAppVersionSetByUser=!1}destroy(){this.portalItem=d.destroyMaybe(this.portalItem)}initialize(){this.when().catch(k=>{t.getLogger(this).error("#load()","Failed to load web map",k)});if(this.resourceInfo){let k;try{k=this._validateJSON(this.resourceInfo)}catch(x){this.addResolvingPromise(Promise.reject(x));return}this.read(k)}}set authoringApp(k){this._isAuthoringAppSetByUser=!0;this._set("authoringApp",k)}writeAuthoringApp(k,x){x.authoringApp=k&&this._isAuthoringAppSetByUser?k:Z}set authoringAppVersion(k){this._isAuthoringAppVersionSetByUser=
!0;this._set("authoringAppVersion",k)}writeAuthoringAppVersion(k,x){x.authoringAppVersion=k&&this._isAuthoringAppVersionSetByUser?k:c.version}readInitialViewProperties(k,x){k=new V;x.background&&(k.background=R.fromJSON(x.background));var G=x.initialState?.timeExtent;G&&(k.timeExtent=F.fromArray(G));if(G=x.initialState?.viewpoint)G.rotation&&Q.Version.parse(x.version||"","webmap").lessThan(2,20)&&"ArcGIS Pro"===x.authoringApp&&(G.rotation*=-1),k.viewpoint=h.fromJSON(G);x.mapRangeInfo&&(k.rangeInfo=
J.fromJSON(x.mapRangeInfo));x.spatialReference&&(k.spatialReference=C.fromJSON(x.spatialReference));x.timeZone&&(k.timeZone=x.timeZone);return k}writeInitialViewProperties(k,x,G,N){if(k){k.background?.color&&(x.background=k.background.write({},N));var {timeExtent:S,viewpoint:W}=k;if(W||S)G={},W&&(G.viewpoint=W.write({},N)),S&&(G.timeExtent=S.toArray()),x.initialState=G;k.rangeInfo&&(x.mapRangeInfo=k.rangeInfo.toJSON(N));k.spatialReference&&(x.spatialReference=k.spatialReference.write({},N));x.timeZone=
k.timeZone}}writeLayers(k,x,G,N){x[G]=this._writeLayers(k,N,"operational-layers")}readSourceVersion(k,x){const [G,N]=x.version.split(".");return new Q.Version(parseInt(G,10),parseInt(N,10))}writeSourceVersion(k,x,G){x[G]=`${this.context.currentVersion.major}.${this.context.currentVersion.minor}`}writeTables(k,x,G,N){k=this._writeLayers(k,N,"tables");k.length&&(x[G]=k)}get thumbnailUrl(){return this.portalItem?.thumbnailUrl||null}set thumbnailUrl(k){k?(this._override("thumbnailUrl",k),this._thumbnailFilename=
this._generateCustomThumbnailFilename(k)):this._clearThumbnailOverride()}get updatingFromView(){return!!this._updateFromPromise}load(k){this.addResolvingPromise(O.loadFromSource(this.context,this));return Promise.resolve(this)}loadAll(){return q.loadAll(this,k=>{k(this.ground,this.basemap,this.layers,this.tables)})}read(k,x){x={...x,origin:this.context.origin};const G=this._getAuthoringPropsState();D.readLoadable(this,k,N=>super.read(k,N),x);this._restoreAuthoringPropsFromState(G)}write(k,x){if("loaded"!==
this.loadStatus)throw k=new p("webmap:not-loaded","Web map must be loaded before it can be serialized"),t.getLogger(this).error("#toJSON()","Web map must be loaded before it can be serialized",this.loadError||this.loadStatus),k;this._removeDanglingLayerRefs();x={...x,origin:this.context.origin,restrictedWebMapWriting:!0,webmap:this};return super.write(k,x)}async save(k){return this._debouncedSaveOperations(E.SaveOperationType.SAVE,k)}async saveAs(k,x){return this._debouncedSaveOperations(E.SaveOperationType.SAVE_AS,
x,k)}async updateFrom(k,x){this._updateFromPromise=k=this._updateFromInternal(k,x);await k;k===this._updateFromPromise&&(this._updateFromPromise=null)}getLayerJSONFromResourceInfo(k){const x=this.resourceInfo;return this._collectAllLayersJSON([...(x?.baseMap?.baseMapLayers||[]),...(x?.operationalLayers||[]),...(this.basemap?.resourceInfo?.data?.baseMapLayers||[])]).find(G=>G.id===k.id)}async updateItemThumbnail(){this.thumbnailUrl&&this._isOverridden("thumbnailUrl")&&(await this.portalItem?.updateThumbnail({thumbnail:this.thumbnailUrl,
filename:this._thumbnailFilename}),this._clearThumbnailOverride())}getThumbnailState(){let k=this.thumbnailUrl;k&&=this._isOverridden("thumbnailUrl")?k:u.addQueryParameter(k,"w","8192");return{thumbnailUrl:k,filename:this._thumbnailFilename}}restoreThumbnailFromState(k){this.thumbnailUrl=k.thumbnailUrl;this._thumbnailFilename=k.filename}_collectAllLayersJSON(k){return k.reduce((x,G)=>{x.push(G);"GroupLayer"===G.layerType&&(x=x.concat(this._collectAllLayersJSON(G.layers||[])));return x},[])}_writeLayers(k,
x,G){x={...x,layerContainerType:G};return k.map(N=>P.getLayerJSON(N,"tables"===G?null:this.getLayerJSONFromResourceInfo(N),x)).filter(n.isSome).toArray()}_validateJSON(k){const x=Q.Version.parse(k.version||"","webmap");this.context.currentVersion.validate(x);k.version=`${x.major}.${x.minor}`;return k}_removeDanglingLayerRefs(){var k=this.applicationProperties,x=k?.viewing?.search;const G=N=>this.allLayers.some(S=>S.id===N);x?.layers&&(x.layers=x.layers.filter(N=>G(N.id)));x?.tables&&(x.tables=x.tables.filter(N=>
this.tables.some(S=>S.id===N.id)));k&&(x=k.editing?.locationTracking,x?.info&&!G(x.info.layerId)&&(k.editing=null));(k=("presentation"in this?this.presentation:null)?.slides)&&k.forEach(N=>{N.visibleLayers&&(N.visibleLayers=N.visibleLayers.filter(S=>G(S.id)))})}async _updateFromInternal(k,x){x??={};await y.whenOnce(()=>k.ready);this._updateInitialViewProperties(k,x);if(k.map===this)for(const G of k.allLayerViews)"visible"in G&&"visible"in G.layer&&G._isOverridden("visible")&&(G.layer.visible=G.visible),
"featureEffect"in G&&"featureEffect"in G.layer&&G._isOverridden("featureEffect")&&(G.layer.featureEffect=G.featureEffect);await this._updateThumbnailUrl(k,x)}_updateInitialViewProperties(k,x){x.backgroundExcluded||(this.initialViewProperties.background=k.background?.clone());this.initialViewProperties.spatialReference=k.spatialReference?.clone();this.initialViewProperties.timeZone=k.timeZone;x.viewpointExcluded||(this.initialViewProperties.viewpoint=new h({rotation:k.rotation,scale:x.scalePreserved?
k.scale:null,targetGeometry:this._getViewExtent(k)}));if(!x.widgetsExcluded)for(const G of k.persistableViewModels)G.updateWebDocument(this)}_getViewExtent(k){const x=k.center.clone().normalize();k=k.extent.clone();const G=k.width/2;k.xmin=x.x-G;k.xmax=x.x+G;return k}async _updateThumbnailUrl(k,x){x.thumbnailExcluded||(x=K.getOptimalThumbnailSize(k,x.thumbnailSize),k=await k.takeScreenshot({format:"png",width:x.width,height:x.height}),this._setAutoGeneratedThumbnail(k.dataUrl))}_setAutoGeneratedThumbnail(k){this.thumbnailUrl=
k;this._thumbnailFilename=null}_clearThumbnailOverride(){this._clearOverride("thumbnailUrl");this.clear("thumbnailUrl","user");this._thumbnailFilename=null}_generateCustomThumbnailFilename(k){if(u.isDataProtocol(k)){k=(k=u.dataComponents(k)?.mediaType)&&U.get(k.toLowerCase())||null;const x=`thumbnail${Date.now()}`;return k?`${x}.${k}`:x}return null}_getAuthoringPropsState(){return{authoringApp:this.authoringApp,authoringAppVersion:this.authoringAppVersion,isAuthoringAppSetByUser:this._isAuthoringAppSetByUser,
isAuthoringAppVersionSetByUser:this._isAuthoringAppVersionSetByUser}}_restoreAuthoringPropsFromState(k){k.isAuthoringAppSetByUser?this.authoringApp=k.authoringApp:this._isAuthoringAppSetByUser=!1;k.isAuthoringAppVersionSetByUser?this.authoringAppVersion=k.authoringAppVersion:this._isAuthoringAppVersionSetByUser=!1}};a.__decorate([A.property()],e.prototype,"_updateFromPromise",void 0);a.__decorate([A.property({type:X,json:{write:!0}})],e.prototype,"applicationProperties",void 0);a.__decorate([A.property({type:String,
json:{write:{allowNull:!0,ignoreOrigin:!0}}})],e.prototype,"authoringApp",null);a.__decorate([g.writer("authoringApp")],e.prototype,"writeAuthoringApp",null);a.__decorate([A.property({type:String,json:{write:{allowNull:!0,ignoreOrigin:!0}}})],e.prototype,"authoringAppVersion",null);a.__decorate([g.writer("authoringAppVersion")],e.prototype,"writeAuthoringAppVersion",null);a.__decorate([A.property({type:T,json:{write:{overridePolicy(k){return{enabled:!!(k&&0<k.length),ignoreOrigin:!0}}}}})],e.prototype,
"bookmarks",void 0);a.__decorate([A.property({type:v,json:{name:"mapFloorInfo",write:!0}})],e.prototype,"floorInfo",void 0);a.__decorate([A.property({type:V,nonNullable:!0,json:{read:{source:"background initialState.timeExtent initialState.viewpoint mapRangeInfo spatialReference timeZone".split(" ")},write:{ignoreOrigin:!0,target:{background:{type:R},"initialState.timeExtent":{type:F},"initialState.viewpoint":{type:h},mapRangeInfo:{type:J},spatialReference:{type:C},"timeZone:":{type:String}}}}})],
e.prototype,"initialViewProperties",void 0);a.__decorate([I.reader("initialViewProperties")],e.prototype,"readInitialViewProperties",null);a.__decorate([g.writer("initialViewProperties")],e.prototype,"writeInitialViewProperties",null);a.__decorate([A.property({json:{read:!1,write:{target:"operationalLayers",ignoreOrigin:!0}}})],e.prototype,"layers",void 0);a.__decorate([g.writer("layers")],e.prototype,"writeLayers",null);a.__decorate([A.property({type:f})],e.prototype,"portalItem",void 0);a.__decorate([A.property()],
e.prototype,"resourceInfo",void 0);a.__decorate([A.property({readOnly:!0,type:Q.Version,json:{read:{source:"version"},write:{allowNull:!0,ignoreOrigin:!0,target:"version",isRequired:!0}}})],e.prototype,"sourceVersion",void 0);a.__decorate([I.reader("sourceVersion")],e.prototype,"readSourceVersion",null);a.__decorate([g.writer("sourceVersion")],e.prototype,"writeSourceVersion",null);a.__decorate([A.property({json:{read:!1,write:{ignoreOrigin:!0}}})],e.prototype,"tables",void 0);a.__decorate([g.writer("tables")],
e.prototype,"writeTables",null);a.__decorate([A.property()],e.prototype,"thumbnailUrl",null);a.__decorate([A.property()],e.prototype,"updatingFromView",null);a.__decorate([A.property({type:M,json:{write:!0}})],e.prototype,"widgets",void 0);return e=a.__decorate([L.subclass("esri.WebDocument2D")],e)})},"esri/support/MapFloorInfo":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../layers/support/FacilityLayerInfo ../layers/support/LevelLayerInfo ../layers/support/SiteLayerInfo".split(" "),
function(b,a,c,e,h,n,z,p,l,q){a=class extends a{constructor(t){super(t);this.siteLayer=this.facilityLayer=this.levelLayer=null}};b.__decorate([c.property({type:l,json:{write:{isRequired:!0}}})],a.prototype,"levelLayer",void 0);b.__decorate([c.property({type:p,json:{write:{isRequired:!0}}})],a.prototype,"facilityLayer",void 0);b.__decorate([c.property({type:q,json:{write:!0}})],a.prototype,"siteLayer",void 0);return a=b.__decorate([z.subclass("esri.support.MapFloorInfo")],a)})},"esri/layers/support/FacilityLayerInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,c,e,h,n,z){a=class extends a{constructor(p){super(p);this.sublayerId=this.siteIdField=this.nameField=this.layerId=this.facilityIdField=null}};b.__decorate([c.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"facilityIdField",void 0);b.__decorate([c.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"layerId",void 0);b.__decorate([c.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"nameField",void 0);b.__decorate([c.property({type:String,
json:{write:!0}})],a.prototype,"siteIdField",void 0);b.__decorate([c.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=b.__decorate([z.subclass("esri.layers.support.FacilityLayerInfo")],a)})},"esri/layers/support/LevelLayerInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,c,e,h,n,z){a=class extends a{constructor(p){super(p);this.verticalOrderField=this.sublayerId=this.shortNameField=this.longNameField=this.levelNumberField=this.levelIdField=this.layerId=this.facilityIdField=null}};b.__decorate([c.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"facilityIdField",void 0);b.__decorate([c.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"layerId",void 0);b.__decorate([c.property({type:String,json:{write:{isRequired:!0}}})],
a.prototype,"levelIdField",void 0);b.__decorate([c.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"levelNumberField",void 0);b.__decorate([c.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"longNameField",void 0);b.__decorate([c.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"shortNameField",void 0);b.__decorate([c.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},origins:{"web-scene":{read:!1,write:!1}}}})],
a.prototype,"sublayerId",void 0);b.__decorate([c.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"verticalOrderField",void 0);return a=b.__decorate([z.subclass("esri.layers.support.LevelLayerInfo")],a)})},"esri/layers/support/SiteLayerInfo":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,e,
h,n,z){a=class extends a{constructor(p){super(p);this.sublayerId=this.siteIdField=this.nameField=this.layerId=null}};b.__decorate([c.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"layerId",void 0);b.__decorate([c.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"nameField",void 0);b.__decorate([c.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"siteIdField",void 0);b.__decorate([c.property({type:Number,json:{read:{source:"subLayerId"},write:{target:"subLayerId"},
origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"sublayerId",void 0);return a=b.__decorate([z.subclass("esri.layers.support.SiteLayerInfo")],a)})},"esri/webdoc/RangeInfo":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,e,h,n,z){var p;a=p=class extends a{constructor(l){super(l);this.fullRangeExtent=this.currentRangeExtent=this.activeRange=
null}clone(){return new p(c.clone({activeRange:this.activeRange,currentRangeExtent:this.currentRangeExtent,fullRangeExtent:this.fullRangeExtent}))}};b.__decorate([e.property({type:String,nonNullable:!0,json:{read:{source:"activeRangeName"},write:{target:"activeRangeName",isRequired:!0}}})],a.prototype,"activeRange",void 0);b.__decorate([e.property({type:[Number],json:{write:!0}})],a.prototype,"currentRangeExtent",void 0);b.__decorate([e.property({type:[Number],json:{write:!0}})],a.prototype,"fullRangeExtent",
void 0);return a=p=b.__decorate([z.subclass("esri.webdoc.RangeInfo")],a)})},"esri/webdoc/Widgets":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ./widgets/FloorFilter ./widgets/Range ./widgets/TimeSlider".split(" "),function(b,a,c,e,h,n,z,p,l,q){var t;a=t=class extends a{constructor(d){super(d);this.floorFilter=this.timeSlider=this.range=null}clone(){return new t(c.clone({range:this.range,
timeSlider:this.timeSlider,floorFilter:this.floorFilter}))}};b.__decorate([e.property({type:l,json:{write:!0}})],a.prototype,"range",void 0);b.__decorate([e.property({type:q,json:{write:!0}})],a.prototype,"timeSlider",void 0);b.__decorate([e.property({type:p,json:{write:!0}})],a.prototype,"floorFilter",void 0);return a=t=b.__decorate([z.subclass("esri.webdoc.Widgets")],a)})},"esri/webdoc/widgets/FloorFilter":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,c,e,h,n,z){var p;a=p=class extends a{constructor(l){super(l);this.pinnedLevels=this.minimized=this.longNames=this.enabled=!1;this.level=this.facility=this.site=null}clone(){return new p(c.clone({enabled:this.enabled,longNames:this.longNames,minimized:this.minimized,pinnedLevels:this.pinnedLevels,site:this.site,facility:this.facility,level:this.level}))}};b.__decorate([e.property({type:Boolean,json:{read:{source:"enabled"},write:{target:"enabled"}}})],a.prototype,"enabled",void 0);b.__decorate([e.property({type:Boolean,
json:{read:{source:"longNames"},write:{target:"longNames"}}})],a.prototype,"longNames",void 0);b.__decorate([e.property({type:Boolean,json:{read:{source:"minimized"},write:{target:"minimized"}}})],a.prototype,"minimized",void 0);b.__decorate([e.property({type:Boolean,json:{read:{source:"pinnedLevels"},write:{target:"pinnedLevels"}}})],a.prototype,"pinnedLevels",void 0);b.__decorate([e.property({type:String,json:{read:{source:"site"},write:{target:"site"}}})],a.prototype,"site",void 0);b.__decorate([e.property({type:String,
json:{read:{source:"facility"},write:{target:"facility"}}})],a.prototype,"facility",void 0);b.__decorate([e.property({type:String,json:{read:{source:"level"},write:{target:"level"}}})],a.prototype,"level",void 0);return a=p=b.__decorate([z.subclass("esri.webdoc.widgets.FloorFilter")],a)})},"esri/webdoc/widgets/Range":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/has ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,c,e,h,n,z,p){var l;a=new a.JSONMap({slider:"slider",picker:"picker"});c=l=class extends c{constructor(q){super(q);this.stopInterval=this.numStops=this.interactionMode=null}clone(){return new l({interactionMode:this.interactionMode,numStops:this.numStops,stopInterval:this.stopInterval})}};b.__decorate([e.property({type:a.apiValues,nonNullable:!0,json:{type:a.jsonValues,default:null,read:{reader:a.read},write:{isRequired:!0,writer:a.write}}})],c.prototype,"interactionMode",void 0);b.__decorate([e.property({type:h.Integer,
json:{read:{source:"numberOfStops"},write:{target:"numberOfStops",overridePolicy(){const q=null!=this.stopInterval;return{enabled:!q,isRequired:!q}}}}})],c.prototype,"numStops",void 0);b.__decorate([e.property({type:Number,json:{write:{overridePolicy(){return{isRequired:null==this.numStops}}}}})],c.prototype,"stopInterval",void 0);return c=l=b.__decorate([p.subclass("esri.webdoc.widgets.Range")],c)})},"esri/webdoc/widgets/TimeSlider":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/object ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../portal/timeUnitKebabDictionary ../../time/TimeExtent ../../time/TimeInterval".split(" "),
function(b,a,c,e,h,n,z,p,l,q,t,d){var r;a=r=class extends a{constructor(m){super(m);this.fullTimeExtent=this.currentTimeExtent=null;this.loop=!1;this.stops=this.stopInterval=this.stopDelay=this.numThumbs=this.numStops=null}readCurrentTimeExtent(m){return m?t.fromArray(m):void 0}writeCurrentTimeExtent(m,w,y){m&&e.setDeepValue(y,m.toArray(),w)}readFullTimeExtent(m,w){if(m=w.properties)return new t({start:null!=m.startTime?new Date(m.startTime):null,end:null!=m.endTime?new Date(m.endTime):null})}writeFullTimeExtent(m,
w){if(m){w=w.properties=w.properties||{};var y=m.end;m=m.start;y&&(w.endTime=null!=y?y.getTime():null);m&&(w.startTime=null!=m?m.getTime():null)}}readStopInterval(m,w,y){return m?d.fromJSON({value:m.interval,unit:m.units},y):null}writeStopInterval(m,w,y,u){m&&(m=m.toJSON(u),e.setDeepValue("properties.timeStopInterval",{interval:m.value,units:m.unit},w))}readStops(m){return m?.length?m.map(w=>new Date(w)):null}writeStops(m,w,y){m?.length&&e.setDeepValue(y,m.map(u=>u.getTime()),w)}clone(){return new r(c.clone({currentTimeExtent:this.currentTimeExtent,
fullTimeExtent:this.fullTimeExtent,loop:this.loop,numStops:this.numStops,numThumbs:this.numThumbs,stopDelay:this.stopDelay,stopInterval:this.stopInterval,stops:this.stops}))}};b.__decorate([h.property({type:t,json:{type:[[n.Integer,n.Null]],read:{source:"properties.currentTimeExtent"},write:{target:"properties.currentTimeExtent"}}})],a.prototype,"currentTimeExtent",void 0);b.__decorate([z.reader("currentTimeExtent")],a.prototype,"readCurrentTimeExtent",null);b.__decorate([l.writer("currentTimeExtent")],
a.prototype,"writeCurrentTimeExtent",null);b.__decorate([h.property({type:t,json:{read:{source:["properties.endTime","properties.startTime"]},write:{target:{"properties.endTime":{type:Number},"properties.startTime":{type:Number}}}}})],a.prototype,"fullTimeExtent",void 0);b.__decorate([z.reader("fullTimeExtent")],a.prototype,"readFullTimeExtent",null);b.__decorate([l.writer("fullTimeExtent")],a.prototype,"writeFullTimeExtent",null);b.__decorate([h.property({type:Boolean,nonNullable:!0,json:{default:!1,
read:{source:"properties.loop"},write:{target:"properties.loop"}}})],a.prototype,"loop",void 0);b.__decorate([h.property({type:n.Integer,json:{read:{source:"properties.numberOfStops"},write:{target:"properties.numberOfStops",overridePolicy(){var m=!!this.stops?.length;m=!(this.stopInterval||m);return{enabled:m,isRequired:m}}}}})],a.prototype,"numStops",void 0);b.__decorate([h.property({type:[1,2],nonNullable:!0,json:{type:n.Integer,read:{source:"properties.thumbCount"},write:{target:"properties.thumbCount",
isRequired:!0}}})],a.prototype,"numThumbs",void 0);b.__decorate([h.property({type:Number,nonNullable:!0,json:{read:{source:"properties.thumbMovingRate"},write:{target:"properties.thumbMovingRate",isRequired:!0}}})],a.prototype,"stopDelay",void 0);b.__decorate([h.property({type:d,json:{read:{source:"properties.timeStopInterval"},write:{target:{"properties.timeStopInterval.interval":{type:Number},"properties.timeStopInterval.units":{type:q.timeUnitKebabDictionary.jsonValues.filter(m=>"esriTimeUnitsUnknown"!==
m)}},overridePolicy(){const m=!!this.stops?.length;return{enabled:!m,isRequired:!(null!=this.numStops||m)}}}}})],a.prototype,"stopInterval",void 0);b.__decorate([z.reader("stopInterval")],a.prototype,"readStopInterval",null);b.__decorate([l.writer("stopInterval")],a.prototype,"writeStopInterval",null);b.__decorate([h.property({type:[Date],json:{type:[n.Integer],read:{source:"properties.stops"},write:{target:"properties.stops",overridePolicy(){return{isRequired:null==this.numStops&&!this.stopInterval}}}}})],
a.prototype,"stops",void 0);b.__decorate([z.reader("stops")],a.prototype,"readStops",null);b.__decorate([l.writer("stops")],a.prototype,"writeStops",null);return a=r=b.__decorate([p.subclass("esri.webdoc.widgets.TimeSlider")],a)})},"esri/webdoc/support/thumbnailUtils":function(){define(["exports"],function(b){const a={width:600,height:400};b.getOptimalThumbnailSize=function(c,e){e=e||a;let {width:h,height:n}=e;e=h/n;1.5>e?n=h/1.5:1.5<e&&(h=1.5*n);h>c.width&&(n*=c.width/h,h=c.width);n>c.height&&(h*=
c.height/n,n=c.height);return{width:Math.round(h),height:Math.round(n)}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/webdocLoadUtils":function(){define("require exports ../../Viewpoint ../../core/Error ../../core/Logger ../../geometry/support/webMercatorUtils ../../portal/Portal ../../portal/support/jsonContext ../../rest/geometryService/project ../../rest/support/ProjectParameters".split(" "),function(b,a,c,e,h,n,z,p,l,q){function t(y,u,A){const H={context:{...A,
layerContainerType:"operational-layers"}};y.portalItem&&(H.context.portal=y.portalItem.portal||z.getDefault());return(new Promise((I,L)=>b(["../../layers/support/layersCreator"],I,L))).then(({populateOperationalLayers:I})=>{const L=[];var g=u.operationalLayers;g?.length&&L.push(I(y.layers,g,H));g={...H,context:{...H.context,layerContainerType:"tables"},defaultLayerType:"ArcGISFeatureLayer"};const D=u.tables;D?.length&&L.push(I(y.tables,D,g));return Promise.allSettled(L).then(()=>{})})}async function d(y,
u,A){await A.load().catch(L=>{throw new e(`${y.name}:load-portal-item`,"Failed to load portal item",{error:L});});if(A.type!==y.itemType)throw new e(`${y.name}:invalid-portal-item`,`Invalid portal item type '${A.type}', expected '${y.itemType}'`,{type:A.type});var H=await A.fetchData();u.resourceInfo=H;const I=p.createForItemRead(A,y.origin);await r(y,u,H,I);u.resourceReferences={portalItem:A,paths:I.readResourcePaths};if(A=await m(u.initialViewProperties,A,h.getLogger(u)))H=u.initialViewProperties?.clone()??
y.createInitialViewProperties(),H.viewpoint=A,u.initialViewProperties=H}function r(y,u,A,H){const I=y.parseVersion(A.version||"",y.name);y.currentVersion.validate(I);A.version=`${I.major}.${I.minor}`;u.read(A,H);return t(u,A,H)}async function m(y,u,A){return y?.viewpoint?.targetGeometry?null:(y=await w(y,u,A))?new c({targetGeometry:y}):null}async function w(y,u,A){y=y?.spatialReference;const H=u?.extent;if(!y||!H)return null;if(y.isWGS84)return H.clone();if(y.isWebMercator)return n.geographicToWebMercator(H);
const {getGeometryServiceURL:I}=await new Promise((L,g)=>b(["../../portal/support/geometryServiceUtils"],L,g));try{const L=await I(u),g=new q({geometries:[H],outSpatialReference:y});return(await l.project(L,g))[0]}catch(L){A.error("Error projecting item's extent:",L)}return null}a.loadFromSource=function(y,u){return u.resourceInfo?t(u,u.resourceInfo,{origin:y.origin}):u.portalItem?.id?d(y,u,u.portalItem):Promise.resolve()};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},"esri/portal/support/jsonContext":function(){define(["exports",
"../../core/urlUtils","../Portal"],function(b,a,c){function e(h,n){return{origin:n,url:a.urlToObject(h.itemUrl),portal:h.portal||c.getDefault(),portalItem:h}}b.createForItemRead=function(h,n){return{...e(h,n),readResourcePaths:[]}};b.createForItemWrite=function(h,n,z){const p=a.urlToObject(h.itemUrl);return{...e(h,n),messages:[],writtenProperties:[],blockedRelativeUrls:[],verifyItemRelativeUrls:p?{rootPath:p.path,writtenUrls:[]}:null,resources:z?{toAdd:[],toUpdate:[],toKeep:[],pendingOperations:[]}:
null}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/geometryService/project":function(){define("exports ../../request ../../core/accessorSupport/ensureType ../../geometry/support/jsonUtils ../utils ./utils ../support/ProjectParameters".split(" "),function(b,a,c,e,h,n,z){const p=c.ensureType(z);b.project=async function(l,q,t){q=p(q);l=h.parseUrl(l);const d={...l.query,f:"json",...q.toJSON()},r=q.outSpatialReference,m=e.getJsonType(q.geometries[0]);q=h.asValidOptions(d,
t);return a(l.path+"/project",q).then(({data:{geometries:w}})=>n.decodeGeometries(w,m,r))};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/rest/support/ProjectParameters":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/SpatialReference ../../geometry/support/jsonUtils ../../geometry/support/spatialReferenceUtils".split(" "),
function(b,a,c,e,h,n,z,p,l,q){a=class extends a{constructor(t){super(t);this.geometries=[];this.transformForward=this.transformation=this.outSpatialReference=null}toJSON(){const t=this.geometries.map(m=>m.toJSON()),d=this.geometries[0],r={};r.outSR=q.srToRESTValue(this.outSpatialReference);r.inSR=q.srToRESTValue(d.spatialReference);r.geometries=JSON.stringify({geometryType:l.getJsonType(d),geometries:t});this.transformation&&(r.transformation=this.transformation.wkid||JSON.stringify(this.transformation));
null!=this.transformForward&&(r.transformForward=this.transformForward);return r}};b.__decorate([c.property()],a.prototype,"geometries",void 0);b.__decorate([c.property({type:p,json:{read:{source:"outSR"}}})],a.prototype,"outSpatialReference",void 0);b.__decorate([c.property()],a.prototype,"transformation",void 0);b.__decorate([c.property()],a.prototype,"transformForward",void 0);return a=b.__decorate([z.subclass("esri.rest.support.ProjectParameters")],a)})},"esri/webmap/ApplicationProperties":function(){define("../chunks/tslib.es6 ../core/JSONSupport ../core/lang ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/accessorSupport/decorators/subclass ../webdoc/applicationProperties/Viewing".split(" "),
function(b,a,c,e,h,n,z,p){var l;a=l=class extends a{constructor(q){super(q);this.viewing=this.offline=this.editing=null}clone(){return new l(c.clone({editing:this.editing,offline:this.offline,viewing:this.viewing}))}};b.__decorate([e.property({json:{write:!0}})],a.prototype,"editing",void 0);b.__decorate([e.property({json:{write:!0}})],a.prototype,"offline",void 0);b.__decorate([e.property({type:p,json:{write:!0}})],a.prototype,"viewing",void 0);return a=l=b.__decorate([z.subclass("esri.webmap.ApplicationProperties")],
a)})},"esri/webdoc/applicationProperties/Viewing":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./Search".split(" "),function(b,a,c,e,h,n,z,p){var l;a=l=class extends a{constructor(q){super(q);this.search=null}clone(){return new l(c.clone({search:this.search}))}};b.__decorate([e.property({type:p,json:{write:!0}})],a.prototype,"search",void 0);
return a=l=b.__decorate([z.subclass("esri.webdoc.applicationProperties.Viewing")],a)})},"esri/webdoc/applicationProperties/Search":function(){define("../../chunks/tslib.es6 ../../core/Collection ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../core/accessorSupport/extensions/serializableProperty/writePolicyUtils ./SearchLayer ./SearchTable".split(" "),
function(b,a,c,e,h,n,z,p,l,q,t,d,r){var m;const w=a.ofType(d),y=a.ofType(r);a=m=class extends c{constructor(u){super(u);this.enabled=this.addressSearchEnabled=!0;this.hintText=null;this.layers=new w;this.tables=new y}readAddressSearchEnabled(u){return!u}writeAddressSearchEnabled(u,A,H){A[H]=!u}clone(){return new m(e.clone({addressSearchEnabled:this.addressSearchEnabled,enabled:this.enabled,hintText:this.hintText,layers:this.layers,tables:this.tables}))}};b.__decorate([h.property({type:Boolean,nonNullable:!0,
json:{read:{source:"disablePlaceFinder"},write:{target:"disablePlaceFinder",isRequired:!0},origins:{"web-scene":{read:!1,write:!1}}}})],a.prototype,"addressSearchEnabled",void 0);b.__decorate([p.reader("addressSearchEnabled")],a.prototype,"readAddressSearchEnabled",null);b.__decorate([q.writer("addressSearchEnabled")],a.prototype,"writeAddressSearchEnabled",null);b.__decorate([h.property({type:Boolean,nonNullable:!0,json:{write:!0,origins:{"web-map":{write:{isRequired:!0}},"web-scene":{default:!0,
write:!0}}}})],a.prototype,"enabled",void 0);b.__decorate([h.property({type:String,json:{write:!0}})],a.prototype,"hintText",void 0);b.__decorate([h.property({type:w,json:{write:{overridePolicy:t.writeNonEmptyCollectionPolicy},origins:{"web-scene":{write:{isRequired:!0}}}}})],a.prototype,"layers",void 0);b.__decorate([h.property({type:y,json:{read:!0,write:{overridePolicy:t.writeNonEmptyCollectionPolicy}}})],a.prototype,"tables",void 0);return a=m=b.__decorate([l.subclass("esri.webdoc.applicationProperties.Search")],
a)})},"esri/core/accessorSupport/extensions/serializableProperty/writePolicyUtils":function(){define(["exports"],function(b){b.writeNonEmptyCollectionPolicy=function(a){return{enabled:!!a?.length}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/applicationProperties/SearchLayer":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/accessorSupport/ensureType ../../core/accessorSupport/decorators/subclass ./SearchLayerField".split(" "),
function(b,a,c,e,h,n,z){var p;a=p=class extends a{constructor(l){super(l);this.subLayer=this.id=this.field=null}clone(){return new p(c.clone({field:this.field,id:this.id,subLayer:this.subLayer}))}};b.__decorate([e.property({type:z,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);b.__decorate([e.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);b.__decorate([e.property({type:h.Integer,json:{write:!0}})],a.prototype,"subLayer",void 0);return a=p=b.__decorate([n.subclass("esri.webdoc.applicationProperties.SearchLayer")],
a)})},"esri/webdoc/applicationProperties/SearchLayerField":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),function(b,a,c,e,h,n,z,p,l){var q;a=q=class extends a{constructor(t){super(t);this.exactMatch=!1;this.type=this.name=null}clone(){return new q({exactMatch:this.exactMatch,
type:this.type,name:this.name})}};b.__decorate([c.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([z.enumeration(l.kebabDict)],a.prototype,"type",void 0);return a=q=b.__decorate([p.subclass("esri.webdoc.applicationProperties.SearchLayerField")],a)})},"esri/webdoc/applicationProperties/SearchTable":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass ./SearchTableField".split(" "),
function(b,a,c,e,h,n,z,p){var l;a=l=class extends a{constructor(q){super(q);this.id=this.field=null}clone(){return new l(c.clone({field:this.field,id:this.id}))}};b.__decorate([e.property({type:p,json:{write:{isRequired:!0}}})],a.prototype,"field",void 0);b.__decorate([e.property({type:String,json:{write:{isRequired:!0}}})],a.prototype,"id",void 0);return a=l=b.__decorate([z.subclass("esri.webdoc.applicationProperties.SearchTable")],a)})},"esri/webdoc/applicationProperties/SearchTableField":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../layers/support/fieldType".split(" "),
function(b,a,c,e,h,n,z,p,l){var q;a=q=class extends a{constructor(t){super(t);this.exactMatch=!1;this.type=this.name=null}clone(){return new q({exactMatch:this.exactMatch,type:this.type,name:this.name})}};b.__decorate([c.property({type:Boolean,json:{write:!0}})],a.prototype,"exactMatch",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"name",void 0);b.__decorate([z.enumeration(l.kebabDict)],a.prototype,"type",void 0);return a=q=b.__decorate([p.subclass("esri.webdoc.applicationProperties.SearchTableField")],
a)})},"esri/webmap/Bookmark":function(){define("../chunks/tslib.es6 ../Viewpoint ../core/Error ../core/Identifiable ../core/JSONSupport ../core/lang ../core/Logger ../core/accessorSupport/decorators/property ../core/accessorSupport/decorators/cast ../core/accessorSupport/decorators/reader ../core/accessorSupport/decorators/subclass ../core/accessorSupport/decorators/writer ../core/accessorSupport/ensureType ../webdoc/support/SlideThumbnail ../webdoc/support/timeProperties".split(" "),function(b,a,
c,e,h,n,z,p,l,q,t,d,r,m,w){var y;e=y=class extends e.IdentifiableMixin(h){constructor(u){super(u);this.name=null;this.thumbnail=new m.SlideThumbnail;this.timeExtent=null}castThumbnail(u){return"string"===typeof u?new m.SlideThumbnail({url:u}):r.ensureType(m.SlideThumbnail,u)}set viewpoint(u){const {targetGeometry:A,scale:H}=u;null!=A&&"point"===A.type&&null==H&&z.getLogger(this).warn("Bookmark.viewpoint should include 'scale' when its targetGeometry is a point.",u);this._set("viewpoint",u)}readViewpoint(u,
A){const {extent:H,viewpoint:I}=A;return a.fromJSON(I||{targetGeometry:H})}writeViewpoint(u,A,H,I){if(u){var {targetGeometry:L}=u;null!=L&&"extent"!==L.type?I?.messages?I.messages.push(new c("property:unsupported","Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent.")):z.getLogger(this).error("Bookmark.viewpoint cannot be written to JSON when the viewpoint's targetGeometry is not an extent."):(null!=L&&(A.extent=L.toJSON()),A[H]=u.toJSON())}}clone(){return new y(n.clone({name:this.name,
thumbnail:this.thumbnail,timeExtent:this.timeExtent,viewpoint:this.viewpoint}))}};b.__decorate([p.property({type:String,nonNullable:!0,json:{write:{isRequired:!0}}})],e.prototype,"name",void 0);b.__decorate([p.property({type:m.SlideThumbnail,json:{write:{overridePolicy(u){return{enabled:!(!u||!u.url)}}}}})],e.prototype,"thumbnail",void 0);b.__decorate([l.cast("thumbnail")],e.prototype,"castThumbnail",null);b.__decorate([p.property(w.timeExtent)],e.prototype,"timeExtent",void 0);b.__decorate([p.property({type:a,
nonNullable:!0,json:{write:!0}})],e.prototype,"viewpoint",null);b.__decorate([q.reader("viewpoint",["extent","viewpoint"])],e.prototype,"readViewpoint",null);b.__decorate([d.writer("viewpoint")],e.prototype,"writeViewpoint",null);return e=y=b.__decorate([t.subclass("esri.webmap.Bookmark")],e)})},"esri/webdoc/support/SlideThumbnail":function(){define("exports ../../chunks/tslib.es6 ../../core/JSONSupport ../../core/urlUtils ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,c,e,h,n,z,p,l){var q;b.SlideThumbnail=q=class extends c{constructor(){super(...arguments);this.url=""}destroy(){this.url=""}get isSecureUrl(){return e.isHTTPSProtocol(this.url)}get isDataURI(){return e.isDataProtocol(this.url)}clone(){return new q({url:this.url})}};a.__decorate([h.property({type:String,json:{write:{isRequired:!0}}})],b.SlideThumbnail.prototype,"url",void 0);a.__decorate([h.property()],b.SlideThumbnail.prototype,"isSecureUrl",null);a.__decorate([h.property()],b.SlideThumbnail.prototype,
"isDataURI",null);b.SlideThumbnail=q=a.__decorate([l.subclass("esri.webdoc.support.SlideThumbnail")],b.SlideThumbnail);Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/support/timeProperties":function(){define(["exports","../../core/Error","../../core/accessorSupport/ensureType","../../time/TimeExtent"],function(b,a,c,e){b.timeExtent={type:e,json:{read:{source:"timeExtent",reader:h=>h?Array.isArray(h)?e.fromArray(h):e.fromJSON(h):null},write:{writer:(h,n,z,p)=>{h&&(h.isEmpty?
p?.messages&&p.messages.push(new a("invalid-timeExtent","TimeExtent cannot be empty")):n[z]=h.toArray())},target:{timeExtent:{type:[[c.Integer,c.Null]]}}}}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webmap/InitialViewProperties":function(){define("../chunks/tslib.es6 ../Viewpoint ../core/Accessor ../core/Clonable ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../geometry/SpatialReference ../time/constants ../time/TimeExtent ../webdoc/RangeInfo ./background/ColorBackground".split(" "),
function(b,a,c,e,h,n,z,p,l,q,t,d,r,m){c=class extends e.ClonableMixin(c){constructor(w){super(w);this.timeExtent=this.spatialReference=this.rangeInfo=this.background=null;this.timeZone=t.system;this.viewpoint=null}};b.__decorate([h.property({type:m})],c.prototype,"background",void 0);b.__decorate([h.property({type:r})],c.prototype,"rangeInfo",void 0);b.__decorate([h.property({type:q})],c.prototype,"spatialReference",void 0);b.__decorate([h.property({type:d})],c.prototype,"timeExtent",void 0);b.__decorate([h.property({nonNullable:!0})],
c.prototype,"timeZone",void 0);b.__decorate([h.property({type:a})],c.prototype,"viewpoint",void 0);return c=b.__decorate([l.subclass("esri.webmap.InitialViewProperties")],c)})},"esri/webmap/background/ColorBackground":function(){define("../../chunks/tslib.es6 ../../Color ../../core/JSONSupport ../../core/lang ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,e,h,n,z,p){var l;c=l=class extends c{constructor(q){super(q);
this.color=new a([0,0,0,1])}clone(){return new l(e.clone({color:this.color}))}};b.__decorate([h.property({type:a,json:{write:!0}})],c.prototype,"color",void 0);return c=l=b.__decorate([p.subclass("esri.webmap.background.ColorBackground")],c)})},"esri/webmap/Version":function(){define(["exports","../core/Version"],function(b,a){class c extends a.Version{constructor(e,h){super(e,h,"webmap")}}b.Version=c;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/networks/UtilityNetwork":function(){define("require ../chunks/tslib.es6 ../Graphic ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../layers/FeatureLayer ../layers/support/featureQueryAll ./Network ./RulesTable ./support/NamedTraceConfiguration ./support/networkFieldUtils ./support/NetworkSystemLayers ./support/TerminalConfiguration ./support/TraceJobInfo ./support/typeUtils ../rest/support/Query".split(" "),
function(b,a,c,e,h,n,z,p,l,q,t,d,r,m,w,y,u,A,H){async function I(g){const D=new H({where:"1\x3d1",outFields:["*"]});return(await q.queryAllJSON(g,D)).features}const L=g=>Object.freeze(Object.defineProperty({__proto__:null,default:g},Symbol.toStringTag,{value:"Module"}));h=class extends t{constructor(g){super(g);this.sharedNamedTraceConfigurations=[];this.type="utility";this._terminalById=new Map}get serviceTerritoryFeatureLayerId(){return this.dataElement?.serviceTerritoryFeatureLayerId??null}get networkSystemLayers(){return new w({rulesTableId:this.sourceJSON?.systemLayers.rulesTableId,
rulesTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.rulesTableId}`:null,subnetworksTableId:this.sourceJSON?.systemLayers.subnetworksTableId,subnetworksTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.subnetworksTableId}`:null,dirtyAreasLayerId:this.sourceJSON?.systemLayers.dirtyAreasLayerId,dirtyAreasLayerUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.dirtyAreasLayerId}`:null,associationsTableId:this.sourceJSON?.systemLayers.associationsTableId,
associationsTableUrl:this.sourceJSON?`${this.featureServiceUrl}/${this.sourceJSON?.systemLayers.associationsTableId}`:null})}get terminalConfigurations(){return this.dataElement?.terminalConfigurations.map(g=>y.fromJSON(g))||[]}get domainNetworkNames(){return this.dataElement?.domainNetworks.map(g=>g.domainNetworkName)||[]}get _utilityLayerList(){const g=new Set;this.dataElement?.domainNetworks?.map(D=>{D?.edgeSources?.map(({layerId:C,sourceId:f})=>{this._layerIdBySourceId.set(f,C);this._sourceIdByLayerId.set(C,
f);g.add(C)});D?.junctionSources?.map(({layerId:C,sourceId:f})=>{this._layerIdBySourceId.set(f,C);this._sourceIdByLayerId.set(C,f);g.add(C)})});return g}async load(g){this.addResolvingPromise(super.load(g));this.addResolvingPromise(this._loadNamedTraceConfigurationsFromNetwork(g));return this}getTerminalConfiguration(g){let D=null,C=null;var f=g.layer;let B=null;if("feature"===f?.type){if(B=f.layerId,null===B)return null}else if("subtype-sublayer"===f?.type){if(B=f?.parent?.layerId??null,null===B)return null}else return null;
f=g.attributes;if(null==f)return null;for(const E of Object.keys(f))"ASSETGROUP"===E.toUpperCase()&&(D=g.getAttribute(E)),"ASSETTYPE"===E.toUpperCase()&&(C=g.getAttribute(E));if(!this.dataElement)return null;let v=null;g=this.dataElement.domainNetworks;for(var F of g)if(g=F.junctionSources?.find(E=>E.layerId===B))if(g=g.assetGroups?.find(E=>E.assetGroupCode===D))if(g=g.assetTypes?.find(E=>E.assetTypeCode===C),g?.isTerminalConfigurationSupported){v=g.terminalConfigurationId;break}return null!=v?(F=
this.dataElement.terminalConfigurations?.find(E=>E.terminalConfigurationId===v))?y.fromJSON(F):null:null}getTierNames(g){return this.dataElement?.domainNetworks.find(D=>D.domainNetworkName===g)?.tiers.map(D=>D.name)||[]}async getRulesTable(){this._sharedRulesTable||(this._sharedRulesTable=this._createRulesTable());return await this._sharedRulesTable}getTerminalById(g){if(!this.dataElement||null==g)return null;const D=this._terminalById.get(g);if(null!=D)return D;this.terminalConfigurations.forEach(C=>
{C.terminals.forEach(f=>{this._terminalById.set(f.id,f)})});return this._terminalById.get(g)}isUtilityLayer(g){return"layerId"in g?this._utilityLayerList.has(g?.layerId)&&(g.url?.startsWith(this.featureServiceUrl)??!1):"subtype-sublayer"===g.type&&g.parent?this._utilityLayerList.has(g.parent.layerId)&&(g.parent.url?.startsWith(this.featureServiceUrl)??!1):!1}async queryAssociations(g,D){const [{queryAssociations:C},{default:f}]=await Promise.all([new Promise((B,v)=>b(["../rest/networks/queryAssociations"],
B,v)),new Promise((B,v)=>b(["../rest/networks/support/QueryAssociationsParameters"],F=>B(L(F)),v))]);g=f.from(g);g.gdbVersion=this.gdbVersion;g.moment=this.historicMoment;return(await C(this.networkServiceUrl,g,D)).associations}async synthesizeAssociationGeometries(g){const [{synthesizeAssociationGeometries:D},{default:C}]=await Promise.all([new Promise((f,B)=>b(["../rest/networks/synthesizeAssociationGeometries"],f,B)),new Promise((f,B)=>b(["../rest/networks/support/SynthesizeAssociationGeometriesParameters"],
v=>f(L(v)),B))]);g=C.from(g);g.gdbVersion=this.gdbVersion;g.moment=this.historicMoment;return D(this.networkServiceUrl,g)}async trace(g){const [{trace:D},{default:C}]=await Promise.all([new Promise((f,B)=>b(["../rest/networks/trace"],f,B)),new Promise((f,B)=>b(["../rest/networks/support/TraceParameters"],v=>f(L(v)),B))]);g=C.from(g);g.gdbVersion=this.gdbVersion;g.moment=this.historicMoment;return D(this.networkServiceUrl,g)}async submitTraceJob(g){const [{submitTraceJob:D},{default:C}]=await Promise.all([new Promise((f,
B)=>b(["../rest/networks/trace"],f,B)),new Promise((f,B)=>b(["../rest/networks/support/TraceParameters"],v=>f(L(v)),B))]);g=C.from(g);g.gdbVersion=this.gdbVersion;g.moment=this.historicMoment;g=await D(this.networkServiceUrl,g);return new u({statusUrl:g})}async canAddAssociation(g){const D=await this.getRulesTable();if(!D)return!1;await D.load();const C=v=>({fromRuleElement:{networkSource:v.fromNetworkSource,assetGroup:v.fromAssetGroup,assetType:v.fromAssetType,terminal:v.fromTerminal},viaRuleElement:v.viaNetworkSource?
{networkSource:v.viaNetworkSource,assetGroup:v.viaAssetGroup,assetType:v.viaAssetType,terminal:v.viaTerminal}:void 0,toRuleElement:{networkSource:v.toNetworkSource,assetGroup:v.toAssetGroup,assetType:v.toAssetType,terminal:v.toTerminal}}),f=(v,F,E=!0)=>{var J;if(J=v.networkSource?.sourceId===F.networkSourceId&&v.assetGroup?.assetGroupCode===F.assetGroupCode&&v.assetType?.assetTypeCode===F.assetTypeCode)(E=!E)||(E=(v=v.terminal)?1===v.terminalId?F?.terminalId?F?.terminalId===v.terminalId:!0:v.terminalId===
F?.terminalId:!F?.terminalId),J=E;return J},B=(v,F)=>{const {fromRuleElement:E,toRuleElement:J}=C(v);return f(E,F.fromNetworkElement,!1)&&f(J,F.toNetworkElement,!1)};return"containment"===g.associationType?D.rulesCategorized.containment.some(v=>B(v,g)):"attachment"===g.associationType?D.rulesCategorized.attachment.some(v=>B(v,g)):D.rulesCategorized.connectivity.some(v=>{if(v.ruleType===A.RuleType.RTEdgeJunctionEdgeConnectivity){const {fromRuleElement:J,toRuleElement:M,viaRuleElement:K}=C(v);return f(J,
g.fromNetworkElement)&&f(K,g.toNetworkElement)||f(J,g.toNetworkElement)&&f(K,g.fromNetworkElement)||f(K,g.fromNetworkElement)&&f(M,g.toNetworkElement)||f(K,g.toNetworkElement)&&f(M,g.fromNetworkElement)}const {fromRuleElement:F,toRuleElement:E}=C(v);return f(F,g.fromNetworkElement)&&f(E,g.toNetworkElement)||f(F,g.toNetworkElement)&&f(E,g.fromNetworkElement)})}generateAddAssociations(g){const {associationsTable:D}=this.networkSystemLayers,{fromNetworkSourceId:C,fromGlobalId:f,fromTerminalId:B,toNetworkSourceId:v,
toGlobalId:F,toTerminalId:E,associationType:J,isContentVisible:M,percentAlong:K,globalId:O}=m.getAssociationsTableFields(D);return{addFeatures:g.map(P=>new c({attributes:{[C]:P.fromNetworkElement?.networkSourceId,[f]:P.fromNetworkElement?.globalId,[B]:P.fromNetworkElement?.terminalId,[v]:P.toNetworkElement?.networkSourceId,[F]:P.toNetworkElement?.globalId,[E]:P.toNetworkElement?.terminalId,[J]:A.AssociationTypeEnum[P.associationType],[M]:null==P.isContentVisible?void 0:P.isContentVisible?1:0,[K]:P.percentAlong,
[O]:P.globalId}})),id:this.networkSystemLayers.associationsTableId,identifierFields:{globalIdField:D?.globalIdField??"globalid",objectIdField:D?.objectIdField??"objectid"}}}generateDeleteAssociations(g){const {associationsTable:D,associationsTableId:C}=this.networkSystemLayers;return{deleteFeatures:g.map(f=>({globalId:f.globalId})),id:C,identifierFields:{globalIdField:D?.globalIdField??"globalid",objectIdField:D?.objectIdField??"objectid"}}}async loadAssociationsTable(){return this.networkSystemLayers.loadAssociationsTable()}async _loadNamedTraceConfigurationsFromNetwork(g){if(0!==
this.sharedNamedTraceConfigurations?.length){var D=this.sharedNamedTraceConfigurations.map(C=>C.globalId);g=await this.queryNamedTraceConfigurations({globalIds:D},g);for(const C of this.sharedNamedTraceConfigurations)if(D=g?.find(f=>f.globalId===C.globalId))D=D.write({},{origin:"service"}),C.read(D,{origin:"service"})}}async _createRulesTable(){const g=new l({url:this.networkSystemLayers.rulesTableUrl});await g.load();var D=this.dataElement?.domainNetworks;if(!D)return null;const C=D.flatMap(f=>[...(f.edgeSources||
[]),...(f.junctionSources||[])]);D=(await I(g)).map(f=>this._hydrateRuleInfo(g,C,f));return new d({rulesLayer:g,rules:D})}_hydrateRuleInfo(g,D,C){var f=g.fieldsIndex;g=f.get("RULETYPE");var B=f.get("CREATIONDATE"),v=f.get("FROMNETWORKSOURCEID"),F=f.get("FROMASSETGROUP"),E=f.get("FROMASSETTYPE"),J=f.get("FROMTERMINALID"),M=f.get("TONETWORKSOURCEID"),K=f.get("TOASSETGROUP");const O=f.get("TOASSETTYPE"),P=f.get("TOTERMINALID"),X=f.get("VIANETWORKSOURCEID"),Y=f.get("VIAASSETGROUP"),V=f.get("VIAASSETTYPE");
f=f.get("VIATERMINALID");g=C.attributes[g.name];B=new Date(C.attributes[B.name]);C=[{networkSourceId:C.attributes[v.name],assetGroupId:C.attributes[F.name],assetTypeId:C.attributes[E.name],terminalId:C.attributes[J.name]},{networkSourceId:C.attributes[M.name],assetGroupId:C.attributes[K.name],assetTypeId:C.attributes[O.name],terminalId:C.attributes[P.name]},{networkSourceId:C.attributes[X.name],assetGroupId:C.attributes[Y.name],assetTypeId:C.attributes[V.name],terminalId:C.attributes[f.name]}];let Q;
(function(R){R[R.from=0]="from";R[R.to=1]="to";R[R.via=2]="via"})(Q||={});v={ruleType:g,creationDate:B};for(const R of[Q.from,Q.to,Q.via]){if(g!==A.RuleType.RTEdgeJunctionEdgeConnectivity&&R===Q.via)continue;const T=C[R];F=D.find(U=>U.sourceId===T.networkSourceId);E=F?.assetGroups.find(U=>U.assetGroupCode===T.assetGroupId);J=E?.assetTypes.find(U=>U.assetTypeCode===T.assetTypeId);M=this._getTerminal(J,T);K="";switch(R){case Q.from:K="from";break;case Q.to:K="to";break;case Q.via:K="via"}v[`${K}NetworkSource`]=
F;v[`${K}AssetGroup`]=E;v[`${K}AssetType`]=J;v[`${K}Terminal`]=M?.toJSON()}return v}_getTerminal(g,D){const C=g?.terminalConfigurationId;return this.terminalConfigurations?.find(f=>f.id===C)?.terminals?.find(f=>f.id===D.terminalId)??null}};a.__decorate([e.property({type:[r],json:{origins:{"web-map":{read:{source:"traceConfigurations"},write:{target:"traceConfigurations"}},service:{read:{source:"traceConfigurations"}}},read:!1}})],h.prototype,"sharedNamedTraceConfigurations",void 0);a.__decorate([e.property({type:["utility"],
readOnly:!0,json:{read:!1,write:!1}})],h.prototype,"type",void 0);a.__decorate([e.property({readOnly:!0})],h.prototype,"serviceTerritoryFeatureLayerId",null);a.__decorate([e.property({readOnly:!0})],h.prototype,"networkSystemLayers",null);a.__decorate([e.property({readOnly:!0})],h.prototype,"terminalConfigurations",null);a.__decorate([e.property({readOnly:!0})],h.prototype,"domainNetworkNames",null);return h=a.__decorate([p.subclass("esri.networks.UtilityNetwork")],h)})},"esri/networks/Network":function(){define("require ../chunks/tslib.es6 ../Graphic ../request ../core/Error ../core/Loadable ../core/Logger ../core/MultiOriginJSONSupport ../core/promiseUtils ../core/urlUtils ../core/accessorSupport/decorators/property ../core/has ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../geometry/Extent ../geometry/SpatialReference ../geometry/support/jsonUtils ../layers/mixins/EditBusLayer ../layers/support/arcgisLayerUrl ./support/TopologyValidationJobInfo ./support/utils ../versionManagement/support/versionManagementUtils".split(" "),
function(b,a,c,e,h,n,z,p,l,q,t,d,r,m,w,y,u,A,H,I,L,g){function D(f,B){return new c({attributes:f.attributes,geometry:u.fromJSON({...f.geometry,spatialReference:B})})}const C=f=>Object.freeze(Object.defineProperty({__proto__:null,default:f},Symbol.toStringTag,{value:"Module"}));n=class extends p.MultiOriginJSONMixin(n){static fromPortalItem(f){return L.networkFromPortalItem(f)}constructor(f){super(f);this.historicMoment=this.gdbVersion=this.sourceJSON=this.type=this.spatialReference=this.fullExtent=
this.dataElement=this.layerUrl=this.title=this.id=null;this._sourceIdByLayerId=new Map;this._layerIdBySourceId=new Map;this._applyEditsHandler=B=>{const {serviceUrl:v,gdbVersion:F,result:E}=B;B=v===this.featureServiceUrl;const J=A.versionMatches(v,F,this.gdbVersion);B&&J&&E.then(M=>{g.isVersionInEditSession(v,F)&&(this.historicMoment=M.historicMoment)})};this._updateMomentHandler=B=>{const {serviceUrl:v,gdbVersion:F,moment:E}=B;B=v===this.featureServiceUrl;const J=A.versionMatches(v,F,this.gdbVersion);
B&&J&&(this.historicMoment=E)};this.when().then(()=>{this.addHandles([A.onApplyEditsEvent(this._applyEditsHandler),A.onUpdateMomentEvent(this._updateMomentHandler)])},()=>{})}initialize(){this.when().catch(f=>{l.isAbortError(f)||z.getLogger(this).error("#load()",`Failed to load layer (title: '${this.title??"no title"}', id: '${this.id??"no id"}')`,{error:f})})}get datasetName(){return this.dataElement?.name??null}get owner(){return this.dataElement?.userIdentity??null}get schemaGeneration(){return this.dataElement?.schemaGeneration??
null}get parsedUrl(){return q.urlToObject(this.layerUrl)}get featureServiceUrl(){return H.parse(this.parsedUrl.path).url.path}get networkServiceUrl(){return this.featureServiceUrl.replace(/\/FeatureServer/i,"/UtilityNetworkServer")}get layerId(){return H.parse(this.parsedUrl.path).sublayer}get networkSystemLayers(){return null}async load(f){this.addResolvingPromise(this._fetchDataElement(this.featureServiceUrl,this.layerId.toString(),f));this.addResolvingPromise(this._fetchLayerMetaData(this.layerUrl,
f));return this}getLayerIdBySourceId(f){if(!this.dataElement)return null;const B=this._layerIdBySourceId.get(f);if(null!=B)return B;f=this._traverseNetworkSources(this.dataElement.domainNetworks,this._layerIdBySourceId,"sourceId","layerId",f);return 0<=f?f:null}getSourceIdByLayerId(f){if(!this.dataElement)return null;const B=this._sourceIdByLayerId.get(f);if(null!=B)return B;f=this._traverseNetworkSources(this.dataElement.domainNetworks,this._sourceIdByLayerId,"layerId","sourceId",f);return 0<=f?
f:null}getObjectIdsFromElements(f){const B=[],v=new Map;for(const E of f){f=this.getLayerIdBySourceId(E.networkSourceId);if(null==f)continue;let J=v.get(f);void 0===J&&(J=[]);J.push(E.objectId);v.set(f,J)}const F=this.featureServiceUrl;v.forEach((E,J)=>B.push({layerUrl:`${F}/${J}`,objectIds:E}));return B}async queryNamedTraceConfigurations(f,B){const [{queryNamedTraceConfigurations:v},{default:F}]=await Promise.all([new Promise((J,M)=>b(["../rest/networks/queryNamedTraceConfigurations"],J,M)),new Promise((J,
M)=>b(["../rest/networks/support/QueryNamedTraceConfigurationsParameters"],K=>J(C(K)),M))]),E=this.networkServiceUrl;f=F.from(f);return(await v(E,f,{...B}))?.namedTraceConfigurations}async validateTopology(f,B){if(!f.validateArea)throw new h("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");const [{validateNetworkTopology:v},{default:F}]=await Promise.all([new Promise((M,K)=>b(["../rest/networks/validateNetworkTopology"],M,
K)),new Promise((M,K)=>b(["../rest/networks/support/ValidateNetworkTopologyParameters"],O=>M(C(O)),K))]);var E=F.from(f);g.isVersionInEditSession(this.featureServiceUrl,this.gdbVersion||null)?(E.sessionID=g.currentSessionId,await g.isSafeToEditVersion(this.featureServiceUrl,this.gdbVersion,!0)):E.sessionID=null;E.gdbVersion=this.gdbVersion;var J=this.networkServiceUrl;f=A.emitApplyEditsEvent(this.featureServiceUrl,null,this.gdbVersion,!0);B=await v(J,E,{...B});if(B?.serviceEdits){E=[];for(const M of B.serviceEdits){({editedFeatures:J}=
M);const K=J?.spatialReference?new y(J.spatialReference):null;E.push({layerId:M.layerId,editedFeatures:{adds:J?.adds?.map(O=>D(O,K))||[],updates:J?.updates?.map(O=>({original:D(O[0],K),current:D(O[1],K)}))||[],deletes:J?.deletes?.map(O=>D(O,K))||[],spatialReference:K}})}f.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],addedAttachments:[],updatedAttachments:[],deletedAttachments:[],editedFeatures:E,exceededTransferLimit:!1,historicMoment:B.moment})}return B}async submitTopologyValidationJob(f,
B){var v=null;if(!f.validateArea)throw new h("network:undefined-validateArea","the network must have validateArea defined in the validate network topology parameters.");this.gdbVersion||(v=this.layerUrl.replace(/\/FeatureServer/i,"/VersionManagementServer").replace(/\/\d*$/,""),v=(await e(v,{responseType:"json",query:{f:"json"}})).data.defaultVersionName);const [{submitValidateNetworkTopologyJob:F},{default:E}]=await Promise.all([new Promise((M,K)=>b(["../rest/networks/validateNetworkTopology"],M,
K)),new Promise((M,K)=>b(["../rest/networks/support/ValidateNetworkTopologyParameters"],O=>M(C(O)),K))]);f=E.from(f);g.isVersionInEditSession(this.featureServiceUrl,this.gdbVersion||null)?(f.sessionID=g.currentSessionId,await g.isSafeToEditVersion(this.featureServiceUrl,this.gdbVersion,!0)):f.sessionID=null;f.gdbVersion=this.gdbVersion||v;const J=this.networkServiceUrl;v=this.featureServiceUrl?A.emitApplyEditsEvent(this.featureServiceUrl,null,this.gdbVersion,!0):void 0;B=await F(J,f,{...B});return new I({statusUrl:B,
editsResolver:v})}getSourceTypeById(f){if(!this.dataElement)return null;for(const B of this.dataElement.domainNetworks)for(const v of[B.edgeSources??[],B.junctionSources??[]])for(const F of v)if(F.sourceId===f)return v===B.edgeSources?"edge":"junction";return null}_traverseNetworkSources(f,B,v,F,E){for(const J of f)for(const M of[J.edgeSources??[],J.junctionSources??[]])for(const K of M)if(K[v]===E)return B.set(E,K[F]),K[F];return-1}async _fetchLayerMetaData(f,B){f=await e(f,{responseType:"json",
query:{f:"json"},...B});this.sourceJSON=f.data;this.read(f.data,{origin:"service"})}async _fetchDataElement(f,B,v){this.dataElement||(f=await e(`${f}/queryDataElements`,{responseType:"json",query:{layers:JSON.stringify([B]),f:"json"},...v}).then(F=>F.data.layerDataElements?.[0]))&&this.read(f,{origin:"service"})}};a.__decorate([t.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:!0}},read:!1}})],n.prototype,"id",void 0);a.__decorate([t.property({type:String,
nonNullable:!0,json:{origins:{"web-map":{read:!0,write:{isRequired:!0}},service:{read:{source:"name"}}},read:!1}})],n.prototype,"title",void 0);a.__decorate([t.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"url"},write:{target:"url",isRequired:!0}}},read:!1}})],n.prototype,"layerUrl",void 0);a.__decorate([t.property({type:Object,json:{origins:{service:{read:!0}},read:!1}})],n.prototype,"dataElement",void 0);a.__decorate([t.property({type:w,json:{origins:{service:{read:{source:"extent"}}},
read:!1}})],n.prototype,"fullExtent",void 0);a.__decorate([t.property({type:y,json:{origins:{service:{read:{source:"extent.spatialReference"}}},read:!1}})],n.prototype,"spatialReference",void 0);a.__decorate([t.property({type:["utility","trace"],readOnly:!0,json:{read:!1,write:!1}})],n.prototype,"type",void 0);a.__decorate([t.property({readOnly:!0})],n.prototype,"datasetName",null);a.__decorate([t.property({readOnly:!0})],n.prototype,"owner",null);a.__decorate([t.property({readOnly:!0})],n.prototype,
"schemaGeneration",null);a.__decorate([t.property({readOnly:!0})],n.prototype,"parsedUrl",null);a.__decorate([t.property({readOnly:!0})],n.prototype,"featureServiceUrl",null);a.__decorate([t.property({readOnly:!0})],n.prototype,"networkServiceUrl",null);a.__decorate([t.property({readOnly:!0})],n.prototype,"layerId",null);a.__decorate([t.property()],n.prototype,"sourceJSON",void 0);a.__decorate([t.property({readOnly:!0})],n.prototype,"networkSystemLayers",null);a.__decorate([t.property()],n.prototype,
"gdbVersion",void 0);a.__decorate([t.property({type:Date})],n.prototype,"historicMoment",void 0);return n=a.__decorate([m.subclass("esri.networks.Network")],n)})},"esri/networks/support/TopologyValidationJobInfo":function(){define("../../chunks/tslib.es6 ../../request ../../core/has ../../core/jsonMap ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../rest/networks/support/ValidateNetworkTopologyResult".split(" "),
function(b,a,c,e,h,n,z,p,l,q,t){c=e.strict()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});t=class extends t{constructor(d){super(d);this.lastUpdatedTime=this.submissionTime=this.status=this.statusUrl=null;this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(d){({data:d}=await a(this.statusUrl,{...d,query:{f:"json"}}));this.read(d);this.editsResolver&&this.editsResolver.resolve({edits:null,addedFeatures:[],updatedFeatures:[],deletedFeatures:[],
addedAttachments:[],updatedAttachments:[],deletedAttachments:[],exceededTransferLimit:!0,historicMoment:null});return this}async waitForJobCompletion(d={}){const {interval:r=1E3,statusCallback:m}=d;return new Promise((w,y)=>{this._clearTimer();this._timer=setInterval(()=>{this._timer||y(h.createAbortError());this.checkJobStatus().then(u=>{({status:u}=u);this.status=u;switch(u){case "job-succeeded":this._clearTimer();w(this);break;case "job-waiting":case "job-executing":m&&m(this)}},u=>{this._clearTimer();
y(u)})},r)})}_clearTimer(){clearInterval(this._timer);this._timer=void 0}};b.__decorate([n.property()],t.prototype,"editsResolver",void 0);b.__decorate([n.property({type:String,json:{write:!0}})],t.prototype,"statusUrl",void 0);b.__decorate([l.enumeration(c)],t.prototype,"status",void 0);b.__decorate([n.property({type:Date,json:{type:Number,write:{writer:(d,r)=>{r.submissionTime=d?d.getTime():null}}}})],t.prototype,"submissionTime",void 0);b.__decorate([n.property({type:Date,json:{type:Number,write:{writer:(d,
r)=>{r.lastUpdatedTime=d?d.getTime():null}}}})],t.prototype,"lastUpdatedTime",void 0);return t=b.__decorate([q.subclass("esri.networks.support.TopologyValidationJobInfo")],t)})},"esri/rest/networks/support/ValidateNetworkTopologyResult":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,e,h,
n,z){a=class extends a{constructor(p){super(p);this.moment=null;this.validateErrorsCreated=this.fullUpdate=!1;this.discoveredSubnetworks=this.serviceEdits=this.exceededTransferLimit=null}};b.__decorate([c.property({type:Date,json:{type:Number,write:{writer:(p,l)=>{l.moment=p?p.getTime():null}}}})],a.prototype,"moment",void 0);b.__decorate([c.property({type:Boolean,json:{write:!0}})],a.prototype,"fullUpdate",void 0);b.__decorate([c.property({type:Boolean,json:{write:!0}})],a.prototype,"validateErrorsCreated",
void 0);b.__decorate([c.property({type:Boolean,json:{write:!0}})],a.prototype,"exceededTransferLimit",void 0);b.__decorate([c.property({type:[Object],json:{write:!0}})],a.prototype,"serviceEdits",void 0);b.__decorate([c.property({type:[Object],json:{write:!0}})],a.prototype,"discoveredSubnetworks",void 0);return a=b.__decorate([z.subclass("esri.rest.networks.support.ValidateNetworkTopologyResult")],a)})},"esri/networks/support/utils":function(){define("require exports ../../request ../../core/Error ../../layers/support/featureQueryAll ../../portal/PortalItem ../../rest/support/FeatureSet".split(" "),
function(b,a,c,e,h,n,z){async function p(l,q){return"Utility Network Layer"===l?({default:l}=await new Promise((t,d)=>b(["../UtilityNetwork"],r=>t(Object.freeze(Object.defineProperty({__proto__:null,default:r},Symbol.toStringTag,{value:"Module"}))),d)),new l({layerUrl:q})):null}a.getFeaturesFromLayers=async function(l,q){const t=l.layers,d=l.layerInfos,r=l.returnGeometry||!1,m=l.outSpatialReference;await Promise.all(t.map(async w=>{await w.load()}));return(await Promise.all(t.map(async w=>{var y=
d.find(A=>A.layerUrl===w.parsedUrl?.path);if(!y?.objectIds?.length)return{layer:w,featureSet:void 0};const u=w.createQuery();u.returnGeometry=r;u.outFields=y.outFields||["*"];u.outSpatialReference=m;u.gdbVersion=w.gdbVersion;u.objectIds=y.objectIds;q&&(u.where="1\x3d1");y=z.fromJSON(await h.queryAllJSON(w,u));y.features.forEach(A=>{A.layer=w});return{layer:w,featureSet:y}}))).filter(w=>void 0!==w.featureSet)};a.networkFromPortalItem=async function(l){l="portalItem"in l?l:{portalItem:l};!l.portalItem||
l.portalItem instanceof n||(l={...l,portalItem:new n(l.portalItem)});l=l.portalItem;await l.load();if("Feature Service"!==l.type)throw new e("portal:unknown-item-type","Unknown item type '${type}'",{type:l.type});l=l.url;var q=await c(l,{responseType:"json",query:{f:"json"}});return q.data.type?.includes("Network Layer")?p(q.data.type,l):q.data.layers&&(q=q.data.layers.find(t=>t.type.includes("Network Layer")))?p(q.type,`${l}/${q.id}`):null};Object.defineProperty(a,Symbol.toStringTag,{value:"Module"})})},
"esri/networks/RulesTable":function(){define("../chunks/tslib.es6 ../request ../core/JSONSupport ../core/Loadable ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ../layers/support/layerUtils ./support/typeUtils".split(" "),function(b,a,c,e,h,n,z,p,l,q,t){c=class extends c.JSONSupportMixin(e){constructor(d){super(d);this.rulesCategorized={attachment:[],containment:[],connectivity:[]};this.request=a}initialize(){}async load(d){d=
this.rulesLayer.load(d).then(()=>this._initializeRulesTable());this.addResolvingPromise(d);return this}getFeaturesCanAssociateWithClause(d,r,m){return this._getWhereClauseForCompatibleFeatures(d,r,m)}getFeaturesCanAssociateWith(d,r,m){return null==this._getFeatureSourceLayerId(d)?[]:r.filter(w=>this.canAssociateFeatures(d,w,m))}canAssociateFeatures(d,r,m){const [w,y]=this._getFeatureAssetCodes(d),u=this._getFeatureSourceLayerId(d),[A,H]=this._getFeatureAssetCodes(r),I=this._getFeatureSourceLayerId(r);
return null==u||null==I?!1:m.some(L=>{const {type:g,direction:D}=L;return this._getRulesForAssociationType(g).some(C=>this._getRuleFieldValuesForAssociation(C,g,D)?.some(f=>u===f?.ruleLayerIdForSource&&w===f?.ruleAssetGroupCodeForSource&&y===f?.ruleAssetTypeCodeForSource&&I===f?.ruleLayerIdForTarget&&A===f?.ruleAssetGroupCodeForTarget&&H===f?.ruleAssetTypeCodeForTarget))})}getLayersCanAssociateWith(d,r,m){return null==this._getFeatureSourceLayerId(d)?[]:r.filter(w=>this.canAssociateFeatureToLayer(d,
w,m))}canAssociateFeatureToLayer(d,r,m){const w=q.isSubtypeSublayer(r)?r.parent:r;if(!w)return!1;const y=w.layerId,u=q.isSubtypeSublayer(r)?r.subtypeCode:null,[A,H]=this._getFeatureAssetCodes(d),I=this._getFeatureSourceLayerId(d);return null==I?!1:m.some(L=>{const {type:g,direction:D}=L;return this._getRulesForAssociationType(g).some(C=>this._getRuleFieldValuesForAssociation(C,g,D)?.some(f=>I===f?.ruleLayerIdForSource&&A===f?.ruleAssetGroupCodeForSource&&H===f?.ruleAssetTypeCodeForSource&&y===f?.ruleLayerIdForTarget&&
(null!=u?u===f?.ruleAssetGroupCodeForTarget:!0)))})}getFeatureSQL(d,r){var m=d.layerId.toString(),w=d.fieldsIndex?.normalizeFieldName("assetGroup");d=d.fieldsIndex?.normalizeFieldName("assetType");w=w?r.attributes[w]:null;r=d?r.attributes[d]:null;if(m=this.rulesHash[m])if(m=m.assetGroupHash[w])return m.assetTypeHash[r]||null;return null}async _initializeRulesTable(){const d={};let r;var m=r||={};m[m.from=0]="from";m[m.to=1]="to";m[m.via=2]="via";m=[{networkSourceId:"fromNetworkSource",assetGroupId:"fromAssetGroup",
assetTypeId:"fromAssetType"},{networkSourceId:"toNetworkSource",assetGroupId:"toAssetGroup",assetTypeId:"toAssetType"},{networkSourceId:"viaNetworkSource",assetGroupId:"viaAssetGroup",assetTypeId:"viaAssetType"}];this.rulesCategorized={attachment:[],containment:[],connectivity:[]};for(const I of this.rules)if(I.ruleType===t.RuleType.RTAttachment)this.rulesCategorized.attachment.push(I);else if(I.ruleType===t.RuleType.RTContainment)this.rulesCategorized.containment.push(I);else if(I.ruleType===t.RuleType.RTJunctionJunctionConnectivity)this.rulesCategorized.connectivity.push(I);
else{this.rulesCategorized.connectivity.push(I);var w=[[r.from,r.to],[r.to,r.from]];I.ruleType===t.RuleType.RTEdgeJunctionEdgeConnectivity&&(w=[[r.from,r.via],[r.via,r.from],[r.to,r.via],[r.via,r.to]]);for(const L of w){w=L.shift();var y=L.shift(),u=!1;switch(I.ruleType){case t.RuleType.RTEdgeJunctionEdgeConnectivity:u=w===r.from||w===r.to;break;case t.RuleType.RTJunctionEdgeConnectivity:u=w===r.to}var A=m[w];w=I[A.networkSourceId]?.layerId.toString()??"";const g=I[A.assetGroupId]?.assetGroupCode?.toString();
A=I[A.assetTypeId]?.assetTypeCode?.toString();var H=m[y];y=I[H.networkSourceId]?.layerId.toString()??"";const D=I[H.assetGroupId]?.assetGroupCode?.toString();H=I[H.assetTypeId];const C=H?.assetTypeCode?.toString(),f=d[w]??{assetGroupHash:{}};if(!(g&&A&&D&&C))continue;const B=f.assetGroupHash[g]??{assetTypeHash:{}},v=B.assetTypeHash[A]??{};v[y]=v[y]??{};u&&(v[w]=v[w]??{},u=`(assetgroup = ${g} AND assettype = ${A})`,"esriNECPEndVertex"===H?.connectivityPolicy?v[w].endVertex=v[w]?.endVertex?`${v[w].endVertex}`:
`${u}`:v[w].anyVertex=v[w].anyVertex?`${v[w].anyVertex}`:`${u}`);u=`(assetgroup = ${D} AND assettype = ${C})`;"esriNECPEndVertex"===H?.connectivityPolicy?v[y].endVertex=v[y]?.endVertex?`${v[y].endVertex} OR ${u}`:`${u}`:v[y].anyVertex=v[y]?.anyVertex?`${v[y].anyVertex} OR ${u}`:`${u}`;B.assetTypeHash[A]=v;f.assetGroupHash[g]=B;d[w]=f}}this._set("rulesHash",d)}_getRuleFieldValuesForAssociation(d,r,m="from"){switch(r){case "attachment":case "containment":return"from"===m?[{ruleLayerIdForSource:d.fromNetworkSource?.layerId,
ruleAssetGroupCodeForSource:d.fromAssetGroup?.assetGroupCode,ruleAssetTypeCodeForSource:d.fromAssetType?.assetTypeCode,ruleLayerIdForTarget:d.toNetworkSource?.layerId,ruleAssetGroupCodeForTarget:d.toAssetGroup?.assetGroupCode,ruleAssetTypeCodeForTarget:d.toAssetType?.assetTypeCode}]:[{ruleLayerIdForSource:d.toNetworkSource?.layerId,ruleAssetGroupCodeForSource:d.toAssetGroup?.assetGroupCode,ruleAssetTypeCodeForSource:d.toAssetType?.assetTypeCode,ruleLayerIdForTarget:d.fromNetworkSource?.layerId,ruleAssetGroupCodeForTarget:d.fromAssetGroup?.assetGroupCode,
ruleAssetTypeCodeForTarget:d.fromAssetType?.assetTypeCode}];case "connectivity":case "junction-junction-connectivity":return[{ruleLayerIdForSource:d.fromNetworkSource?.layerId,ruleAssetGroupCodeForSource:d.fromAssetGroup?.assetGroupCode,ruleAssetTypeCodeForSource:d.fromAssetType?.assetTypeCode,ruleLayerIdForTarget:d.toNetworkSource?.layerId,ruleAssetGroupCodeForTarget:d.toAssetGroup?.assetGroupCode,ruleAssetTypeCodeForTarget:d.toAssetType?.assetTypeCode},{ruleLayerIdForSource:d.toNetworkSource?.layerId,
ruleAssetGroupCodeForSource:d.toAssetGroup?.assetGroupCode,ruleAssetTypeCodeForSource:d.toAssetType?.assetTypeCode,ruleLayerIdForTarget:d.fromNetworkSource?.layerId,ruleAssetGroupCodeForTarget:d.fromAssetGroup?.assetGroupCode,ruleAssetTypeCodeForTarget:d.fromAssetType?.assetTypeCode}];case "junction-edge-from-connectivity":case "junction-edge-midspan-connectivity":case "junction-edge-to-connectivity":return d.ruleType===t.RuleType.RTEdgeJunctionEdgeConnectivity?[{ruleLayerIdForSource:d.fromNetworkSource?.layerId,
ruleAssetGroupCodeForSource:d.fromAssetGroup?.assetGroupCode,ruleAssetTypeCodeForSource:d.fromAssetType?.assetTypeCode,ruleLayerIdForTarget:d.viaNetworkSource?.layerId,ruleAssetGroupCodeForTarget:d.viaAssetGroup?.assetGroupCode,ruleAssetTypeCodeForTarget:d.viaAssetType?.assetTypeCode},{ruleLayerIdForSource:d.viaNetworkSource?.layerId,ruleAssetGroupCodeForSource:d.viaAssetGroup?.assetGroupCode,ruleAssetTypeCodeForSource:d.viaAssetType?.assetTypeCode,ruleLayerIdForTarget:d.fromNetworkSource?.layerId,
ruleAssetGroupCodeForTarget:d.fromAssetGroup?.assetGroupCode,ruleAssetTypeCodeForTarget:d.fromAssetType?.assetTypeCode},{ruleLayerIdForSource:d.toNetworkSource?.layerId,ruleAssetGroupCodeForSource:d.toAssetGroup?.assetGroupCode,ruleAssetTypeCodeForSource:d.toAssetType?.assetTypeCode,ruleLayerIdForTarget:d.viaNetworkSource?.layerId,ruleAssetGroupCodeForTarget:d.viaAssetGroup?.assetGroupCode,ruleAssetTypeCodeForTarget:d.viaAssetType?.assetTypeCode},{ruleLayerIdForSource:d.viaNetworkSource?.layerId,
ruleAssetGroupCodeForSource:d.viaAssetGroup?.assetGroupCode,ruleAssetTypeCodeForSource:d.viaAssetType?.assetTypeCode,ruleLayerIdForTarget:d.toNetworkSource?.layerId,ruleAssetGroupCodeForTarget:d.toAssetGroup?.assetGroupCode,ruleAssetTypeCodeForTarget:d.toAssetType?.assetTypeCode}]:[{ruleLayerIdForSource:d.fromNetworkSource?.layerId,ruleAssetGroupCodeForSource:d.fromAssetGroup?.assetGroupCode,ruleAssetTypeCodeForSource:d.fromAssetType?.assetTypeCode,ruleLayerIdForTarget:d.toNetworkSource?.layerId,
ruleAssetGroupCodeForTarget:d.toAssetGroup?.assetGroupCode,ruleAssetTypeCodeForTarget:d.toAssetType?.assetTypeCode},{ruleLayerIdForSource:d.toNetworkSource?.layerId,ruleAssetGroupCodeForSource:d.toAssetGroup?.assetGroupCode,ruleAssetTypeCodeForSource:d.toAssetType?.assetTypeCode,ruleLayerIdForTarget:d.fromNetworkSource?.layerId,ruleAssetGroupCodeForTarget:d.fromAssetGroup?.assetGroupCode,ruleAssetTypeCodeForTarget:d.fromAssetType?.assetTypeCode}];default:return[]}}_getWhereClauseForCompatibleFeatures(d,
r,m){const w=new Map,[y,u]=this._getAssetFieldNames(d.sourceLayer),[A,H]=this._getFeatureAssetCodes(d),I=this._getFeatureSourceLayerId(d),L=q.isSubtypeSublayer(r)?r.parent:r,g=q.isSubtypeSublayer(r)?r.subtypeCode:null;m.forEach(C=>{const {type:f,direction:B}=C;this._getRulesForAssociationType(f).forEach(v=>{this._getRuleFieldValuesForAssociation(v,f,B).forEach(F=>{if(null!=F.ruleAssetGroupCodeForTarget&&null!=F.ruleAssetTypeCodeForTarget&&I===F?.ruleLayerIdForSource&&A===F?.ruleAssetGroupCodeForSource&&
H===F?.ruleAssetTypeCodeForSource&&L.layerId===F?.ruleLayerIdForTarget&&(null!=g?g===F?.ruleAssetGroupCodeForTarget:1)){const E=w.get(F.ruleAssetGroupCodeForTarget)??new Set;E.add(F.ruleAssetTypeCodeForTarget);w.set(F.ruleAssetGroupCodeForTarget,E)}})})});let D=[];this._mergeAssetCodes(w).forEach((C,f)=>D.push(`${y} IN (${f}) AND ${u} IN (${Array.from(C).sort().join(", ")})`));1<D.length&&(D=D.map(C=>`(${C})`));return D.join(" OR ")}_getRulesForAssociationType(d){const {rulesCategorized:r}=this;switch(d){case "attachment":return r.attachment;
case "containment":return r.containment;case "connectivity":case "junction-junction-connectivity":return r.connectivity.filter(m=>m.ruleType===t.RuleType.RTJunctionJunctionConnectivity);case "junction-edge-from-connectivity":case "junction-edge-midspan-connectivity":case "junction-edge-to-connectivity":return r.connectivity.filter(m=>m.ruleType===t.RuleType.RTJunctionEdgeConnectivity||m.ruleType===t.RuleType.RTEdgeJunctionEdgeConnectivity);default:return[]}}_getFeatureSourceLayerId(d){({sourceLayer:d}=
d);let r;q.isFeatureLayer(d)?r=d.layerId:q.isSubtypeSublayer(d)&&(r=d.parent?.layerId);return r??null}_getAssetFieldNames(d){if(!(d&&"fieldsIndex"in d))return[null,null];const r=d.fieldsIndex.normalizeFieldName("assetGroup")??null;d=d.fieldsIndex.normalizeFieldName("assetType")??null;return[r,d]}_getFeatureAssetCodes(d){const [r,m]=this._getAssetFieldNames(d.sourceLayer);return[r?d.attributes[r]:null,m?d.attributes[m]:null]}_areSetsEqual(d,r){if(d.size!==r.size)return!1;for(const m of d)if(!r.has(m))return!1;
return!0}_mergeAssetCodes(d){const r=new Map,m=new Set;for(const [y,u]of d){var w=new Set([y]);for(const [A,H]of d)y!==A&&!m.has(A)&&this._areSetsEqual(u,H)&&(w.add(A),m.add(A));w=Array.from(w).sort().join(", ");r.set(w,u)}return r}};b.__decorate([h.property({constructOnly:!0})],c.prototype,"rulesLayer",void 0);b.__decorate([h.property({constructOnly:!0})],c.prototype,"rules",void 0);b.__decorate([h.property({readOnly:!0})],c.prototype,"rulesHash",void 0);b.__decorate([h.property()],c.prototype,"rulesCategorized",
void 0);b.__decorate([h.property({constructOnly:!0})],c.prototype,"request",void 0);return c=b.__decorate([l.subclass("esri.networks.RulesTable")],c)})},"esri/networks/support/typeUtils":function(){define(["exports","../../core/jsonMap"],function(b,a){b.RuleType=void 0;var c=b.RuleType||(b.RuleType={});c[c.RTJunctionJunctionConnectivity=1]="RTJunctionJunctionConnectivity";c[c.RTContainment=2]="RTContainment";c[c.RTAttachment=3]="RTAttachment";c[c.RTJunctionEdgeConnectivity=4]="RTJunctionEdgeConnectivity";
c[c.RTEdgeJunctionEdgeConnectivity=5]="RTEdgeJunctionEdgeConnectivity";c=new a.JSONMap({connected:"connected",upstream:"upstream",downstream:"downstream",shortestPath:"shortest-path",subnetwork:"subnetwork",subnetworkController:"subnetwork-controller",loops:"loops",isolation:"isolation"});const e=new a.JSONMap({junctionJunctionConnectivity:"junction-junction-connectivity",connectivity:"connectivity",attachment:"attachment",containment:"containment",junctionEdgeFromConnectivity:"junction-edge-from-connectivity",
junctionEdgeMidspanConnectivity:"junction-edge-midspan-connectivity",junctionEdgeToConnectivity:"junction-edge-to-connectivity"});a=new a.JSONMap({normal:"normal",rebuild:"rebuild",forceRebuild:"force-rebuild"});b.AssociationTypeEnum={connectivity:1,"junction-junction-connectivity":1,containment:2,attachment:3,"junction-edge-from-connectivity":4,"junction-edge-midspan-connectivity":5,"junction-edge-to-connectivity":6};b.associationTypeKebabDict=e;b.traceTypeKebabDict=c;b.validationTypeKebabDict=a;
Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/networks/support/NamedTraceConfiguration":function(){define("../../chunks/tslib.es6 ../../core/MultiOriginJSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ./TraceConfiguration ./typeUtils ./UNTraceConfiguration".split(" "),function(b,a,c,e,h,n,z,p,l,q,t){a=class extends a.MultiOriginJSONSupport{constructor(d){super(d);
this.minStartingPoints=this.description=this.creator=this.creationDate=this.traceConfiguration=this.title=this.globalId=null;this.resultTypes=[];this.tags=[];this.traceType=null}readTraceConfiguration(d,r){return void 0!==d.tierName?t.fromJSON(d):l.fromJSON(d)}};b.__decorate([c.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"id"},write:{target:"id",isRequired:!0}},service:{read:{source:"globalId"},write:{target:"globalId",isRequired:!0}}},read:!1}})],a.prototype,"globalId",
void 0);b.__decorate([c.property({type:String,nonNullable:!0,json:{origins:{"web-map":{read:{source:"title"},write:{target:"title",isRequired:!0}},service:{read:{source:"name"},write:{target:"name",isRequired:!0}}},read:!1}})],a.prototype,"title",void 0);b.__decorate([c.property({type:l,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"traceConfiguration",void 0);b.__decorate([z.reader("service","traceConfiguration")],a.prototype,"readTraceConfiguration",null);b.__decorate([c.property({type:Date,
json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"creationDate",void 0);b.__decorate([c.property({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"creator",void 0);b.__decorate([c.property({type:String,json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"description",void 0);b.__decorate([c.property({type:["none","one","many"],json:{origins:{service:{read:{source:"minNumStartingPoints"},write:{target:"minNumStartingPoints"}}},read:!1}})],
a.prototype,"minStartingPoints",void 0);b.__decorate([c.property({json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"resultTypes",void 0);b.__decorate([c.property({type:[String],json:{origins:{service:{read:!0,write:!0}},read:!1}})],a.prototype,"tags",void 0);b.__decorate([c.property({type:q.traceTypeKebabDict.apiValues,json:{type:q.traceTypeKebabDict.jsonValues,origins:{service:{read:q.traceTypeKebabDict.read,write:q.traceTypeKebabDict.write}},read:!1}})],a.prototype,"traceType",
void 0);return a=b.__decorate([p.subclass("esri.networks.support.NamedTraceConfiguration")],a)})},"esri/networks/support/TraceConfiguration":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,e,h,n,z){a=class extends a{constructor(p){super(p);this.conditionBarriers=[];this.outputConditions=[];this.functions=[];
this.functionBarriers=[];this.ignoreBarriersAtStartingPoints=this.validateConsistency=this.includeBarriers=this.shortestPathNetworkAttributeName=this.traversabilityScope=null}};b.__decorate([c.property({type:[Object],json:{write:!0}})],a.prototype,"conditionBarriers",void 0);b.__decorate([c.property({type:[Object],json:{write:!0}})],a.prototype,"outputConditions",void 0);b.__decorate([c.property({type:[Object],json:{write:!0}})],a.prototype,"functions",void 0);b.__decorate([c.property({type:[Object],
json:{write:!0}})],a.prototype,"functionBarriers",void 0);b.__decorate([c.property({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],a.prototype,"traversabilityScope",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"shortestPathNetworkAttributeName",void 0);b.__decorate([c.property({type:Boolean,json:{write:!0}})],a.prototype,"includeBarriers",void 0);b.__decorate([c.property({type:Boolean,json:{write:!0}})],a.prototype,"validateConsistency",void 0);b.__decorate([c.property({type:Boolean,
json:{write:!0}})],a.prototype,"ignoreBarriersAtStartingPoints",void 0);return a=b.__decorate([z.subclass("esri.networks.support.TraceConfiguration")],a)})},"esri/networks/support/UNTraceConfiguration":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./TraceConfiguration".split(" "),function(b,a,c,e,h,n,z){c=class extends z{constructor(p){super(p);this.filterBarriers=
[];this.filterBitsetNetworkAttributeName=this.domainNetworkName=this.arcadeExpressionBarrier=null;this.filterFunctionBarriers=[];this.nearestNeighbor=this.includeUpToFirstSpatialContainer=this.allowIndeterminateFlow=this.includeStructures=this.includeIsolated=this.includeContent=this.includeContainers=this.filterScope=null;this.outputFilterCategories=[];this.outputFilters=[];this.propagators=[];this.validateLocatability=this.tierName=this.diagramTemplateName=this.targetTierName=this.subnetworkName=
null}};b.__decorate([a.property({type:[Object],json:{write:!0}})],c.prototype,"filterBarriers",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,"arcadeExpressionBarrier",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,"domainNetworkName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,"filterBitsetNetworkAttributeName",void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],c.prototype,"filterFunctionBarriers",
void 0);b.__decorate([a.property({type:["junctions","edges","junctionsAndEdges"],json:{write:!0}})],c.prototype,"filterScope",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],c.prototype,"includeContainers",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],c.prototype,"includeContent",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],c.prototype,"includeIsolated",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],c.prototype,"includeStructures",
void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],c.prototype,"allowIndeterminateFlow",void 0);b.__decorate([a.property({type:Boolean,json:{write:!0}})],c.prototype,"includeUpToFirstSpatialContainer",void 0);b.__decorate([a.property({type:Object,json:{write:!0}})],c.prototype,"nearestNeighbor",void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],c.prototype,"outputFilterCategories",void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],c.prototype,"outputFilters",
void 0);b.__decorate([a.property({type:[Object],json:{write:!0}})],c.prototype,"propagators",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,"subnetworkName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,"targetTierName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,"diagramTemplateName",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,"tierName",void 0);b.__decorate([a.property({type:Boolean,
json:{write:!0}})],c.prototype,"validateLocatability",void 0);return c=b.__decorate([n.subclass("esri.networks.support.UNTraceConfiguration")],c)})},"esri/networks/support/networkFieldUtils":function(){define(["exports"],function(b){b.getAssociationsTableFields=function(a){const c=a?.fieldsIndex;return{fromNetworkSourceId:c?.get("fromnetworksourceid")?.name??"fromnetworksourceid",fromGlobalId:c?.get("fromglobalid")?.name??"fromglobalid",fromTerminalId:c?.get("fromterminalid")?.name??"fromterminalid",
toNetworkSourceId:c?.get("tonetworksourceid")?.name??"tonetworksourceid",toGlobalId:c?.get("toglobalid")?.name??"toglobalid",toTerminalId:c?.get("toterminalid")?.name??"toterminalid",status:c?.get("status")?.name??"status",associationType:c?.get("associationtype")?.name??"associationtype",isContentVisible:c?.get("iscontentvisible")?.name??"iscontentvisible",percentAlong:c?.get("percentalong")?.name??"percentalong",globalId:c?.get(a?.globalIdField??"globalid")?.name??"globalid"}};b.getUtilityNetworkFields=
function(a,c){if("feature"!==c.type&&"subtype-group"!==c.type||!c.url)return[];a="utilityNetworks"in a.map?a.map.utilityNetworks??[]:[];for(var e of a)if(e.isUtilityLayer(c))return e=c.fieldsIndex.get("assetgroup"),c=c.fieldsIndex.get("assettype"),[e?.name,c?.name].filter(h=>null!=h);return[]};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/networks/support/NetworkSystemLayers":function(){define("../../chunks/tslib.es6 ../../core/Accessor ../../core/Error ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../layers/FeatureLayer".split(" "),
function(b,a,c,e,h,n,z,p,l){a=class extends a{constructor(q){super(q);this.associationsTableUrl=this.associationsTableId=this.associationsTable=this.dirtyAreasLayerUrl=this.dirtyAreasLayerId=this.subnetworksTableUrl=this.subnetworksTableId=this.rulesTableUrl=this.rulesTableId=null}destroy(){this.associationsTable?.destroy()}async loadAssociationsTable(){if(!this.associationsTable){const {associationsTableUrl:q}=this;if(!q)throw new c("utility-network-system-layers:missing-associations-table-url",
"Unable to load the associations table, as the `associationsTableUrl` is not set.");this.associationsTable=new l({url:q})}await this.associationsTable.load();return this.associationsTable}};b.__decorate([e.property({constructOnly:!0})],a.prototype,"rulesTableId",void 0);b.__decorate([e.property({constructOnly:!0})],a.prototype,"rulesTableUrl",void 0);b.__decorate([e.property({constructOnly:!0})],a.prototype,"subnetworksTableId",void 0);b.__decorate([e.property({constructOnly:!0})],a.prototype,"subnetworksTableUrl",
void 0);b.__decorate([e.property({constructOnly:!0})],a.prototype,"dirtyAreasLayerId",void 0);b.__decorate([e.property({constructOnly:!0})],a.prototype,"dirtyAreasLayerUrl",void 0);b.__decorate([e.property()],a.prototype,"associationsTable",void 0);b.__decorate([e.property({constructOnly:!0})],a.prototype,"associationsTableId",void 0);b.__decorate([e.property({constructOnly:!0})],a.prototype,"associationsTableUrl",void 0);return a=b.__decorate([p.subclass("esri.networks.support.NetworkSystemLayers")],
a)})},"esri/networks/support/TerminalConfiguration":function(){define("../../chunks/tslib.es6 ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./Terminal".split(" "),function(b,a,c,e,h,n,z,p,l){a=new a.JSONMap({esriUNTMBidirectional:"bidirectional",esriUNTMDirectional:"directional"});c=class extends c{constructor(q){super(q);this.name=this.id=this.defaultConfiguration=
null;this.terminals=[];this.traversabilityModel=null}};b.__decorate([e.property({type:String,json:{write:!0}})],c.prototype,"defaultConfiguration",void 0);b.__decorate([e.property({type:Number,json:{read:{source:"terminalConfigurationId"},write:{target:"terminalConfigurationId"}}})],c.prototype,"id",void 0);b.__decorate([e.property({type:String,json:{read:{source:"terminalConfigurationName"},write:{target:"terminalConfigurationName"}}})],c.prototype,"name",void 0);b.__decorate([e.property({type:[l],
json:{write:!0}})],c.prototype,"terminals",void 0);b.__decorate([e.property({type:a.apiValues,json:{type:a.jsonValues,read:a.read,write:a.write}})],c.prototype,"traversabilityModel",void 0);return c=b.__decorate([p.subclass("esri.networks.support.TerminalConfiguration")],c)})},"esri/networks/support/Terminal":function(){define("../../chunks/tslib.es6 ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,c,e,h,n,z){a=class extends a{constructor(p){super(p);this.name=this.id=null}};b.__decorate([c.property({type:Number,json:{read:{source:"terminalId"},write:{target:"terminalId"}}})],a.prototype,"id",void 0);b.__decorate([c.property({type:String,json:{read:{source:"terminalName"},write:{target:"terminalName"}}})],a.prototype,"name",void 0);b.__decorate([c.property({type:Boolean,json:{write:!0}})],a.prototype,"isUpstreamTerminal",void 0);return a=b.__decorate([z.subclass("esri.networks.support.Terminal")],
a)})},"esri/networks/support/TraceJobInfo":function(){define("../../chunks/tslib.es6 ../../request ../../core/has ../../core/jsonMap ../../core/promiseUtils ../../core/accessorSupport/decorators/property ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ../../rest/networks/support/TraceResult".split(" "),function(b,a,c,e,h,n,z,p,l,q,t){c=e.strict()({Pending:"job-waiting",InProgress:"job-executing",Completed:"job-succeeded"});
t=class extends t{constructor(d){super(d);this.lastUpdatedTime=this.submissionTime=this.status=this.statusUrl=null;this._timer=void 0}destroy(){clearInterval(this._timer)}async checkJobStatus(d){({data:d}=await a(this.statusUrl,{...d,query:{f:"json"}}));this.read(d.traceResults?{...d.traceResults,...d}:d);return this}async waitForJobCompletion(d={}){const {interval:r=1E3,statusCallback:m}=d;return new Promise((w,y)=>{this._clearTimer();this._timer=setInterval(()=>{this._timer||y(h.createAbortError());
this.checkJobStatus().then(u=>{({status:u}=u);this.status=u;switch(u){case "job-succeeded":this._clearTimer();w(this);break;case "job-waiting":case "job-executing":m&&m(this)}},u=>{this._clearTimer();y(u)})},r)})}_clearTimer(){clearInterval(this._timer);this._timer=void 0}};b.__decorate([n.property({type:String,json:{write:!0}})],t.prototype,"statusUrl",void 0);b.__decorate([l.enumeration(c)],t.prototype,"status",void 0);b.__decorate([n.property({type:Date,json:{type:Number,write:{writer:(d,r)=>{r.submissionTime=
d?d.getTime():null}}}})],t.prototype,"submissionTime",void 0);b.__decorate([n.property({type:Date,json:{type:Number,write:{writer:(d,r)=>{r.lastUpdatedTime=d?d.getTime():null}}}})],t.prototype,"lastUpdatedTime",void 0);return t=b.__decorate([q.subclass("esri.networks.support.TraceJobInfo")],t)})},"esri/rest/networks/support/TraceResult":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ./AggregatedGeometry ./FunctionResult ./NetworkElement".split(" "),
function(b,a,c,e,h,n,z,p,l,q){a=class extends a{constructor(t){super(t);this.globalFunctionResults=this.elements=this.aggregatedGeometry=null;this.startingPointsIgnored=this.kFeaturesForKNNFound=!1;this.warnings=null}};b.__decorate([c.property({type:p,json:{write:!0},readOnly:!0})],a.prototype,"aggregatedGeometry",void 0);b.__decorate([c.property({type:[q],json:{write:!0},readOnly:!0})],a.prototype,"elements",void 0);b.__decorate([c.property({type:[l],json:{write:!0},readOnly:!0})],a.prototype,"globalFunctionResults",
void 0);b.__decorate([c.property({type:Boolean,json:{write:!0},readOnly:!0})],a.prototype,"kFeaturesForKNNFound",void 0);b.__decorate([c.property({type:Boolean,json:{write:!0},readOnly:!0})],a.prototype,"startingPointsIgnored",void 0);b.__decorate([c.property({type:[String],json:{write:!0},readOnly:!0})],a.prototype,"warnings",void 0);return a=b.__decorate([z.subclass("esri.rest.networks.support.TraceResult")],a)})},"esri/rest/networks/support/AggregatedGeometry":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass ../../../geometry/Multipoint ../../../geometry/Polygon ../../../geometry/Polyline".split(" "),
function(b,a,c,e,h,n,z,p,l,q){a=class extends a{constructor(t){super(t);this.polygon=this.multipoint=this.line=null}};b.__decorate([c.property({type:q,json:{write:!0},readOnly:!0})],a.prototype,"line",void 0);b.__decorate([c.property({type:p,json:{read:{source:"point"},write:{target:"point"}},readOnly:!0})],a.prototype,"multipoint",void 0);b.__decorate([c.property({type:l,json:{write:!0},readOnly:!0})],a.prototype,"polygon",void 0);return a=b.__decorate([z.subclass("esri.rest.networks.support.AggregatedGeometry")],
a)})},"esri/rest/networks/support/FunctionResult":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,e,h,n,z){a=class extends a{constructor(p){super(p);this.result=this.networkAttributeName=this.functionType=null}};b.__decorate([c.property({type:"add subtract average count min max".split(" "),
json:{write:!0},readOnly:!0})],a.prototype,"functionType",void 0);b.__decorate([c.property({type:String,json:{write:!0},readOnly:!0})],a.prototype,"networkAttributeName",void 0);b.__decorate([c.property({type:Number,json:{write:!0},readOnly:!0})],a.prototype,"result",void 0);return a=b.__decorate([z.subclass("esri.rest.networks.support.FunctionResult")],a)})},"esri/rest/networks/support/NetworkElement":function(){define("../../../chunks/tslib.es6 ../../../core/JSONSupport ../../../core/accessorSupport/decorators/property ../../../core/has ../../../core/Logger ../../../core/RandomLCG ../../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,c,e,h,n,z){a=class extends a{constructor(p){super(p);this.terminalId=this.positionTo=this.positionFrom=this.objectId=this.networkSourceId=this.globalId=this.assetTypeCode=this.assetGroupCode=null}};b.__decorate([c.property({type:Number,json:{write:!0}})],a.prototype,"assetGroupCode",void 0);b.__decorate([c.property({type:Number,json:{write:!0}})],a.prototype,"assetTypeCode",void 0);b.__decorate([c.property({type:String,json:{write:!0}})],a.prototype,"globalId",void 0);b.__decorate([c.property({type:Number,
json:{write:!0}})],a.prototype,"networkSourceId",void 0);b.__decorate([c.property({type:Number,json:{write:!0}})],a.prototype,"objectId",void 0);b.__decorate([c.property({type:Number,json:{write:!0}})],a.prototype,"positionFrom",void 0);b.__decorate([c.property({type:Number,json:{write:!0}})],a.prototype,"positionTo",void 0);b.__decorate([c.property({type:Number,json:{write:!0}})],a.prototype,"terminalId",void 0);return a=b.__decorate([z.subclass("esri.rest.networks.support.NetworkElement")],a)})},
"esri/webdoc/GeotriggersInfo":function(){define("../chunks/tslib.es6 ../core/Clonable ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./geotriggersInfo/support/geotriggerTypes".split(" "),function(b,a,c,e,h,n,z,p,l){a=class extends a.ClonableMixin(c){constructor(q){super(q);this.geotriggers=null}};b.__decorate([e.property({types:[l.types],json:{write:{isRequired:!0}}})],a.prototype,"geotriggers",
void 0);return a=b.__decorate([p.subclass("esri.webdoc.GeotriggersInfo")],a)})},"esri/webdoc/geotriggersInfo/support/geotriggerTypes":function(){define(["exports","../FenceGeotrigger","../Geotrigger"],function(b,a,c){b.types={base:c,key:"type",typeMap:{fence:a}};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/geotriggersInfo/FenceGeotrigger":function(){define("../../chunks/tslib.es6 ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./DeviceLocationFeed ./FeatureFenceParameters ./Geotrigger ./GeotriggerNotificationOptions ./support/typeUtils".split(" "),
function(b,a,c,e,h,n,z,p,l,q,t,d){c=class extends q{constructor(r){super(r);this.enterExitRule="enter-contains-and-exit-does-not-intersect";this.feed=null;this.feedAccuracyMode="use-geometry";this.notificationOptions=this.name=this.fenceParameters=this.fenceNotificationRule=null;this.type="fence"}};b.__decorate([n.enumeration(d.enterExitRuleKebabDict)],c.prototype,"enterExitRule",void 0);b.__decorate([a.property({type:p,json:{write:{isRequired:!0}}})],c.prototype,"feed",void 0);b.__decorate([n.enumeration(d.feedAccuracyModeKebabDict)],
c.prototype,"feedAccuracyMode",void 0);b.__decorate([a.property({type:d.fenceNotificationRuleKebabDict.apiValues,json:{type:d.fenceNotificationRuleKebabDict.jsonValues,read:d.fenceNotificationRuleKebabDict.read,write:{writer:d.fenceNotificationRuleKebabDict.write,isRequired:!0}}})],c.prototype,"fenceNotificationRule",void 0);b.__decorate([a.property({type:l,json:{write:{isRequired:!0}}})],c.prototype,"fenceParameters",void 0);b.__decorate([a.property({type:String,json:{write:!0}})],c.prototype,"name",
void 0);b.__decorate([a.property({type:t,json:{write:!0}})],c.prototype,"notificationOptions",void 0);b.__decorate([n.enumeration({fence:"fence"},{readOnly:!0})],c.prototype,"type",void 0);return c=b.__decorate([z.subclass("esri.webdoc.geotriggersInfo.FenceGeotrigger")],c)})},"esri/webdoc/geotriggersInfo/DeviceLocationFeed":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/jsonMap ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./ExpressionInfo".split(" "),
function(b,a,c,e,h,n,z,p,l,q){c=new c.JSONMap({deviceLocation:"device-location"});a=class extends a.ClonableMixin(e){constructor(t){super(t);this.filterExpression=null;this.type="device-location"}};b.__decorate([h.property({type:q,json:{write:!0}})],a.prototype,"filterExpression",void 0);b.__decorate([h.property({type:c.apiValues,readOnly:!0,json:{type:c.jsonValues,read:c.read,write:c.write}})],a.prototype,"type",void 0);return a=b.__decorate([l.subclass("esri.webdoc.geotriggersInfo.DeviceLocationFeed")],
a)})},"esri/webdoc/geotriggersInfo/ExpressionInfo":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,e,h,n,z,p){a=class extends a.ClonableMixin(c){constructor(l){super(l);this.expression=null;this.returnType="string";this.title=null}};b.__decorate([e.property({type:String,json:{write:{isRequired:!0}}})],
a.prototype,"expression",void 0);b.__decorate([e.property({type:["number","string"],json:{write:!0}})],a.prototype,"returnType",void 0);b.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"title",void 0);return a=b.__decorate([p.subclass("esri.webdoc.geotriggersInfo.ExpressionInfo")],a)})},"esri/webdoc/geotriggersInfo/FeatureFenceParameters":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass ./FeatureFilter ./FeatureLayerSource".split(" "),
function(b,a,c,e,h,n,z,p,l,q,t){a=class extends a.ClonableMixin(c){constructor(d){super(d);this.bufferDistance=this.filter=this.fenceSource=null;this.type="features"}};b.__decorate([e.property({type:t,json:{write:{isRequired:!0}}})],a.prototype,"fenceSource",void 0);b.__decorate([e.property({type:q,json:{write:!0}})],a.prototype,"filter",void 0);b.__decorate([e.property({type:Number,json:{write:!0}})],a.prototype,"bufferDistance",void 0);b.__decorate([p.enumeration({features:"features"},{readOnly:!0})],
a.prototype,"type",void 0);return a=b.__decorate([l.subclass("esri.webdoc.geotriggersInfo.FeatureFenceParameters")],a)})},"esri/webdoc/geotriggersInfo/FeatureFilter":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ../../geometry/support/jsonUtils ../../geometry/support/typeUtils".split(" "),function(b,a,c,e,h,n,z,p,
l,q){a=class extends a.ClonableMixin(c){constructor(t){super(t);this.where=this.geometry=null}};b.__decorate([e.property({types:q.geometryTypes,json:{read:l.fromJSON,write:!0}})],a.prototype,"geometry",void 0);b.__decorate([e.property({type:String,json:{write:!0}})],a.prototype,"where",void 0);return a=b.__decorate([p.subclass("esri.webdoc.geotriggersInfo.FeatureFilter")],a)})},"esri/webdoc/geotriggersInfo/FeatureLayerSource":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),
function(b,a,c,e,h,n,z,p,l){a=class extends a.ClonableMixin(c){constructor(q){super(q);this.layerUrl=this.layerId=null;this.type="feature-layer"}};b.__decorate([e.property({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerUrl}}}}})],a.prototype,"layerId",void 0);b.__decorate([e.property({type:String,json:{write:{overridePolicy(){return{isRequired:null===this.layerId}}}}})],a.prototype,"layerUrl",void 0);b.__decorate([p.enumeration({featureLayer:"feature-layer"},{readOnly:!0})],
a.prototype,"type",void 0);return a=b.__decorate([l.subclass("esri.webdoc.geotriggersInfo.FeatureLayerSource")],a)})},"esri/webdoc/geotriggersInfo/Geotrigger":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/Logger ../../core/has ../../core/RandomLCG ../../core/Error ../../core/accessorSupport/decorators/enumeration ../../core/accessorSupport/decorators/subclass".split(" "),function(b,a,c,e,h,n,z,p,l){a=class extends a.ClonableMixin(c){constructor(q){super(q);
this.type="fence"}};b.__decorate([p.enumeration({fence:"fence"},{readOnly:!0})],a.prototype,"type",void 0);return a=b.__decorate([l.subclass("esri.webdoc.geotriggersInfo.Geotrigger")],a)})},"esri/webdoc/geotriggersInfo/GeotriggerNotificationOptions":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/subclass ./ExpressionInfo".split(" "),
function(b,a,c,e,h,n,z,p,l){a=class extends a.ClonableMixin(c){constructor(q){super(q);this.requestedActions=this.expressionInfo=null}};b.__decorate([e.property({type:l,json:{write:!0}})],a.prototype,"expressionInfo",void 0);b.__decorate([e.property({type:[String],json:{write:!0}})],a.prototype,"requestedActions",void 0);return a=b.__decorate([p.subclass("esri.webdoc.geotriggersInfo.GeotriggerNotificationOptions")],a)})},"esri/webdoc/geotriggersInfo/support/typeUtils":function(){define(["exports",
"../../../core/jsonMap"],function(b,a){const c=new a.JSONMap({enterContainsAndExitDoesNotContain:"enter-contains-and-exit-does-not-contain",enterContainsAndExitDoesNotIntersect:"enter-contains-and-exit-does-not-intersect",enterIntersectsAndExitDoesNotIntersect:"enter-intersects-and-exit-does-not-intersect"}),e=new a.JSONMap({useGeometry:"use-geometry",useGeometryWithAccuracy:"use-geometry-with-accuracy"});a=new a.JSONMap({enter:"enter",enterOrExit:"enter-or-exit",exit:"exit"});b.enterExitRuleKebabDict=
c;b.feedAccuracyModeKebabDict=e;b.fenceNotificationRuleKebabDict=a;Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"esri/webdoc/IPSInfo":function(){define("../chunks/tslib.es6 ../core/Clonable ../core/JSONSupport ../core/accessorSupport/decorators/property ../core/has ../core/Logger ../core/RandomLCG ../core/accessorSupport/decorators/subclass ./ips/PositioningService".split(" "),function(b,a,c,e,h,n,z,p,l){a=class extends a.ClonableMixin(c){constructor(q){super(q);this.positioningService=
null}};b.__decorate([e.property({type:l,json:{write:{isRequired:!0}}})],a.prototype,"positioningService",void 0);return a=b.__decorate([p.subclass("esri.webdoc.IPSInfo")],a)})},"esri/webdoc/ips/PositioningService":function(){define("../../chunks/tslib.es6 ../../core/Clonable ../../core/JSONSupport ../../core/accessorSupport/decorators/property ../../core/has ../../core/Logger ../../core/RandomLCG ../../core/accessorSupport/decorators/reader ../../core/accessorSupport/decorators/subclass ../../core/accessorSupport/decorators/writer ../../portal/PortalItem".split(" "),
function(b,a,c,e,h,n,z,p,l,q,t){a=class extends a.ClonableMixin(c){constructor(d){super(d);this.portalItem=null}readPortalItem(d,r,m){({itemId:d}=r);if(d)return new t({id:d,portal:m?.portal})}writePortalItem(d,r){d?.id&&(r.itemId=d.id)}};b.__decorate([e.property({type:t,json:{write:{isRequired:!0}}})],a.prototype,"portalItem",void 0);b.__decorate([p.reader("portalItem",["itemId"])],a.prototype,"readPortalItem",null);b.__decorate([q.writer("portalItem",{itemId:{type:String}})],a.prototype,"writePortalItem",
null);return a=b.__decorate([l.subclass("esri.webdoc.ips.PositioningService")],a)})},"esri/webmap/utils":function(){define(["exports","./Version"],function(b,a){a=new a.Version(2,33);b.currentVersion=a;b.isWebMap=function(c){return null!=c&&"object"===typeof c&&"declaredClass"in c&&"esri.WebMap"===c.declaredClass};Object.defineProperty(b,Symbol.toStringTag,{value:"Module"})})},"*noref":1}});
define("./chunks/tslib.es6 ./WebDocument2D ./core/Collection ./core/Error ./core/loadAll ./core/accessorSupport/decorators/property ./core/has ./core/Logger ./core/RandomLCG ./core/accessorSupport/decorators/subclass ./networks/UtilityNetwork ./webdoc/GeotriggersInfo ./webdoc/IPSInfo ./webmap/InitialViewProperties ./webmap/utils ./webmap/Version".split(" "),function(b,a,c,e,h,n,z,p,l,q,t,d,r,m,w,y){const u={currentVersion:w.currentVersion,createInitialViewProperties:()=>new m,parseVersion:y.Version.parse,
itemType:"Web Map",name:"webmap",origin:"web-map"};c=c.ofType(t);a=class extends a{constructor(A){super(A);this.utilityNetworks=this.presentation=this.ipsInfo=this.geotriggersInfo=null}destroy(){if(this.utilityNetworks){const A=this.utilityNetworks.removeAll();for(const H of A)H.destroy();this.utilityNetworks.destroy()}}get context(){return u}loadAll(){return h.loadAll(this,A=>{A(this.ground,this.basemap,this.layers,this.tables,this.ipsInfo?.positioningService?.portalItem)})}static fromJSON(A){if(A)return new this({resourceInfo:A});
throw new e("webmap:empty-resource","Expected a JSON resource but got nothing");}};a.VERSION=w.currentVersion;b.__decorate([n.property({type:d,json:{write:!0}})],a.prototype,"geotriggersInfo",void 0);b.__decorate([n.property({type:r,json:{write:!0,name:"mapIPSInfo"}})],a.prototype,"ipsInfo",void 0);b.__decorate([n.property({json:{write:!0}})],a.prototype,"presentation",void 0);b.__decorate([n.property({type:c,json:{read:!0,write:!0}})],a.prototype,"utilityNetworks",void 0);return a=b.__decorate([q.subclass("esri.WebMap")],
a)});